<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>STAT 418 - Accessible Slides</title>
  
  <!-- KaTeX CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" crossorigin="anonymous">
  
  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CSS RESET & BASE STYLES
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    
    :root {
      --purdue-gold: #CEB888;
      --purdue-gold-accessible: #b8a060;
      --purdue-black: #000000;
      --gray-50: #f9fafb; --gray-100: #f3f4f6; --gray-200: #e5e7eb;
      --gray-300: #d1d5db; --gray-400: #9ca3af; --gray-500: #6b7280;
      --gray-600: #4b5563; --gray-700: #374151; --gray-800: #1f2937; --gray-900: #111827;
      --blue-50: #eff6ff; --blue-100: #dbeafe; --blue-200: #bfdbfe;
      --blue-400: #60a5fa; --blue-500: #3b82f6; --blue-600: #2563eb; --blue-700: #1d4ed8; --blue-800: #1e40af;
      --purple-50: #faf5ff; --purple-100: #f3e8ff; --purple-200: #e9d5ff;
      --purple-400: #c084fc; --purple-500: #a855f7; --purple-600: #9333ea; --purple-700: #7c3aed; --purple-800: #6b21a8;
      --teal-50: #f0fdfa; --teal-100: #ccfbf1; --teal-200: #99f6e4;
      --teal-400: #2dd4bf; --teal-500: #14b8a6; --teal-600: #0d9488; --teal-700: #0f766e; --teal-800: #115e59;
      --emerald-50: #ecfdf5; --emerald-100: #d1fae5; --emerald-200: #a7f3d0;
      --emerald-400: #34d399; --emerald-500: #10b981; --emerald-600: #059669; --emerald-700: #047857; --emerald-800: #065f46;
      --amber-50: #fffbeb; --amber-100: #fef3c7; --amber-200: #fde68a;
      --amber-400: #fbbf24; --amber-500: #f59e0b; --amber-600: #d97706; --amber-700: #b45309; --amber-800: #92400e;
      --orange-50: #fff7ed; --orange-100: #ffedd5; --orange-200: #fed7aa; --orange-800: #9a3412;
      --red-50: #fef2f2; --red-100: #fee2e2; --red-200: #fecaca;
      --red-400: #f87171; --red-600: #dc2626; --red-700: #b91c1c; --red-800: #991b1b;
      --rose-50: #fff1f2; --rose-100: #ffe4e6; --rose-200: #fecdd3;
      --rose-400: #fb7185; --rose-600: #e11d48; --rose-700: #be123c; --rose-800: #9f1239;
      --indigo-50: #eef2ff; --indigo-200: #c7d2fe; --indigo-600: #4f46e5; --indigo-700: #4338ca; --indigo-800: #3730a3;
      --green-50: #f0fdf4; --green-100: #dcfce7; --green-200: #bbf7d0;
      --green-400: #4ade80; --green-700: #15803d; --green-800: #166534;
      --slate-50: #f8fafc; --slate-100: #f1f5f9; --slate-200: #e2e8f0;
      --slate-300: #cbd5e1; --slate-400: #94a3b8; --slate-500: #64748b;
      --slate-600: #475569; --slate-700: #334155; --slate-800: #1e293b; --slate-900: #0f172a;
      --cyan-400: #22d3ee;
      
      /* Focus ring color */
      --focus-ring: #fbbf24;
      --focus-ring-offset: 2px;
    }
    
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--gray-50);
      color: var(--gray-900);
      overflow: hidden;
      line-height: 1.6;
      font-size: 18px;
    }
    
    #root { height: 100vh; display: flex; flex-direction: column; }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ACCESSIBILITY: SKIP LINK
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .skip-link {
      position: absolute;
      top: -100px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--purdue-gold);
      color: var(--purdue-black);
      padding: 0.75rem 1.5rem;
      border-radius: 0 0 0.5rem 0.5rem;
      font-weight: 600;
      z-index: 9999;
      text-decoration: none;
      transition: top 0.2s;
    }
    
    .skip-link:focus {
      top: 0;
      outline: 3px solid var(--focus-ring);
      outline-offset: 2px;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ACCESSIBILITY: FOCUS STYLES
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    *:focus:not(:focus-visible) { outline: none; }
    
    *:focus-visible {
      outline: 3px solid var(--focus-ring);
      outline-offset: var(--focus-ring-offset);
    }
    
    .slide-header *:focus-visible,
    .slide-nav *:focus-visible {
      outline-color: var(--purdue-gold);
      outline-offset: 2px;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ACCESSIBILITY: REDUCED MOTION
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
      .current-indicator { animation: none; }
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ACCESSIBILITY: SCREEN READER ONLY
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
    
    /* KaTeX fixes */
    .katex-mathml { position: absolute !important; clip: rect(1px, 1px, 1px, 1px) !important; }
    .katex, .katex * { box-sizing: content-box; }
    .katex { color: inherit; font-size: 1.1em; }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       UTILITY CLASSES
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .flex { display: flex; }
    .flex-col { flex-direction: column; }
    .flex-row { flex-direction: row; }
    .flex-1 { flex: 1 1 0%; min-height: 0; min-width: 0; }
    .flex-shrink-0 { flex-shrink: 0; }
    .flex-wrap { flex-wrap: wrap; }
    .items-center { align-items: center; }
    .items-start { align-items: flex-start; }
    .items-end { align-items: flex-end; }
    .justify-center { justify-content: center; }
    .justify-between { justify-content: space-between; }
    .justify-around { justify-content: space-around; }
    .self-center { align-self: center; }
    
    .gap-0\.5 { gap: 0.125rem; }
    .gap-1 { gap: 0.25rem; }
    .gap-1\.5 { gap: 0.375rem; }
    .gap-2 { gap: 0.5rem; }
    .gap-3 { gap: 0.75rem; }
    .gap-4 { gap: 1rem; }
    .gap-6 { gap: 1.5rem; }
    .gap-8 { gap: 2rem; }
    
    /* Grid */
    .grid { display: grid; }
    .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    .grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
    .grid-cols-5 { grid-template-columns: repeat(5, minmax(0, 1fr)); }
    .col-span-full { grid-column: 1 / -1; }
    .col-span-2 { grid-column: span 2 / span 2; }
    .col-span-3 { grid-column: span 3 / span 3; }
    
    /* Width */
    .w-full { width: 100%; }
    .w-1\/2 { width: 50%; }
    .w-1\/3 { width: 33.333333%; }
    .w-2\/3 { width: 66.666667%; }
    .w-1\/4 { width: 25%; }
    .w-3\/4 { width: 75%; }
    .w-1\/5 { width: 20%; }
    .w-2\/5 { width: 40%; }
    .w-3\/5 { width: 60%; }
    .w-4\/5 { width: 80%; }
    .w-4 { width: 1rem; }
    .w-5 { width: 1.25rem; }
    .w-6 { width: 1.5rem; }
    .w-7 { width: 1.75rem; }
    

    /* Arbitrary widths */
    .w-\[28\%\] { width: 28%; }
    .w-\[72\%\] { width: 72%; }

    /* Height */
    .h-full { height: 100%; }
    .h-1 { height: 0.25rem; }
    .h-6 { height: 1.5rem; }
    .h-7 { height: 1.75rem; }
    .h-10 { height: 2.5rem; }
    .h-140 { height: 35rem; }
    .min-h-0 { min-height: 0; }
    .max-h-44 { max-height: 11rem; }
    .max-h-64 { max-height: 16rem; }
    .max-h-72 { max-height: 18rem; }
    .max-h-80 { max-height: 20rem; }
    .max-h-full { max-height: 100%; }
    .shrink-0 { flex-shrink: 0; }
    
    /* Overflow */
    .overflow-auto { overflow: auto; }
    .overflow-hidden { overflow: hidden; }
    .overflow-x-auto { overflow-x: auto; }
    
    /* Padding */
    .p-1 { padding: 0.25rem; }
    .p-1\.5 { padding: 0.375rem; }
    .p-2 { padding: 0.5rem; }
    .p-3 { padding: 0.75rem; }
    .p-4 { padding: 1rem; }
    .p-5 { padding: 1.25rem; }
    .p-6 { padding: 1.5rem; }
    .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
    .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
    .px-4 { padding-left: 1rem; padding-right: 1rem; }
    .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
    .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
    .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
    .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
    
    /* Margin */
    .mb-0 { margin-bottom: 0; }
    .mb-0\.5 { margin-bottom: 0.125rem; }
    .mb-1 { margin-bottom: 0.25rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-3 { margin-bottom: 0.75rem; }
    .mb-4 { margin-bottom: 1rem; }
    .mb-5 { margin-bottom: 1.25rem; }
    .mb-6 { margin-bottom: 1.5rem; }
    .mt-1 { margin-top: 0.25rem; }
    .mt-2 { margin-top: 0.5rem; }
    .mt-3 { margin-top: 0.75rem; }
    .mt-4 { margin-top: 1rem; }
    .mt-auto { margin-top: auto; }
    .ml-1 { margin-left: 0.25rem; }
    .mx-auto { margin-left: auto; margin-right: auto; }
    .-mt-2 { margin-top: -0.5rem; }
    .-mt-3 { margin-top: -0.75rem; }
    
    .space-y-0\.5 > * + * { margin-top: 0.125rem; }
    .space-y-1 > * + * { margin-top: 0.25rem; }
    .space-y-2 > * + * { margin-top: 0.5rem; }
    .space-y-3 > * + * { margin-top: 0.75rem; }
    .space-y-4 > * + * { margin-top: 1rem; }
    
    /* Font sizes */
    .text-\[10px\] { font-size: 10px; line-height: 1.4; }
    .text-\[11px\] { font-size: 11px; line-height: 1.4; }
    .text-\[12px\] { font-size: 12px; line-height: 1.4; }
    .text-\[13px\] { font-size: 13px; line-height: 1.5; }
    .text-xs { font-size: 0.75rem; line-height: 1rem; }
    .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
    .text-base { font-size: 1rem; line-height: 1.5rem; }
    .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
    .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
    .text-2xl { font-size: 1.5rem; line-height: 2rem; }
    .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
    .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
    
    .font-mono { font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace; }
    .font-medium { font-weight: 500; }
    .font-semibold { font-weight: 600; }
    .font-bold { font-weight: 700; }
    
    .text-center { text-align: center; }
    .text-left { text-align: left; }
    .uppercase { text-transform: uppercase; }
    .tracking-wider { letter-spacing: 0.05em; }
    .tracking-wide { letter-spacing: 0.025em; }
    .italic { font-style: italic; }
    .whitespace-pre-wrap { white-space: pre-wrap; }
    .leading-relaxed { line-height: 1.625; }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TEXT COLORS (including light shades for dark backgrounds)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .text-white { color: white; }
    .text-black { color: black; }
    .text-gray-300 { color: #d1d5db; }
    .text-gray-400 { color: var(--gray-400); }
    .text-gray-500 { color: var(--gray-500); }
    .text-gray-600 { color: var(--gray-600); }
    .text-gray-700 { color: var(--gray-700); }
    .text-gray-900 { color: var(--gray-900); }
    .text-blue-200 { color: #bfdbfe; }
    .text-blue-300 { color: #93c5fd; }
    .text-blue-400 { color: #60a5fa; }
    .text-blue-600 { color: var(--blue-600); }
    .text-blue-700 { color: var(--blue-700); }
    .text-blue-800 { color: var(--blue-800); }
    .text-purple-200 { color: #e9d5ff; }
    .text-purple-300 { color: #d8b4fe; }
    .text-purple-400 { color: #c084fc; }
    .text-purple-600 { color: var(--purple-600); }
    .text-purple-700 { color: var(--purple-700); }
    .text-purple-800 { color: var(--purple-800); }
    .text-teal-600 { color: var(--teal-600); }
    .text-teal-700 { color: var(--teal-700); }
    .text-teal-800 { color: var(--teal-800); }
    .text-emerald-200 { color: #a7f3d0; }
    .text-emerald-300 { color: #6ee7b7; }
    .text-emerald-600 { color: var(--emerald-600); }
    .text-emerald-700 { color: var(--emerald-700); }
    .text-emerald-800 { color: var(--emerald-800); }
    .text-green-200 { color: #bbf7d0; }
    .text-green-300 { color: #86efac; }
    .text-green-400 { color: #4ade80; }
    .text-green-700 { color: #047857; }
    .text-green-800 { color: var(--green-800); }
    .text-amber-200 { color: #fde68a; }
    .text-amber-300 { color: #fcd34d; }
    .text-amber-400 { color: var(--amber-400); }
    .text-amber-500 { color: var(--amber-500); }
    .text-amber-600 { color: var(--amber-600); }
    .text-amber-700 { color: var(--amber-700); }
    .text-amber-800 { color: var(--amber-800); }
    .text-orange-800 { color: var(--orange-800); }
    .text-red-200 { color: #fecaca; }
    .text-red-300 { color: #fca5a5; }
    .text-red-600 { color: var(--red-600); }
    .text-red-700 { color: var(--red-700); }
    .text-red-800 { color: var(--red-800); }
    .text-rose-700 { color: var(--rose-700); }
    .text-rose-800 { color: var(--rose-800); }
    .text-pink-200 { color: #fbcfe8; }
    .text-pink-300 { color: #f9a8d4; }
    .text-pink-400 { color: #f472b6; }
    .text-indigo-200 { color: #c7d2fe; }
    .text-indigo-300 { color: #a5b4fc; }
    .text-indigo-600 { color: var(--indigo-600); }
    .text-indigo-700 { color: var(--indigo-700); }
    .text-indigo-800 { color: var(--indigo-800); }
    .text-slate-300 { color: var(--slate-300); }
    .text-slate-400 { color: var(--slate-400); }
    .text-slate-500 { color: var(--slate-500); }
    .text-slate-600 { color: var(--slate-600); }
    .text-slate-700 { color: var(--slate-700); }
    .text-slate-800 { color: var(--slate-800); }
    .text-cyan-400 { color: var(--cyan-400); }
    .text-cyan-700 { color: #0e7490; }
    .text-cyan-800 { color: #155e75; }
    
    /* Text */
    .text-green-600 { color: #059669; }
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BACKGROUND COLORS (including opacity variants for glass effects)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .bg-white { background-color: white; }
    .bg-black { background-color: black; }
    .bg-gray-50 { background-color: var(--gray-50); }
    .bg-gray-100 { background-color: var(--gray-100); }
    .bg-gray-700 { background-color: var(--gray-700); }
    .bg-gray-900 { background-color: var(--gray-900); }
    .bg-blue-50 { background-color: var(--blue-50); }
    .bg-blue-100 { background-color: var(--blue-100); }
    .bg-blue-500 { background-color: var(--blue-500); }
    .bg-purple-50 { background-color: var(--purple-50); }
    .bg-purple-500 { background-color: var(--purple-500); }
    .bg-purple-600 { background-color: var(--purple-600); }
    .bg-teal-50 { background-color: var(--teal-50); }
    .bg-teal-500 { background-color: var(--teal-500); }
    .bg-emerald-50 { background-color: var(--emerald-50); }
    .bg-emerald-500 { background-color: var(--emerald-500); }
    .bg-green-50 { background-color: var(--green-50); }
    .bg-green-500 { background-color: #22c55e; }
    .bg-amber-50 { background-color: var(--amber-50); }
    .bg-amber-100 { background-color: var(--amber-100); }
    .bg-amber-400 { background-color: var(--amber-400); }
    .bg-amber-500 { background-color: var(--amber-500); }
    .bg-orange-50 { background-color: var(--orange-50); }
    .bg-red-50 { background-color: var(--red-50); }
    .bg-red-100 { background-color: var(--red-100); }
    .bg-rose-50 { background-color: var(--rose-50); }
    .bg-rose-100 { background-color: var(--rose-100); }
    .bg-rose-500 { background-color: #f43f5e; }
    .bg-indigo-50 { background-color: var(--indigo-50); }
    .bg-indigo-600 { background-color: var(--indigo-600); }
    .bg-slate-50 { background-color: var(--slate-50); }
    .bg-slate-700 { background-color: var(--slate-700); }
    .bg-slate-800 { background-color: var(--slate-800); color: #e2e8f0; }
    .bg-slate-900 { background-color: var(--slate-900); }
    .bg-cyan-50 { background-color: #ecfeff; }
    .bg-cyan-100 { background-color: #cffafe; }
    


    /* Backgrounds */
    .bg-purple-100 { background-color: var(--purple-100); }
    .bg-green-100 { background-color: var(--green-100); }


    /* Semi-transparent backgrounds */
    .bg-white\/5 { background-color: rgb(255 255 255 / 0.05); }
    .bg-white\/10 { background-color: rgb(255 255 255 / 0.1); }
    .bg-white\/20 { background-color: rgb(255 255 255 / 0.2); }
    .bg-blue-500\/20 { background-color: rgb(59 130 246 / 0.2); }
    .bg-blue-500\/30 { background-color: rgb(59 130 246 / 0.3); }
    .bg-blue-600\/30 { background-color: rgb(37 99 235 / 0.3); }
    .bg-purple-500\/20 { background-color: rgb(168 85 247 / 0.2); }
    .bg-purple-500\/30 { background-color: rgb(168 85 247 / 0.3); }
    .bg-purple-600\/30 { background-color: rgb(147 51 234 / 0.3); }
    .bg-green-500\/20 { background-color: rgb(34 197 94 / 0.2); }
    .bg-amber-500\/20 { background-color: rgb(245 158 11 / 0.2); }
    .bg-amber-500\/30 { background-color: rgb(245 158 11 / 0.3); }
    .bg-amber-600\/30 { background-color: rgb(217 119 6 / 0.3); }
    .bg-pink-500\/30 { background-color: rgb(236 72 153 / 0.3); }
    .bg-pink-600\/30 { background-color: rgb(219 39 119 / 0.3); }
    .bg-emerald-500\/30 { background-color: rgb(16 185 129 / 0.3); }
    .bg-emerald-600\/30 { background-color: rgb(5 150 105 / 0.3); }
    .bg-red-500\/20 { background-color: rgb(239 68 68 / 0.2); }
    
    /* Gradients */
    .bg-gradient-to-r { background-image: linear-gradient(to right, var(--tw-gradient-stops)); }
    .bg-gradient-to-br { background-image: linear-gradient(to bottom right, var(--tw-gradient-stops)); }
    .bg-gradient-to-b { background-image: linear-gradient(to bottom, var(--tw-gradient-stops)); }
    
    .from-slate-50 { --tw-gradient-from: var(--slate-50); --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, transparent); }
    .from-amber-400 { --tw-gradient-from: var(--amber-400); --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, transparent); }
    .from-gray-900 { --tw-gradient-from: #111827; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, transparent); }
    .from-indigo-900 { --tw-gradient-from: #312e81; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, transparent); }
    .from-green-100 { --tw-gradient-from: #dcfce7; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, transparent); }
    
    .via-blue-900 { --tw-gradient-stops: var(--tw-gradient-from), #1e3a8a, var(--tw-gradient-to, transparent); }
    .via-purple-900 { --tw-gradient-stops: var(--tw-gradient-from), #581c87, var(--tw-gradient-to, transparent); }
    
    .to-gray-50 { --tw-gradient-to: var(--gray-50); }
    .to-amber-500 { --tw-gradient-to: var(--amber-500); }
    .to-gray-900 { --tw-gradient-to: #111827; }
    .to-indigo-900 { --tw-gradient-to: #312e81; }
    .to-emerald-100 { --tw-gradient-to: #d1fae5; }
    
    /* Backdrop blur */
    .backdrop-blur { backdrop-filter: blur(8px); }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BORDERS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .border { border: 1px solid; }
    .border-2 { border: 2px solid; }
    .border-4 { border: 4px solid; }
    .border-b { border-bottom: 1px solid; }
    .border-b-2 { border-bottom: 2px solid; }
    .border-l-4 { border-left: 4px solid; }
    .border-t { border-top: 1px solid; }
    
    .border-transparent { border-color: transparent; }
    .border-gray-200 { border-color: var(--gray-200); }
    .border-gray-300 { border-color: var(--gray-300); }
    .border-blue-100 { border-color: var(--blue-100); }
    .border-blue-200 { border-color: var(--blue-200); }
    .border-blue-300 { border-color: var(--blue-300); }
    .border-blue-400 { border-color: var(--blue-400); }
    .border-blue-500 { border-color: var(--blue-500); }
    .border-blue-600 { border-color: var(--blue-600); }
    .border-purple-100 { border-color: var(--purple-100); }
    .border-purple-200 { border-color: var(--purple-200); }
    .border-purple-400 { border-color: var(--purple-400); }
    .border-purple-500 { border-color: var(--purple-500); }
    .border-purple-600 { border-color: var(--purple-600); }
    .border-teal-200 { border-color: var(--teal-200); }
    .border-emerald-100 { border-color: var(--emerald-100); }
    .border-emerald-200 { border-color: var(--emerald-200); }
    .border-emerald-400 { border-color: var(--emerald-400); }
    .border-emerald-500 { border-color: var(--emerald-500); }
    .border-emerald-600 { border-color: var(--emerald-600); }
    .border-green-200 { border-color: var(--green-200); }
    .border-green-300 { border-color: #86efac; }
    .border-amber-200 { border-color: var(--amber-200); }
    .border-amber-300 { border-color: var(--amber-300); }
    .border-amber-400 { border-color: var(--amber-400); }
    .border-amber-500 { border-color: var(--amber-500); }
    .border-orange-200 { border-color: var(--orange-200); }
    .border-red-200 { border-color: var(--red-200); }
    .border-rose-200 { border-color: var(--rose-200); }
    .border-indigo-200 { border-color: var(--indigo-200); }
    .border-indigo-300 { border-color: #a5b4fe; }
    .border-slate-200 { border-color: var(--slate-200); }
    .border-slate-600 { border-color: var(--slate-600); }
    .border-cyan-200 { border-color: #a5f3fc; }
    
    /* Borders */
    .border-purple-300 { border-color: #d8b4fe; }
    .border-red-300 { border-color: #fca5a5; }

    /* Semi-transparent borders */
    .border-white\/10 { border-color: rgb(255 255 255 / 0.1); }
    .border-white\/20 { border-color: rgb(255 255 255 / 0.2); }
    .border-blue-400\/30 { border-color: rgb(96 165 250 / 0.3); }
    .border-purple-400\/30 { border-color: rgb(192 132 252 / 0.3); }
    .border-green-400\/30 { border-color: rgb(74 222 128 / 0.3); }
    .border-green-400\/50 { border-color: rgb(74 222 128 / 0.5); }
    .border-amber-400\/30 { border-color: rgb(251 191 36 / 0.3); }
    .border-pink-400\/30 { border-color: rgb(244 114 182 / 0.3); }
    .border-emerald-400\/30 { border-color: rgb(52 211 153 / 0.3); }
    .border-red-400\/30 { border-color: rgb(248 113 113 / 0.3); }
    
    .rounded { border-radius: 0.25rem; }
    .rounded-t { border-radius: 0.25rem 0.25rem 0 0; }
    .rounded-lg { border-radius: 0.5rem; }
    .rounded-xl { border-radius: 0.75rem; }
    .rounded-2xl { border-radius: 1rem; }
    .rounded-full { border-radius: 9999px; }
    
    .shadow { box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1); }
    .shadow-sm { box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); }
    .shadow-lg { box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); }
    
    button { cursor: pointer; border: none; background: none; font-family: inherit; }
    button:disabled { cursor: not-allowed; opacity: 0.5; }
    
    .object-contain { object-fit: contain; }
    .transition-colors { transition: color 0.15s, background-color 0.15s, border-color 0.15s; }
    
    /* Code styling */
    code {
      font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
      background-color: #fef3c7;
      color: #92400e;
      padding: 0.125rem 0.25rem;
      border-radius: 0.25rem;
      font-size: 0.875em;
    }
    
    pre { margin: 0; white-space: pre-wrap; word-break: break-word; }
    
    .bg-slate-800 .text-gray-500,
    .bg-slate-800 .text-slate-500 { color: #94a3b8; }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SLIDE CONTAINER
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .slide-container {
      height: 100vh;
      display: flex;
      flex-direction: column;
      background: var(--gray-100);
    }
    
    .slide-header {
      background: var(--purdue-black);
      color: white;
      padding: 0.5rem 1rem;
      flex-shrink: 0;
    }
    
    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    
    .header-title {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .header-title .purdue { font-weight: 700; font-size: 1.125rem; }
    .header-title .course { color: var(--purdue-gold); font-size: 1rem; }
    
    .header-slide-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .slide-counter {
      color: var(--purdue-gold);
      font-family: monospace;
      font-size: 1rem;
    }
    
    .current-section {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(206, 184, 136, 0.2);
      padding: 0.25rem 0.75rem;
      border-radius: 0.375rem;
    }
    
    .current-section .icon { font-size: 1rem; }
    .current-section .name { color: var(--purdue-gold); font-size: 0.875rem; }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PROGRESS BAR - ACCESSIBLE VERSION
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .progress-container {
      position: relative;
      width: 100%;
      padding: 0.5rem 0;
    }

    .section-labels {
      display: flex;
      margin-bottom: 0.5rem;
    }

    .section-label {
      text-align: center;
      font-size: 0.75rem;
      font-weight: 600;
      padding: 0.25rem;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      transition: all 0.3s ease;
      cursor: pointer;
      border-radius: 0.25rem;
    }

    .section-label.active { color: #fcd34d; }
    .section-label.completed { color: #86efac; }
    .section-label.future { color: #94a3b8; }
    .section-label:hover { 
      color: var(--purdue-gold); 
      background: rgba(255,255,255,0.1);
    }

    .progress-sections {
      display: flex;
      gap: 4px;
      height: 20px;
      align-items: flex-end;
    }

    .section-group {
      display: flex;
      gap: 1px;
      border-radius: 3px;
      overflow: hidden;
      transition: all 0.3s ease;
      position: relative;
    }

    .section-group.active {
      box-shadow: 0 0 0 2px var(--amber-400), 0 0 12px rgba(251, 191, 36, 0.4);
    }

    .slide-bar {
      min-width: 6px;
      flex: 1;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
      position: relative;
    }

    .slide-bar.current {
      height: 18px;
      background: linear-gradient(180deg, #ffffff 0%, #e2e8f0 100%);
      box-shadow: 0 0 8px rgba(255, 255, 255, 0.8), 0 0 20px rgba(251, 191, 36, 0.5);
      border-radius: 2px;
      z-index: 5;
    }

    .slide-bar.active-past { height: 14px; background: linear-gradient(180deg, var(--amber-400) 0%, var(--amber-600) 100%); }
    .slide-bar.active-past:hover, .slide-bar.active-past:focus { height: 16px; background: linear-gradient(180deg, #fcd34d 0%, var(--amber-500) 100%); }
    .slide-bar.active-future { height: 10px; background: linear-gradient(180deg, var(--amber-700) 0%, var(--amber-800) 100%); }
    .slide-bar.active-future:hover, .slide-bar.active-future:focus { height: 14px; background: linear-gradient(180deg, var(--amber-500) 0%, var(--amber-600) 100%); }
    .slide-bar.completed { height: 12px; background: linear-gradient(180deg, var(--green-400) 0%, var(--emerald-600) 100%); }
    .slide-bar.completed:hover, .slide-bar.completed:focus { height: 14px; background: linear-gradient(180deg, #86efac 0%, var(--emerald-500) 100%); }
    .slide-bar.future { height: 8px; background: linear-gradient(180deg, var(--slate-500) 0%, var(--slate-600) 100%); }
    .slide-bar.future:hover, .slide-bar.future:focus { height: 12px; background: linear-gradient(180deg, var(--slate-400) 0%, var(--slate-500) 100%); }

    .slide-bar::before {
      content: attr(data-tooltip);
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%) scale(0.8);
      background: var(--slate-900);
      color: white;
      padding: 0.375rem 0.625rem;
      border-radius: 0.25rem;
      font-size: 0.75rem;
      white-space: nowrap;
      opacity: 0;
      transition: all 0.15s ease;
      pointer-events: none;
      z-index: 30;
    }

    .slide-bar:hover::before, .slide-bar:focus::before {
      opacity: 1;
      transform: translateX(-50%) scale(1);
    }

    .current-indicator {
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 6px;
      height: 6px;
      background: var(--amber-400);
      border-radius: 50%;
      box-shadow: 0 0 8px var(--amber-400);
      animation: bounce 1s ease-in-out infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateX(-50%) translateY(0); }
      50% { transform: translateX(-50%) translateY(-3px); }
    }

    .section-progress-text {
      position: absolute;
      top: -18px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.65rem;
      font-weight: 700;
      color: #fcd34d;
      white-space: nowrap;
      opacity: 0;
      transition: opacity 0.2s;
    }

    .section-group.active .section-progress-text { opacity: 1; }

    .progress-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.5rem;
      font-size: 0.75rem;
    }

    .progress-counter {
      font-family: monospace;
      font-weight: 700;
      color: #fcd34d;
      background: var(--slate-800);
      padding: 0.25rem 0.625rem;
      border-radius: 0.25rem;
    }

    .progress-legend {
      display: flex;
      gap: 1rem;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      color: #cbd5e1;
      font-size: 0.75rem;
    }

    .legend-bar { width: 12px; border-radius: 2px; }
    .legend-bar.completed { height: 10px; background: var(--green-400); }
    .legend-bar.active { height: 12px; background: var(--amber-400); }
    .legend-bar.current { height: 14px; background: white; box-shadow: 0 0 4px rgba(255,255,255,0.5); }
    .legend-bar.future { height: 6px; background: var(--slate-500); }
    
    /* Slide Content */
    .slide-content {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
      display: flex;
      justify-content: center;
    }
    
    .slide-wrapper {
      width: 100%;
      max-width: 1400px;
      border-radius: 0.75rem;
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
      padding: 2rem 2.5rem;
      min-height: calc(100vh - 180px);
      display: flex;
      flex-direction: column;
    }

    /* Default slide background */
    .slide-wrapper > *:first-child {
      background-color: white;
    }

    /* Let dark slides override */
    .slide-wrapper > *:first-child[class*="bg-gradient"],
    .slide-wrapper > *:first-child[class*="bg-gray-900"],
    .slide-wrapper > *:first-child[class*="bg-slate-900"],
    .slide-wrapper > *:first-child[class*="bg-black"] {
      background-color: transparent;
    }
    
    /* Navigation - Accessible */
    .slide-nav {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      display: flex;
      gap: 0.5rem;
      background: rgba(0, 0, 0, 0.95);
      padding: 0.75rem;
      border-radius: 0.75rem;
      z-index: 100;
    }
    
    .slide-nav button {
      width: 3rem;
      height: 3rem;
      border-radius: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.25rem;
      transition: background 0.2s;
      min-width: 44px;
      min-height: 44px;
    }
    
    .slide-nav button:hover:not(:disabled),
    .slide-nav button:focus:not(:disabled) { 
      background: var(--gray-700); 
    }

    .nav-divider {
      width: 1px;
      height: 2.5rem;
      background: var(--gray-600);
      align-self: center;
    }
    
    /* Help Modal */
    .help-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    
    .help-content {
      background: white;
      border-radius: 1rem;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .help-content h2 { margin-bottom: 1.5rem; }
    
    .help-grid {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 0.75rem 1rem;
      font-size: 1rem;
      align-items: center;
    }
    
    .help-key {
      font-family: monospace;
      background: var(--gray-100);
      padding: 0.375rem 0.75rem;
      border-radius: 0.375rem;
      font-size: 0.875rem;
      font-weight: 500;
    }
    
    .help-close-btn {
      margin-top: 1.5rem;
      width: 100%;
      background: var(--gray-900);
      color: white;
      padding: 0.875rem;
      border-radius: 0.5rem;
      font-size: 1rem;
      font-weight: 500;
      min-height: 44px;
    }
    
    .help-close-btn:hover, .help-close-btn:focus { background: var(--gray-700); }
    
    /* Overview Mode */
    .overview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1rem;
      padding: 1rem;
      overflow-y: auto;
      height: 100vh;
      background: var(--slate-800);
    }
    
    .overview-header {
      grid-column: 1 / -1;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .overview-header h2 { color: white; }
    
    .overview-close-btn {
      background: var(--purdue-gold);
      color: black;
      padding: 0.625rem 1.5rem;
      border-radius: 0.5rem;
      font-weight: 500;
      font-size: 1rem;
      min-height: 44px;
    }
    
    .overview-close-btn:hover, .overview-close-btn:focus { background: #d4c088; }
    
    .overview-card {
      background: white;
      border-radius: 0.5rem;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      aspect-ratio: 16/10;
      position: relative;
    }
    
    .overview-card:hover, .overview-card:focus {
      transform: scale(1.02);
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }
    
    .overview-card.current { box-shadow: 0 0 0 4px var(--purdue-gold); }
    
    .overview-card-content {
      padding: 0.5rem;
      height: 100%;
      overflow: hidden;
      transform: scale(0.32);
      transform-origin: top left;
      width: 312%;
      height: 312%;
      pointer-events: none;
    }
    
    .overview-label {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0,0,0,0.9);
      color: white;
      padding: 0.625rem 0.875rem;
      font-size: 0.875rem;
    }
    
    .overview-label .num {
      font-family: monospace;
      color: var(--purdue-gold);
      margin-right: 0.5rem;
      font-weight: 600;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ACCESSIBILITY: HIGH CONTRAST MODE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media (forced-colors: active) {
      .slide-bar { border: 1px solid currentColor; }
      .slide-bar.current { border: 2px solid Highlight; }
      .overview-card.current { border: 3px solid Highlight; }
      .skip-link:focus { outline: 3px solid Highlight; }
    }
    
    @media (max-width: 1024px) {
      .slide-wrapper { padding: 1.5rem; }
      .section-labels { display: none; }
      .grid-cols-5 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }
    
    @media (max-width: 768px) {
      .slide-wrapper { padding: 1rem; min-height: auto; }
      .grid-cols-2, .grid-cols-3, .grid-cols-4, .grid-cols-5 { grid-template-columns: 1fr; }
      .slide-nav button { width: 3.5rem; height: 3.5rem; }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <script type="text/babel">
    const { useState, useEffect, useRef, useCallback, useMemo } = React;

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // LATEX COMPONENT
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const Latex = React.memo(({ math, display = false }) => {
      const ref = useRef(null);
      useEffect(() => {
        if (ref.current && math) {
          try {
            katex.render(math, ref.current, { displayMode: display, throwOnError: false, trust: true, strict: false });
          } catch (e) { ref.current.textContent = math; }
        }
      }, [math, display]);
      return <span ref={ref} aria-label={`Math: ${math}`} />;
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ACCESSIBILITY: LIVE REGION ANNOUNCER
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function LiveAnnouncer({ message, priority = 'polite' }) {
      return (
        <div 
          role="status" 
          aria-live={priority} 
          aria-atomic="true"
          className="sr-only"
        >
          {message}
        </div>
      );
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ACCESSIBILITY: FOCUS TRAP FOR MODALS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function useFocusTrap(isActive, containerRef) {
      useEffect(() => {
        if (!isActive || !containerRef.current) return;
        
        const container = containerRef.current;
        const focusableElements = container.querySelectorAll(
          'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        const firstElement = focusableElements[0];
        const lastElement = focusableElements[focusableElements.length - 1];
        
        firstElement?.focus();
        
        const handleKeyDown = (e) => {
          if (e.key !== 'Tab') return;
          
          if (e.shiftKey) {
            if (document.activeElement === firstElement) {
              e.preventDefault();
              lastElement?.focus();
            }
          } else {
            if (document.activeElement === lastElement) {
              e.preventDefault();
              firstElement?.focus();
            }
          }
        };
        
        container.addEventListener('keydown', handleKeyDown);
        return () => container.removeEventListener('keydown', handleKeyDown);
      }, [isActive, containerRef]);
    }


    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // SECTIONS CONFIG - Paste this into the 'sections' array in your template
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const sections = [
      { id: '2.1', name: 'Monte Carlo Fundamentals', startSlide: 1, icon: 'ğŸ²', shortName: 'MC Fundamentals' },
      { id: '2.2', name: 'Uniform Random Variates', startSlide: 13, icon: 'ğŸ¯', shortName: 'Uniform' },
      { id: '2.3', name: 'Inverse CDF Method', startSlide: 24, icon: 'â†©ï¸', shortName: 'Inverse CDF' },
      { id: '2.4', name: 'Transformation Methods', startSlide: 40, icon: 'ğŸ”„', shortName: 'Transform' },
      { id: '2.5', name: 'Rejection Sampling', startSlide: 51, icon: 'ğŸ¯', shortName: 'Rejection' },
      { id: '2.6', name: 'Variance Reduction', startSlide: 64, icon: 'ğŸ“‰', shortName: 'Variance Red.' },
      { id: '2.7', name: 'Chapter Summary', startSlide: 82, icon: 'ğŸ', shortName: 'Summary' },
    ];

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // SLIDES REGISTRY - Paste this into the 'slides' array in your template
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const slides = [
      { id: 1, title: 'Ch2 Hero', component: Slide01_Ch2Hero },
      { id: 2, title: 'Historical Origins', component: Slide02_HistoricalOrigins },
      { id: 3, title: 'Buffon Setup', component: Slide03_BuffonSetup },
      { id: 4, title: 'Buffon Derivation', component: Slide04_BuffonDerivation },
      { id: 5, title: 'Monte Carlo Idea', component: Slide05_MonteCarloIdea },
      { id: 6, title: 'MC Estimator', component: Slide06_MCEstimator },
      { id: 7, title: 'LLN_CLT', component: Slide07_LLN_CLT },
      { id: 8, title: 'Dimension Independence', component: Slide08_DimensionIndependence },
      { id: 9, title: 'Confidence Intervals', component: Slide09_ConfidenceIntervals },
      { id: 10, title: 'Diagnostics', component: Slide10_Diagnostics },
      { id: 11, title: 'Applications', component: Slide11_Applications },
      { id: 12, title: 'Summary', component: Slide12_Summary },
      { id: 13, title: 'Uniform Hero', component: Slide13_UniformHero },
      { id: 14, title: 'Why Uniform', component: Slide14_WhyUniform },
      { id: 15, title: 'PRNG Paradox', component: Slide15_PRNGParadox },
      { id: 16, title: 'Middle Square', component: Slide16_MiddleSquare },
      { id: 17, title: 'Chaos Randomness', component: Slide17_ChaosRandomness },
      { id: 18, title: 'LCG', component: Slide18_LCG },
      { id: 19, title: 'LCG Theory', component: Slide19_LCGTheory },
      { id: 20, title: 'Modern PRN Gs', component: Slide20_ModernPRNGs },
      { id: 21, title: 'Statistical Testing', component: Slide21_StatisticalTesting },
      { id: 22, title: 'Seeds And Parallel Streams', component: Slide22_SeedsAndParallelStreams },
      { id: 23, title: 'Uniform Summary', component: Slide23_UniformSummary },
      { id: 24, title: 'Inverse CDF Hero', component: Slide24_InverseCDFHero },
      { id: 25, title: 'CDF', component: Slide25_CDF },
      { id: 26, title: 'Generalized Inverse', component: Slide26_GeneralizedInverse },
      { id: 27, title: 'PIT', component: Slide27_PIT },
      { id: 28, title: 'Geometric Intuition', component: Slide28_GeometricIntuition },
      { id: 29, title: 'Exponential', component: Slide29_Exponential },
      { id: 30, title: 'More Continuous', component: Slide30_MoreContinuous },
      { id: 31, title: 'Numerical Precision', component: Slide31_NumericalPrecision },
      { id: 32, title: 'Discrete Overview', component: Slide32_DiscreteOverview },
      { id: 33, title: 'Linear Scan', component: Slide33_LinearScan },
      { id: 34, title: 'Binary Search', component: Slide34_BinarySearch },
      { id: 35, title: 'Exponential Doubling', component: Slide35_ExponentialDoubling },
      { id: 36, title: 'Interpolation Search', component: Slide36_InterpolationSearch },
      { id: 37, title: 'Alias Method', component: Slide37_AliasMethod },
      { id: 38, title: 'Method Comparison', component: Slide38_MethodComparison },
      { id: 39, title: 'Section Summary', component: Slide39_SectionSummary },
      { id: 40, title: 'Transform Hero', component: Slide40_TransformHero },
      { id: 41, title: 'Why Transform', component: Slide41_WhyTransform },
      { id: 42, title: 'Normal Challenge', component: Slide42_NormalChallenge },
      { id: 43, title: 'Box Muller', component: Slide43_BoxMuller },
      { id: 44, title: 'Box Muller Implementation', component: Slide44_BoxMullerImplementation },
      { id: 45, title: 'Marsaglia Polar', component: Slide45_MarsagliaPolar },
      { id: 46, title: 'Ziggurat', component: Slide46_Ziggurat },
      { id: 47, title: 'Derived Distributions', component: Slide47_DerivedDistributions },
      { id: 48, title: 'MVN Theory', component: Slide48_MVNTheory },
      { id: 49, title: 'MVN Cholesky', component: Slide49_MVNCholesky },
      { id: 50, title: 'Transform Summary', component: Slide50_TransformSummary },
      { id: 51, title: 'Rejection Hero', component: Slide51_RejectionHero },
      { id: 52, title: 'When All Else Fails', component: Slide52_WhenAllElseFails },
      { id: 53, title: 'Fundamental Theorem', component: Slide53_FundamentalTheorem },
      { id: 54, title: 'Envelope Strategy', component: Slide54_EnvelopeStrategy },
      { id: 55, title: 'Accept Reject Algorithm', component: Slide55_AcceptRejectAlgorithm },
      { id: 56, title: 'Correctness Proof', component: Slide56_CorrectnessProof },
      { id: 57, title: 'Acceptance Probability', component: Slide57_AcceptanceProbability },
      { id: 58, title: 'Choosing Proposal', component: Slide58_ChoosingProposal },
      { id: 59, title: 'Finding M', component: Slide59_FindingM },
      { id: 60, title: 'Truncated Normal', component: Slide60_TruncatedNormal },
      { id: 61, title: 'Efficiency Analysis', component: Slide61_EfficiencyAnalysis },
      { id: 62, title: 'High Dimensional Failure', component: Slide62_HighDimensionalFailure },
      { id: 63, title: 'Rejection Summary', component: Slide63_RejectionSummary },
      { id: 64, title: 'Variance Reduction Hero', component: Slide64_VarianceReductionHero },
      { id: 65, title: 'Variance Problem', component: Slide65_VarianceProblem },
      { id: 66, title: 'Methods Overview', component: Slide66_MethodsOverview },
      { id: 67, title: 'IS Core Idea', component: Slide67_ISCoreIdea },
      { id: 68, title: 'IS Estimator', component: Slide68_ISEstimator },
      { id: 69, title: 'IS Optimal', component: Slide69_ISOptimal },
      { id: 70, title: 'IS Effective Sample Size', component: Slide70_ISEffectiveSampleSize },
      { id: 71, title: 'Slide70 b_IS Failure Modes', component: Slide70b_ISFailureModes },
      { id: 72, title: 'Slide70 c_IS Proposal Selection', component: Slide70c_ISProposalSelection },
      { id: 73, title: 'IS Rare Event', component: Slide71_ISRareEvent },
      { id: 74, title: 'Control Variates', component: Slide72_ControlVariates },
      { id: 75, title: 'CV Optimal', component: Slide73_CVOptimal },
      { id: 76, title: 'CV Example', component: Slide74_CVExample },
      { id: 77, title: 'Antithetic Variates', component: Slide75_AntitheticVariates },
      { id: 78, title: 'Stratified Sampling', component: Slide76_StratifiedSampling },
      { id: 79, title: 'Latin Hypercube', component: Slide77_LatinHypercube },
      { id: 80, title: 'CRN Combining', component: Slide78_CRNCombining },
      { id: 81, title: 'VR Summary', component: Slide79_VRSummary },
      { id: 82, title: 'Chapter Summary', component: Slide80_ChapterSummary },
    ];

// ===========================================================================
// SLIDE COMPONENT DEFINITIONS - Paste these ABOVE the slides array
// ===========================================================================

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                           SLIDE 01: CH2 HERO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide01_Ch2Hero() {
  return (
    <div className="flex flex-col h-full -mt-3">
          {/* Header */}
          <div className="text-center mb-1">
            <h1 className="text-2xl font-bold text-gray-900">Chapter 2: Monte Carlo Simulation</h1>
            <p className="text-sm text-gray-600">Harnessing Randomness as a Computational Tool</p>
          </div>
    
          {/* Core equation + Why integrals matter side by side */}
          <div className="grid grid-cols-5 gap-2 mb-2">
            {/* Central equation - left columns */}
            <div className="col-span-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-2 border border-blue-200">
              <p className="text-xs font-bold text-gray-700 mb-1 text-center">The Core Insight</p>
              <div className="bg-white rounded p-2 text-center">
                <Latex math="\underbrace{\int_{\mathcal{X}} g(x) \, dx}_{\text{Hard integral}} \;=\; \underbrace{\mathbb{E}_f[h(X)]}_{\text{Expectation}} \;\approx\; \underbrace{\frac{1}{n}\sum_{i=1}^{n} h(X_i)}_{\text{Sample average}}" display={true} />
              </div>
              <p className="text-xs text-gray-600 mt-1 italic text-center">Transform intractable integrals into simple averages</p>
            </div>
    
            {/* Why integrals matter - right column */}
            <div className="col-span-2 bg-amber-50 rounded-lg p-2 border border-amber-200">
              <p className="text-xs font-bold text-amber-800 mb-1">Why Integrals Are Everywhere</p>
              <div className="text-xs text-amber-700 space-y-0.5">
                <p>â€¢ <strong>Expectations</strong>: <Latex math="\mathbb{E}[g(X)]" /> = integral</p>
                <p>â€¢ <strong>Posteriors</strong>: <Latex math="\mathbb{E}[\theta|\text{data}]" /></p>
                <p>â€¢ <strong>Predictions</strong>: <Latex math="p(y_{\text{new}}|\text{data})" /></p>
                <p>â€¢ <strong>Model evidence</strong>: <Latex math="p(\text{data})" /></p>
                <p>â€¢ <strong>Normalizing constants</strong></p>
              </div>
              <p className="text-xs text-amber-800 mt-1 italic">High-D integrals: analytically impossible</p>
            </div>
          </div>
    
          {/* Four pillars - expanded */}
          <div className="grid grid-cols-4 gap-2 mb-2 flex-1">
            <div className="bg-blue-50 rounded-lg p-2 border border-blue-200 flex flex-col">
              <div className="text-xl mb-0.5 text-center">ğŸ²</div>
              <div className="font-bold text-blue-800 text-xs text-center">MC Integration</div>
              <div className="text-xs text-blue-700 mt-1 flex-1">
                <p>â€¢ Estimate integrals via sampling</p>
                <p>â€¢ LLN guarantees convergence</p>
                <p>â€¢ CLT gives error bounds</p>
              </div>
            </div>
            <div className="bg-green-50 rounded-lg p-2 border border-green-200 flex flex-col">
              <div className="text-xl mb-0.5 text-center">ğŸ”¢</div>
              <div className="font-bold text-green-800 text-xs text-center">PRNGs</div>
              <div className="text-xs text-green-700 mt-1 flex-1">
                <p>â€¢ Deterministic yet "random"</p>
                <p>â€¢ LCGs, Mersenne Twister</p>
                <p>â€¢ Statistical quality tests</p>
              </div>
            </div>
            <div className="bg-purple-50 rounded-lg p-2 border border-purple-200 flex flex-col">
              <div className="text-xl mb-0.5 text-center">ğŸ”„</div>
              <div className="font-bold text-purple-800 text-xs text-center">Sampling Methods</div>
              <div className="text-xs text-purple-700 mt-1 flex-1">
                <p>â€¢ Inverse CDF method</p>
                <p>â€¢ Box-Muller transform</p>
                <p>â€¢ Rejection sampling</p>
              </div>
            </div>
            <div className="bg-amber-50 rounded-lg p-2 border border-amber-200 flex flex-col">
              <div className="text-xl mb-0.5 text-center">ğŸ“‰</div>
              <div className="font-bold text-amber-800 text-xs text-center">Variance Reduction</div>
              <div className="text-xs text-amber-700 mt-1 flex-1">
                <p>â€¢ Importance sampling</p>
                <p>â€¢ Control variates</p>
                <p>â€¢ Antithetic variates</p>
              </div>
            </div>
          </div>
    
          {/* Key properties row */}
          <div className="grid grid-cols-3 gap-2 flex-shrink-0">
            <div className="bg-gray-100 rounded-lg p-1.5 text-center">
              <div className="font-bold text-gray-800 text-xs">Convergence Rate</div>
              <div className="text-base"><Latex math="O(n^{-1/2})" /></div>
              <div className="text-xs text-gray-600">Error halves when n quadruples</div>
            </div>
            <div className="bg-gray-100 rounded-lg p-1.5 text-center">
              <div className="font-bold text-gray-800 text-xs">Dimension: Rate vs Reality</div>
              <div className="text-base"><Latex math="O(n^{-1/2})" /> âœ“</div>
              <div className="text-xs text-gray-600">Rate stable, but variance grows</div>
            </div>
            <div className="bg-gray-100 rounded-lg p-1.5 text-center">
              <div className="font-bold text-gray-800 text-xs">Foundation</div>
              <div className="text-base">LLN + CLT</div>
              <div className="text-xs text-gray-600">Ch.1 limit theorems at work</div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                      SLIDE 02: HISTORICAL ORIGINS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const timelineUrl_slide02 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/mc_timeline.png";
function Slide02_HistoricalOrigins() {
  return (
    <div className="flex flex-col h-full -mt-3">
          <h1 className="text-xl font-bold text-gray-900 mb-0">Historical Origins of Monte Carlo</h1>
          <p className="text-gray-600 text-xs mb-1">From solitaire to nuclear physics (1946)</p>
    
          {/* Main story - two columns */}
          <div className="grid grid-cols-2 gap-2 mb-1.5 flex-shrink-0">
            {/* Ulam's insight */}
            <div className="bg-blue-50 rounded-lg p-2 border border-blue-200">
              <div className="flex items-center gap-1.5 mb-1">
                <span className="text-lg">ğŸƒ</span>
                <span className="font-bold text-blue-800 text-sm">Ulam's Solitaire Insight</span>
              </div>
              <p className="text-xs text-blue-700 mb-1">Spring 1946: Recovering from encephalitis, playing Canfield solitaire...</p>
              <div className="bg-white rounded p-1.5 text-xs">
                <p className="italic text-gray-700">"What is P(winning)?"</p>
                <p className="text-gray-600">Combinatorics: intractable</p>
                <p className="text-blue-700 font-semibold">â†’ Play 100 games, count wins!</p>
              </div>
            </div>
    
            {/* The key realization */}
            <div className="bg-purple-50 rounded-lg p-2 border border-purple-200">
              <div className="flex items-center gap-1.5 mb-1">
                <span className="text-lg">ğŸ’¡</span>
                <span className="font-bold text-purple-800 text-sm">The Revolutionary Insight</span>
              </div>
              <div className="bg-white rounded p-1.5 mb-1 text-center">
                <p className="text-xs text-gray-700"><strong>Estimate</strong> what you <strong>cannot compute</strong></p>
                <p className="text-xs mt-1">Analytical solution â†’ Random experiments</p>
              </div>
              <p className="text-xs text-purple-700">ENIAC (1945): 5,000 ops/sec â†’ millions of "games"</p>
            </div>
          </div>
    
          {/* Los Alamos + Key Players row */}
          <div className="grid grid-cols-5 gap-1.5 mb-1.5 flex-shrink-0">
            <div className="bg-amber-50 rounded-lg p-1.5 border border-amber-200 text-center">
              <div className="text-lg">âš›ï¸</div>
              <div className="font-semibold text-amber-800 text-xs">Problem</div>
              <div className="text-xs text-amber-700">Neutron transport</div>
            </div>
            <div className="bg-gray-100 rounded-lg p-1.5 text-center">
              <div className="font-semibold text-gray-800 text-xs">Ulam</div>
              <div className="text-xs text-gray-600">Core insight</div>
            </div>
            <div className="bg-gray-100 rounded-lg p-1.5 text-center">
              <div className="font-semibold text-gray-800 text-xs">von Neumann</div>
              <div className="text-xs text-gray-600">Implementation</div>
            </div>
            <div className="bg-gray-100 rounded-lg p-1.5 text-center">
              <div className="font-semibold text-gray-800 text-xs">Metropolis</div>
              <div className="text-xs text-gray-600">Named it</div>
            </div>
            <div className="bg-gray-100 rounded-lg p-1.5 text-center">
              <div className="font-semibold text-gray-800 text-xs">Fermi</div>
              <div className="text-xs text-gray-600">Precursor</div>
            </div>
          </div>
    
          {/* Timeline image - fixed height */}
          <div className="h-140 bg-white rounded-lg border border-gray-200 p-1">
            <img 
              src={timelineUrl_slide02} 
              alt="Timeline of Monte Carlo methods from Buffon (1777) through MCMC to modern neural-enhanced methods (2020s)"
              className="w-full h-full object-contain"
            />
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 03: BUFFON SETUP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const buffonImageUrl_slide03 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_1_fig01_buffon_geometry.png";
function Slide03_BuffonSetup() {
  return (
    <div className="flex flex-col h-full -mt-3">
          <div className="flex items-center justify-between mb-1">
            <div>
              <h1 className="text-xl font-bold text-gray-900">Buffon's Needle: Problem Setup</h1>
              <p className="text-gray-600 text-xs">The first Monte Carlo experiment (1777)</p>
            </div>
            <a href="https://treese41528.github.io/ComputationalDataScience/Simulations/MonteCarloSimulation/buffons_needle_simulation.html" 
               target="_blank" 
               rel="noopener noreferrer"
               className="bg-cyan-500 hover:bg-cyan-600 text-white text-xs px-2 py-1 rounded flex items-center gap-1">
              ğŸ–¥ï¸ Live Sim
            </a>
          </div>
    
          {/* Top row: Setup and Random Variables */}
          <div className="grid grid-cols-2 gap-2 mb-1.5 flex-shrink-0">
            {/* Problem statement */}
            <div className="bg-blue-50 rounded-lg p-2 border border-blue-200">
              <p className="font-semibold text-blue-800 text-xs mb-1">Physical Setup</p>
              <ul className="text-xs text-blue-700 space-y-0.5">
                <li>â€¢ Floor of parallel planks, width <Latex math="d" /></li>
                <li>â€¢ Needle of length <Latex math="\ell \leq d" /></li>
                <li>â€¢ Drop needle randomly</li>
              </ul>
              <p className="text-xs font-semibold text-blue-800 mt-1">Find: <Latex math="P(\text{crosses crack})" /></p>
            </div>
    
            {/* Random variables */}
            <div className="bg-purple-50 rounded-lg p-2 border border-purple-200">
              <p className="font-semibold text-purple-800 text-xs mb-1">Probabilistic Model</p>
              <div className="space-y-1">
                <div className="bg-white rounded p-1 text-xs">
                  <Latex math="\theta \sim \text{Uniform}[0, \pi)" /> â€” angle
                </div>
                <div className="bg-white rounded p-1 text-xs">
                  <Latex math="y \sim \text{Uniform}[0, d/2]" /> â€” dist to crack
                </div>
              </div>
            </div>
          </div>
    
          {/* Crossing condition - compact */}
          <div className="bg-gradient-to-r from-green-50 to-teal-50 rounded-lg p-2 mb-1.5 border border-green-200 flex-shrink-0">
            <p className="font-semibold text-green-800 text-xs mb-1">The Crossing Condition</p>
            <div className="flex items-center justify-center gap-2">
              <div className="bg-white rounded p-1.5 text-center">
                <p className="text-xs text-gray-500">Vertical projection</p>
                <Latex math="\frac{\ell}{2}\sin\theta" />
              </div>
              <span className="text-green-600 font-bold">â‰¥</span>
              <div className="bg-white rounded p-1.5 text-center">
                <p className="text-xs text-gray-500">Distance to crack</p>
                <Latex math="y" />
              </div>
              <span className="text-gray-400 mx-2">âŸ¹</span>
              <div className="bg-white rounded p-1.5 border-2 border-green-300">
                <Latex math="y \leq \frac{\ell}{2}\sin\theta" />
              </div>
            </div>
          </div>
    
          {/* Geometry figure - fills remaining space */}
          <div className="flex-1 min-h-0 bg-white rounded-lg border border-gray-200 p-1">
            <img 
              src={buffonImageUrl_slide03} 
              alt="Buffon's needle geometry: Left shows physical setup, middle shows crossing geometry with angle theta and distance y, right shows probability space"
              className="w-full h-full object-contain"
            />
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 04: BUFFON DERIVATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide04_BuffonDerivation() {
  return (
    <div className="flex flex-col h-full -mt-3">
          <div className="flex items-center justify-between mb-1">
            <div>
              <h1 className="text-xl font-bold text-gray-900">Buffon's Needle: The Derivation</h1>
              <p className="text-gray-600 text-xs">Computing P(crossing) via double integration</p>
            </div>
            <a href="https://treese41528.github.io/ComputationalDataScience/Simulations/MonteCarloSimulation/buffons_needle_simulation.html" 
               target="_blank" 
               rel="noopener noreferrer"
               className="bg-cyan-500 hover:bg-cyan-600 text-white text-xs px-2 py-1 rounded flex items-center gap-1">
              ğŸ–¥ï¸ Live Sim
            </a>
          </div>
    
          {/* Step 1: Joint density */}
          <div className="bg-blue-50 rounded-lg p-1.5 mb-1.5 border border-blue-200 flex-shrink-0">
            <div className="flex items-center gap-2">
              <span className="bg-blue-200 text-blue-800 text-xs font-bold px-1.5 py-0.5 rounded">1</span>
              <span className="text-xs font-semibold text-blue-800">Joint Density (Independent Uniforms)</span>
            </div>
            <div className="flex items-center justify-center gap-4 mt-1">
              <div className="text-xs text-center">
                <Latex math="f_\theta(\theta) = \begin{cases} \frac{1}{\pi} & 0 \leq \theta < \pi \\ 0 & \text{otherwise} \end{cases}" />
              </div>
              <div className="text-xs text-center">
                <Latex math="f_y(y) = \begin{cases} \frac{2}{d} & 0 \leq y \leq \frac{d}{2} \\ 0 & \text{otherwise} \end{cases}" />
              </div>
            </div>
            <div className="flex justify-center mt-1.5">
              <div className="bg-white rounded px-3 py-1">
                <Latex math="f(\theta,y) = f_\theta(\theta) \cdot f_y(y) = \begin{cases} \frac{2}{\pi d} & 0 \leq \theta < \pi,\; 0 \leq y \leq \frac{d}{2} \\ 0 & \text{otherwise} \end{cases}" />
              </div>
            </div>
          </div>
    
          {/* Step 2: The integral */}
          <div className="bg-purple-50 rounded-lg p-1.5 mb-1.5 border border-purple-200 flex-shrink-0">
            <div className="flex items-center gap-2 mb-1">
              <span className="bg-purple-200 text-purple-800 text-xs font-bold px-1.5 py-0.5 rounded">2</span>
              <span className="text-xs font-semibold text-purple-800">Integrate Over Crossing Region</span>
            </div>
            <div className="bg-white rounded p-1.5 text-center">
              <Latex math="P(\text{cross}) = \int_0^{\pi} \int_0^{(\ell/2)\sin\theta} \frac{2}{\pi d} \, dy \, d\theta" display={true} />
            </div>
          </div>
    
          {/* Step 3: Evaluate - side by side */}
          <div className="grid grid-cols-2 gap-1.5 mb-1.5 flex-shrink-0">
            <div className="bg-green-50 rounded-lg p-1.5 border border-green-200">
              <div className="flex items-center gap-1 mb-1">
                <span className="bg-green-200 text-green-800 text-xs font-bold px-1.5 py-0.5 rounded">3a</span>
                <span className="text-xs font-semibold text-green-800">Inner (over y)</span>
              </div>
              <div className="bg-white rounded p-1 text-center">
                <Latex math="\int_0^{(\ell/2)\sin\theta} dy = \frac{\ell}{2}\sin\theta" display={true} />
              </div>
            </div>
            <div className="bg-teal-50 rounded-lg p-1.5 border border-teal-200">
              <div className="flex items-center gap-1 mb-1">
                <span className="bg-teal-200 text-teal-800 text-xs font-bold px-1.5 py-0.5 rounded">3b</span>
                <span className="text-xs font-semibold text-teal-800">Outer (over theta)</span>
              </div>
              <div className="bg-white rounded p-1 text-center">
                <Latex math="\int_0^{\pi} \sin\theta \, d\theta = 2" display={true} />
              </div>
            </div>
          </div>
    
          {/* Step 4: Final result */}
          <div className="bg-amber-50 rounded-lg p-1.5 mb-1.5 border border-amber-200 flex-shrink-0">
            <div className="flex items-center gap-2 mb-1">
              <span className="bg-amber-200 text-amber-800 text-xs font-bold px-1.5 py-0.5 rounded">4</span>
              <span className="text-xs font-semibold text-amber-800">Combine</span>
            </div>
            <div className="bg-white rounded p-1.5 text-center">
              <Latex math="P(\text{cross}) = \frac{2}{\pi d} \cdot \frac{\ell}{2} \cdot 2 = \boxed{\frac{2\ell}{\pi d}}" display={true} />
            </div>
          </div>
    
          {/* The remarkable consequence - fills remaining */}
          <div className="bg-gradient-to-r from-red-50 to-pink-50 rounded-lg p-2 border border-red-200 flex-1">
            <p className="font-semibold text-red-800 text-sm mb-1">ğŸ¯ Estimating pi from Random Experiments</p>
            <div className="grid grid-cols-2 gap-2">
              <div className="bg-white rounded p-1.5">
                <p className="text-xs text-gray-600 mb-0.5">Drop n needles, k cross:</p>
                <Latex math="\hat{p} = \frac{k}{n} \approx \frac{2\ell}{\pi d}" display={true} />
              </div>
              <div className="bg-white rounded p-1.5">
                <p className="text-xs text-gray-600 mb-0.5">Rearrange for pi:</p>
                <Latex math="\pi \approx \frac{2\ell n}{d k}" display={true} />
              </div>
            </div>
            <p className="text-xs text-center text-red-700 font-semibold mt-1.5">Random experiments â†’ Deterministic constant!</p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 05: MONTE CARLO IDEA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const piEstimationUrl_slide05 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_1_fig02_pi_estimation.png";
function Slide05_MonteCarloIdea() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-0">The Monte Carlo Idea</h1>
          <p className="text-gray-600 text-base mb-1">From Buffon to the General Principle</p>
    
          <div className="flex gap-3 flex-1 min-h-0">
            {/* Left column: The core principle */}
            <div className="w-1/3 flex flex-col">
              {/* Key insight - TWO parts */}
              <div className="bg-indigo-50 rounded-lg p-2 mb-2 border border-indigo-200 flex-shrink-0">
                <p className="text-base text-indigo-800 font-semibold text-center">Core Principle</p>
                <p className="text-sm text-indigo-700 text-center mt-1">â‘  Many quantities can be written as expectations</p>
                <p className="text-sm text-indigo-700 text-center">â‘¡ Expectations can be estimated by sampling</p>
              </div>
    
              {/* Three levels - show both principles */}
              <div className="bg-gradient-to-b from-purple-50 via-green-50 to-teal-50 rounded-lg p-2 border border-purple-200 flex-1">
                <div className="space-y-2">
                  <div className="bg-white rounded p-2">
                    <p className="text-sm font-semibold text-purple-800 mb-1">1. Probabilities</p>
                    <p className="text-sm"><Latex math="P(A) = \mathbb{E}[\mathbf{1}_A]" /></p>
                    <p className="text-xs text-purple-600 mt-1"><Latex math="\approx \frac{\#\{X_i \in A\}}{n}" /></p>
                  </div>
                  <div className="bg-white rounded p-2">
                    <p className="text-sm font-semibold text-green-800 mb-1">2. Expectations</p>
                    <p className="text-sm"><Latex math="\mathbb{E}[h(X)]" /></p>
                    <p className="text-xs text-green-600 mt-1"><Latex math="\approx \frac{1}{n}\sum_{i=1}^n h(X_i)" /></p>
                  </div>
                  <div className="bg-white rounded p-2">
                    <p className="text-sm font-semibold text-teal-800 mb-1">3. Integrals</p>
                    <p className="text-sm"><Latex math="\int g\,dx = \mathbb{E}_f[g/f]" /></p>
                    <p className="text-xs text-teal-600 mt-1"><Latex math="\approx \frac{1}{n}\sum_{i=1}^n \frac{g(X_i)}{f(X_i)}" /></p>
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right column: Pi example - larger */}
            <div className="w-2/3 flex flex-col">
              <p className="text-base font-bold text-gray-800 text-center mb-1">Example: Estimating <Latex math="\pi" /></p>
    
              {/* Image - takes most of the space */}
              <div className="bg-white rounded-lg border border-gray-200 p-1 flex-1 mb-1 min-h-0">
                <img 
                  src={piEstimationUrl_slide05} 
                  alt="Monte Carlo pi estimation"
                  className="w-full h-full object-contain"
                />
              </div>
              
              {/* The punchline - compact */}
              <div className="bg-blue-100 rounded-lg p-2 border border-blue-300 flex-shrink-0">
                <div className="text-center space-y-1">
                  <p className="text-base text-blue-800">
                    <Latex math="P(X^2+Y^2 \leq 1) = \frac{\pi}{4} \;\Rightarrow\; \pi = 4 \cdot P(X^2+Y^2 \leq 1)" />
                  </p>
                  <p className="text-lg text-blue-900 font-bold">
                    <Latex math="\hat{\pi} = 4 \cdot \frac{\#\{X_i^2+Y_i^2 \leq 1\}}{n}" />
                  </p>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom: Paradigm shift */}
          <div className="bg-gradient-to-r from-red-50 to-green-50 rounded-lg p-2 border border-gray-300 mt-2 flex-shrink-0">
            <div className="grid grid-cols-2 gap-4 text-base">
              <div className="text-center">
                <p className="font-bold text-red-600">Traditional</p>
                <p className="text-red-500">Solve analytically â†’ High <Latex math="d" />? Stuck.</p>
              </div>
              <div className="text-center">
                <p className="font-bold text-green-600">Monte Carlo</p>
                <p className="text-green-500">Sample & average â†’ Works in any <Latex math="d" />!</p>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 06: MC ESTIMATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide06_MCEstimator() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Integration as Expectation</h1>
          <p className="text-gray-600 text-base mb-2">The foundational identity + the MC estimator</p>
    
          <div className="flex gap-4 flex-1 min-h-0">
            {/* Left: The identity */}
            <div className="w-1/2 flex flex-col gap-3">
              {/* Key identity */}
              <div className="bg-indigo-100 rounded-lg p-3 border-2 border-indigo-300">
                <p className="text-base font-bold text-indigo-800 mb-2">The Key Identity</p>
                <div className="bg-white rounded p-3 text-center">
                  <p className="text-2xl"><Latex math="I = \int h(x) f(x)\,dx = \mathbb{E}_f[h(X)]" /></p>
                </div>
                <p className="text-sm text-indigo-600 mt-2 text-center">Integral w.r.t. density = Expectation under that density</p>
              </div>
    
              {/* Multiply and divide - LARGER */}
              <div className="bg-purple-100 rounded-lg p-4 border-2 border-purple-300">
                <p className="text-lg font-bold text-purple-800 mb-3">The "Multiply & Divide" Trick</p>
                <p className="text-sm text-purple-700 mb-3">For a "naked" integral, introduce any density <Latex math="f" />:</p>
                <div className="bg-white rounded p-4 text-center">
                  <p className="text-2xl"><Latex math="\int g(x)\,dx = \int \frac{g(x)}{f(x)} f(x)\,dx = \mathbb{E}_f\!\left[\frac{g(X)}{f(X)}\right]" /></p>
                </div>
                <p className="text-base text-purple-700 mt-4 font-semibold">Uniform case:</p>
                <div className="bg-white rounded p-3 text-center mt-2">
                  <p className="text-2xl"><Latex math="\int_a^b g(x)\,dx = (b-a) \cdot \mathbb{E}[g(U)]" /></p>
                </div>
              </div>
            </div>
    
            {/* Right: The estimator */}
            <div className="w-1/2 flex flex-col gap-3">
              {/* MC Estimator */}
              <div className="bg-green-100 rounded-lg p-3 border-2 border-green-300">
                <p className="text-base font-bold text-green-800 mb-2">The MC Estimator</p>
                <p className="text-sm text-green-700 mb-2">Given <Latex math="X_1, \ldots, X_n \stackrel{\text{iid}}{\sim} f" />:</p>
                <div className="bg-white rounded p-3 text-center">
                  <p className="text-2xl"><Latex math="\hat{I}_n = \frac{1}{n}\sum_{i=1}^n h(X_i)" /></p>
                </div>
                <p className="text-sm text-green-600 mt-2 text-center font-semibold">Just a sample mean of h(Xáµ¢)!</p>
              </div>
    
              {/* Properties */}
              <div className="bg-amber-50 rounded-lg p-3 border border-amber-200">
                <p className="text-base font-bold text-amber-800 mb-2">Properties</p>
                <div className="grid grid-cols-2 gap-3">
                  <div className="bg-white rounded p-3 text-center">
                    <p className="text-sm font-semibold text-amber-700 mb-1">Unbiased</p>
                    <p className="text-2xl"><Latex math="\mathbb{E}[\hat{I}_n] = I" /></p>
                  </div>
                  <div className="bg-white rounded p-3 text-center">
                    <p className="text-sm font-semibold text-amber-700 mb-1">Variance</p>
                    <p className="text-2xl"><Latex math="\text{Var}(\hat{I}_n) = \frac{\sigma^2}{n}" /></p>
                  </div>
                </div>
              </div>
    
              {/* Standard Error */}
              <div className="bg-red-100 rounded-lg p-3 border-2 border-red-300">
                <p className="text-base font-bold text-red-800 mb-2">Standard Error</p>
                <div className="bg-white rounded p-3 text-center">
                  <p className="text-2xl"><Latex math="\text{SE}(\hat{I}_n) = \frac{\sigma}{\sqrt{n}}" /></p>
                </div>
                <p className="text-sm text-red-600 mt-2 text-center">Error decreases as <Latex math="1/\sqrt{n}" /></p>
              </div>
            </div>
          </div>
    
          {/* Bottom summary */}
          <div className="bg-gray-100 rounded-lg p-2 mt-3 border border-gray-300 flex-shrink-0">
            <p className="text-base text-center text-gray-700">
              <strong>Recipe:</strong> Write <Latex math="I = \mathbb{E}_f[h(X)]" /> â†’ Sample <Latex math="X_i \sim f" /> â†’ Compute <Latex math="\hat{I}_n = \frac{1}{n}\sum h(X_i)" />
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                            SLIDE 07: LLN_CLT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const convergenceUrl_slide07 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_1_fig03_sqrt_n_convergence.png";
function Slide07_LLN_CLT() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">LLN & CLT: The Theory Behind MC</h1>
          <p className="text-gray-600 text-base mb-2">Why it works + How fast it converges</p>
    
          <div className="flex gap-3 flex-1 min-h-0">
            {/* Left: LLN + CLT */}
            <div className="w-1/3 flex flex-col gap-3">
              <div className="bg-indigo-100 rounded-lg p-3 border-2 border-indigo-300">
                <p className="text-base font-bold text-indigo-800 mb-2">Law of Large Numbers</p>
                <p className="text-sm text-indigo-700 mb-2">If <Latex math="X_1, \ldots, X_n \stackrel{\text{iid}}{\sim} f" /> and <Latex math="\mathbb{E}_f[|h(X)|] < \infty" />:</p>
                <div className="bg-white rounded p-2 text-center">
                  <p className="text-lg"><Latex math="\hat{I}_n = \frac{1}{n}\sum_{i=1}^n h(X_i) \xrightarrow{\text{a.s.}} \mathbb{E}_f[h(X)] = I" /></p>
                </div>
              </div>
    
              <div className="bg-green-100 rounded-lg p-3 border-2 border-green-300">
                <p className="text-base font-bold text-green-800 mb-2">Central Limit Theorem</p>
                <p className="text-sm text-green-700 mb-2">If additionally <Latex math="\sigma^2 = \text{Var}_f(h(X)) < \infty" />:</p>
                <div className="bg-white rounded p-2 text-center">
                  <p className="text-lg"><Latex math="\frac{\hat{I}_n - I}{\sigma/\sqrt{n}} \xrightarrow{d} N(0, 1)" /></p>
                </div>
                <p className="text-sm text-green-600 mt-2">Equivalently: <Latex math="\hat{I}_n \approx N(I, \sigma^2/n)" /> for large n</p>
              </div>
    
              <div className="bg-amber-100 rounded-lg p-3 border-2 border-amber-300">
                <p className="text-base font-bold text-amber-800 mb-2">The <Latex math="O(n^{-1/2})" /> Rate</p>
                <div className="bg-white rounded p-2 text-center">
                  <p className="text-lg"><Latex math="\text{SE}(\hat{I}_n) = \frac{\sigma}{\sqrt{n}}" /></p>
                </div>
                <p className="text-sm text-amber-700 mt-2">â€¢ Halve error â†’ 4Ã— samples</p>
                <p className="text-sm text-amber-700">â€¢ Rate independent of dimension!</p>
              </div>
            </div>
    
            {/* Right: Large convergence visualization */}
            <div className="w-2/3 flex flex-col">
              <div className="bg-white rounded-lg border border-gray-200 p-2 flex-1 min-h-0">
                <img 
                  src={convergenceUrl_slide07} 
                  alt="Three-panel MC convergence: running means, sampling distributions tighten, 1/âˆšn rate"
                  className="w-full h-full object-contain"
                />
              </div>
              <p className="text-sm text-gray-600 text-center mt-1">
                Left: trajectories â†’ Ï€ | Center: distributions tighten | Right: SE ~ <Latex math="1/\sqrt{n}" />
              </p>
            </div>
          </div>
    
          {/* Bottom: Conditions summary */}
          <div className="bg-gray-100 rounded-lg p-2 mt-2 border border-gray-300 flex-shrink-0">
            <p className="text-base text-center">
              <span className="font-bold text-gray-700">Required:</span> 
              <Latex math="X_i \stackrel{\text{iid}}{\sim} f" /> with <Latex math="\text{supp}(f) \supseteq \text{supp}(h)" />
              <span className="mx-2">|</span>
              <span className="font-bold text-indigo-700">LLN:</span> <Latex math="\mathbb{E}[|h|] < \infty" />
              <span className="mx-2">|</span>
              <span className="font-bold text-green-700">CLT:</span> <Latex math="\text{Var}(h) < \infty" />
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                    SLIDE 08: DIMENSION INDEPENDENCE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const curseUrl_slide08 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_1_fig05_sampling_strategies.png";
function Slide08_DimensionIndependence() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">The Curse of Dimensionality</h1>
          <p className="text-gray-600 text-base mb-2">Why Monte Carlo wins in high dimensions</p>
    
          <div className="flex gap-3 flex-1 min-h-0">
            {/* Left: Explanation of six panels */}
            <div className="w-[28%] flex flex-col gap-2">
              <div className="bg-blue-100 rounded-lg p-2 border-2 border-blue-300">
                <p className="text-base font-bold text-blue-800 mb-1">Top Row: 1D</p>
                <p className="text-sm text-blue-700">Grid vs MC sampling</p>
                <p className="text-sm text-blue-700">Quadrature wins in 1D!</p>
                <p className="text-sm text-blue-600 mt-1">O(nâ»Â²) beats O(nâ»Â¹/Â²)</p>
              </div>
    
              <div className="bg-purple-100 rounded-lg p-2 border-2 border-purple-300">
                <p className="text-base font-bold text-purple-800 mb-1">Bottom Left: 2D</p>
                <p className="text-sm text-purple-700">Grid: 10Â² = 100 pts</p>
                <p className="text-sm text-purple-700">MC: 100 random pts</p>
                <p className="text-sm text-purple-600 mt-1">Same n, different structure</p>
              </div>
    
              <div className="bg-green-100 rounded-lg p-2 border-2 border-green-300">
                <p className="text-base font-bold text-green-800 mb-1">Bottom Right: Crossover</p>
                <p className="text-sm text-green-700">Grid: n = 10<sup>d</sup> (explodes)</p>
                <p className="text-sm text-green-700">MC: n = 1000 (any d)</p>
                <p className="text-sm text-green-600 mt-1 font-semibold">MC wins when d &gt; 3</p>
              </div>
    
              <div className="bg-red-100 rounded-lg p-2 border-2 border-red-400">
                <p className="text-base font-bold text-red-800 mb-1">âš ï¸ ÏƒÂ² Can Explode!</p>
                <p className="text-sm text-red-700">Rate O(nâ»Â¹/Â²) is fixed</p>
                <p className="text-sm text-red-700">But ÏƒÂ² may grow with d</p>
                <p className="text-sm text-red-600 mt-1 font-semibold">â†’ Smart sampling needed</p>
              </div>
            </div>
    
            {/* Right: Image takes most space */}
            <div className="w-[72%] flex flex-col gap-2">
              <div className="bg-white rounded-lg border border-gray-200 p-1 flex-1 min-h-0">
                <img 
                  src={curseUrl_slide08} 
                  alt="Six panels comparing grid quadrature vs Monte Carlo: 1D sampling, 2D sampling, and crossover analysis"
                  className="w-3/4 h-full object-contain"
                />
              </div>
              
              {/* Bottom comparison */}
              <div className="flex gap-2">
                <div className="flex-1 bg-red-100 rounded-lg p-2 border border-red-300">
                  <p className="text-sm font-bold text-red-800 text-center">Quadrature</p>
                  <p className="text-lg text-center"><Latex math="O(n^{-k/d})" /></p>
                  <p className="text-xs text-red-600 text-center">Wins in low d</p>
                </div>
                <div className="flex-1 bg-green-100 rounded-lg p-2 border border-green-300">
                  <p className="text-sm font-bold text-green-800 text-center">Monte Carlo</p>
                  <p className="text-lg text-center"><Latex math="O(n^{-1/2})" /></p>
                  <p className="text-xs text-green-600 text-center">Rate fixed for any d</p>
                </div>
                <div className="flex-1 bg-amber-100 rounded-lg p-2 border border-amber-400">
                  <p className="text-sm font-bold text-amber-800 text-center">âš ï¸ Caveat</p>
                  <p className="text-base text-center"><Latex math="\sigma^2 \uparrow" /> with d?</p>
                  <p className="text-xs text-amber-700 text-center">Naive sampling fails!</p>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                     SLIDE 09: CONFIDENCE INTERVALS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide09_ConfidenceIntervals() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Confidence Intervals & Sample Size</h1>
          <p className="text-gray-600 text-base mb-2">Practical inference with Monte Carlo</p>
    
          <div className="flex gap-3">
            {/* Left: CI construction */}
            <div className="w-1/2 flex flex-col gap-2">
              <div className="bg-indigo-100 rounded-lg p-3 border-2 border-indigo-300">
                <p className="text-xl font-bold text-indigo-800 mb-2">Confidence Interval</p>
                <p className="text-base text-indigo-700 mb-2">From CLT: <Latex math="\hat{I}_n" /> is approximately normal</p>
                <div className="bg-white rounded p-2 text-center">
                  <p className="text-2xl"><Latex math="\hat{I}_n \pm z_{\alpha/2} \cdot \frac{\hat{\sigma}}{\sqrt{n}}" /></p>
                </div>
              </div>
    
              <div className="bg-purple-50 rounded-lg p-3 border border-purple-200">
                <p className="text-lg font-bold text-purple-800 mb-2">Common <Latex math="z" /> Values</p>
                <div className="grid grid-cols-3 gap-2 text-base">
                  <div className="bg-white rounded p-2 text-center">
                    <p className="font-semibold text-purple-800">90%</p>
                    <p className="text-purple-700"><Latex math="z = 1.645" /></p>
                  </div>
                  <div className="bg-white rounded p-2 text-center">
                    <p className="font-semibold text-purple-800">95%</p>
                    <p className="text-purple-700"><Latex math="z = 1.96" /></p>
                  </div>
                  <div className="bg-white rounded p-2 text-center">
                    <p className="font-semibold text-purple-800">99%</p>
                    <p className="text-purple-700"><Latex math="z = 2.576" /></p>
                  </div>
                </div>
                <p className="text-base text-purple-600 mt-2">Small n? Use <Latex math="t_{n-1}" /> instead of <Latex math="z" /></p>
              </div>
    
              <div className="bg-green-50 rounded-lg p-3 border border-green-200">
                <p className="text-lg font-bold text-green-800 mb-2">Estimating <Latex math="\sigma" /> (Unknown!)</p>
                <div className="bg-white rounded p-2 text-center">
                  <p className="text-lg"><Latex math="\hat{\sigma} = \sqrt{\frac{1}{n-1}\sum_{i=1}^n (h(X_i) - \hat{I}_n)^2}" /></p>
                </div>
                <p className="text-base text-green-600 mt-2 text-center">Sample std dev of <Latex math="h(X_i)" /> values</p>
              </div>
            </div>
    
            {/* Right: Sample size planning */}
            <div className="w-1/2 flex flex-col gap-2">
              <div className="bg-amber-100 rounded-lg p-3 border-2 border-amber-300">
                <p className="text-xl font-bold text-amber-800 mb-2">Sample Size Planning</p>
                <p className="text-base text-amber-700 mb-2">Target: 95% CI half-width <Latex math="\leq \varepsilon" /></p>
                <div className="bg-white rounded p-2 text-center">
                  <p className="text-2xl"><Latex math="n \geq \frac{4\sigma^2}{\varepsilon^2}" /></p>
                </div>
              </div>
    
              <div className="bg-red-50 rounded-lg p-3 border border-red-200">
                <p className="text-lg font-bold text-red-800 mb-2">General Formula</p>
                <p className="text-base text-red-700 mb-1">For <Latex math="(1-\alpha)" /> CI half-width <Latex math="\leq \varepsilon" />:</p>
                <div className="bg-white rounded p-2 text-center">
                  <p className="text-xl"><Latex math="n \geq \frac{z_{\alpha/2}^2 \, \sigma^2}{\varepsilon^2}" /></p>
                </div>
              </div>
    
              <div className="bg-teal-50 rounded-lg p-3 border border-teal-200">
                <p className="text-lg font-bold text-teal-800 mb-2">Example</p>
                <p className="text-base text-teal-700"><strong>Goal:</strong> 95% CI half-width <Latex math="\varepsilon = 0.01" /></p>
                <p className="text-base text-teal-700"><strong>Pilot:</strong> <Latex math="\hat{\sigma} \approx 0.24" /></p>
                <div className="bg-white rounded p-2 mt-1 text-center">
                  <p className="text-lg"><Latex math="n \geq \frac{4 \times 0.24^2}{0.01^2} \approx 2{,}300" /></p>
                </div>
                <p className="text-base text-teal-600 mt-2 text-center font-semibold">Rule: halving error needs 4x samples</p>
              </div>
            </div>
          </div>
    
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                          SLIDE 10: DIAGNOSTICS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const diagnosticsUrl_slide10 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_1_fig07_convergence_diagnostics.png";
function Slide10_Diagnostics() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Convergence Diagnostics</h1>
          <p className="text-gray-600 text-base mb-2">How to know your MC is working</p>
    
          <div className="flex gap-3">
            {/* Left: Four diagnostics */}
            <div className="w-1/3 flex flex-col gap-2">
              <div className="bg-purple-100 rounded-lg p-2 border-2 border-purple-300">
                <p className="text-base font-bold text-purple-800">1. Running Mean</p>
                <p className="text-sm text-purple-700">Plot <Latex math="\hat{I}_k" /> vs <Latex math="k" /> with CI band</p>
                <p className="text-sm text-green-600">Good: stabilizes (stops wandering)</p>
              </div>
    
              <div className="bg-green-100 rounded-lg p-2 border-2 border-green-300">
                <p className="text-base font-bold text-green-800">2. SE Decay</p>
                <p className="text-sm text-green-700">Log-log plot of SE vs n</p>
                <p className="text-sm text-green-600">Good: slope = <Latex math="-1/2" /> (CLT working)</p>
              </div>
    
              <div className="bg-amber-100 rounded-lg p-2 border-2 border-amber-300">
                <p className="text-base font-bold text-amber-800">3. Histogram</p>
                <p className="text-sm text-amber-700">Distribution of <Latex math="h(X_i)" /></p>
                <p className="text-sm text-green-600">Good: no extreme outliers/tails</p>
              </div>
    
              <div className="bg-red-100 rounded-lg p-2 border-2 border-red-300">
                <p className="text-base font-bold text-red-800">4. Autocorrelation</p>
                <p className="text-sm text-red-700">Check iid assumption</p>
                <p className="text-sm text-green-600">Good: no pattern, few outside bounds</p>
              </div>
            </div>
    
            {/* Right: Image */}
            <div className="w-2/3">
              <div className="bg-white rounded-lg border border-gray-200 p-1">
                <img 
                  src={diagnosticsUrl_slide10} 
                  alt="MC convergence diagnostics: running mean, SE decay, histogram, autocorrelation"
                  className="w-full h-auto object-contain"
                />
              </div>
            </div>
          </div>
    
          {/* Bottom: Key insight */}
          <div className="bg-indigo-100 rounded-lg p-2 mt-3 border-2 border-indigo-300">
            <p className="text-base text-center text-indigo-800">
              <strong>Key insight:</strong> We check that MC is behaving properlyâ€”not that we found truth (which we don't know!)
            </p>
            <p className="text-sm text-center text-indigo-600">
              (Image shows validation example where truth is known: <Latex math="E[X^2] = 1" /> for <Latex math="X \sim N(0,1)" />)
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 11: APPLICATIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide11_Applications() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Applications of MC Integration</h1>
          <p className="text-gray-600 text-base mb-2">The key skill: turning problems into expectations</p>
    
          <div className="flex gap-3">
            {/* Left: Where MC appears */}
            <div className="w-2/5 flex flex-col gap-2">
              <div className="bg-indigo-50 rounded-lg p-3 border border-indigo-200">
                <p className="text-lg font-bold text-indigo-800 mb-2">Where MC Appears</p>
                <ul className="text-base text-indigo-700 space-y-1">
                  <li><strong>Posterior means:</strong> <Latex math="E[\theta|\text{data}]" /></li>
                  <li><strong>Predictions:</strong> <Latex math="E[\hat{Y}|\text{data}]" /></li>
                  <li><strong>Marginals:</strong> <Latex math="\int p(y|\theta)p(\theta)d\theta" /></li>
                  <li><strong>Probabilities:</strong> <Latex math="P(Y > c)" /></li>
                  <li><strong>Bootstrap:</strong> SE, CIs</li>
                </ul>
              </div>
    
              <div className="bg-gray-100 rounded-lg p-3 border border-gray-300">
                <p className="text-lg font-bold text-gray-800 mb-2">The Pattern</p>
                <ol className="text-base text-gray-700 space-y-1">
                  <li>1. Identify random quantity</li>
                  <li>2. Know how to sample it</li>
                  <li>3. Write target as <Latex math="E[h(\cdot)]" /></li>
                  <li>4. Sample, evaluate, average</li>
                </ol>
              </div>
            </div>
    
            {/* Right: Extended example */}
            <div className="w-3/5 flex flex-col gap-2">
              <div className="bg-green-100 rounded-lg p-2 border-2 border-green-300">
                <p className="text-lg font-bold text-green-800 mb-1">Example: Posterior Predictive Mean</p>
                <p className="text-base text-green-700">Model: <Latex math="Y = \beta_0 + \beta_1 X + \varepsilon" /> where <Latex math="\boldsymbol{\beta} = (\beta_0, \beta_1)^\top" /></p>
              </div>
    
              <div className="bg-amber-50 rounded-lg p-3 border border-amber-200">
                <p className="text-base font-bold text-amber-800 mb-1">The Problem</p>
                <p className="text-sm text-amber-700">After fitting, we have posterior <Latex math="p(\boldsymbol{\beta}|\mathbf{y})" />. Want:</p>
                <div className="bg-white rounded p-2 text-center mt-1">
                  <p className="text-base"><Latex math="E[\hat{Y}_{\text{new}}|\mathbf{y}] = \int_{\mathbb{R}^2} (\beta_0 + \beta_1 x_{\text{new}})\, p(\boldsymbol{\beta}|\mathbf{y})\, d\boldsymbol{\beta}" /></p>
                </div>
                <p className="text-sm text-amber-600 mt-1 text-center">This 2D integral is often intractable!</p>
              </div>
    
              <div className="bg-red-50 rounded-lg p-3 border border-red-200">
                <p className="text-base font-bold text-red-800 mb-1">MC Solution</p>
                <div className="text-sm text-red-700 space-y-1">
                  <p><strong>Step 1:</strong> Draw <Latex math="\boldsymbol{\beta}^{(i)} = (\beta_0^{(i)}, \beta_1^{(i)})^\top \sim p(\boldsymbol{\beta}|\mathbf{y})" /> for <Latex math="i = 1,\ldots,n" /></p>
                  <p><strong>Step 2:</strong> Compute <Latex math="\hat{Y}^{(i)} = \beta_0^{(i)} + \beta_1^{(i)} \cdot x_{\text{new}}" /></p>
                  <p><strong>Step 3:</strong> Average: <Latex math="\widehat{E}[\hat{Y}_{\text{new}}] = \frac{1}{n}\sum_{i=1}^n \hat{Y}^{(i)}" /></p>
                </div>
              </div>
    
              <div className="bg-teal-50 rounded-lg p-3 border border-teal-200">
                <p className="text-base font-bold text-teal-800 mb-1">Python Implementation</p>
                <div className="bg-white rounded p-2 mt-1">
                  <pre className="text-xs text-teal-800 overflow-x-auto">{`# beta_samples: (n, 2) array from posterior
    # beta_samples[:,0] = beta_0, beta_samples[:,1] = beta_1
    x_new = 5.0
    y_pred = beta_samples[:,0] + beta_samples[:,1] * x_new
    print(f"E[Y_new] = {y_pred.mean():.3f}")
    print(f"95% CI: {np.percentile(y_pred, [2.5, 97.5])}")`}</pre>
                </div>
                <p className="text-sm text-teal-600 mt-1 text-center font-semibold">Samples give full distribution: mean, variance, quantiles, plots!</p>
              </div>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-gray-100 rounded-lg p-2 mt-3 border-2 border-gray-300">
            <p className="text-base text-center text-gray-700">
              <strong>Key insight:</strong> MC turns intractable integrals into simple averages over samples
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                            SLIDE 12: SUMMARY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide12_Summary() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Section 2.1 Summary</h1>
          <p className="text-gray-600 text-base mb-2">Monte Carlo Fundamentals: Key Takeaways</p>
    
          <div className="flex gap-3">
            {/* Left: Core formulas */}
            <div className="w-1/2 flex flex-col gap-2">
              <div className="bg-indigo-100 rounded-lg p-3 border-2 border-indigo-300">
                <p className="text-base font-bold text-indigo-800 mb-2">The MC Recipe</p>
                <div className="space-y-2">
                  <div className="bg-white rounded p-2 text-center">
                    <p className="text-sm text-indigo-700 mb-1">Target as expectation:</p>
                    <p className="text-lg"><Latex math="I = E_f[h(X)]" /></p>
                  </div>
                  <div className="bg-white rounded p-2 text-center">
                    <p className="text-sm text-indigo-700 mb-1">Estimate by sampling:</p>
                    <p className="text-lg"><Latex math="\hat{I}_n = \frac{1}{n}\sum_{i=1}^n h(X_i)" /></p>
                  </div>
                </div>
              </div>
    
              <div className="bg-purple-50 rounded-lg p-3 border border-purple-200">
                <p className="text-base font-bold text-purple-800 mb-2">Theoretical Guarantees</p>
                <div className="space-y-1">
                  <div className="bg-white rounded p-2">
                    <p className="text-sm text-purple-700"><strong>LLN:</strong> <Latex math="\hat{I}_n \xrightarrow{\text{a.s.}} I" /> (converges)</p>
                  </div>
                  <div className="bg-white rounded p-2">
                    <p className="text-sm text-purple-700"><strong>CLT:</strong> <Latex math="\sqrt{n}(\hat{I}_n - I) \xrightarrow{d} N(0, \sigma^2)" /></p>
                  </div>
                  <div className="bg-white rounded p-2">
                    <p className="text-sm text-purple-700"><strong>Rate:</strong> <Latex math="\text{SE} = O(n^{-1/2})" /> in ANY dimension</p>
                  </div>
                </div>
              </div>
    
              <div className="bg-green-50 rounded-lg p-3 border border-green-200">
                <p className="text-base font-bold text-green-800 mb-2">Practical Tools</p>
                <div className="space-y-1">
                  <div className="bg-white rounded p-2">
                    <p className="text-sm text-green-700"><strong>95% CI:</strong> <Latex math="\hat{I}_n \pm 1.96 \cdot \hat{\sigma}/\sqrt{n}" /></p>
                  </div>
                  <div className="bg-white rounded p-2">
                    <p className="text-sm text-green-700"><strong>Sample size:</strong> <Latex math="n \geq 4\sigma^2/\varepsilon^2" /> for half-width <Latex math="\varepsilon" /></p>
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right: What's next */}
            <div className="w-1/2 flex flex-col gap-2">
              <div className="bg-amber-100 rounded-lg p-3 border-2 border-amber-300">
                <p className="text-base font-bold text-amber-800 mb-2">The Missing Piece</p>
                <p className="text-sm text-amber-700">We assumed we can sample <Latex math="X_i \sim f" />.</p>
                <p className="text-sm text-amber-800 font-semibold mt-1">But HOW? Computers are deterministic!</p>
              </div>
    
              <div className="bg-teal-100 rounded-lg p-3 border-2 border-teal-300">
                <p className="text-base font-bold text-teal-800 mb-2">Coming Up: HOW to Sample</p>
                <div className="space-y-1 text-sm text-teal-700">
                  <p><strong>Â§2.2:</strong> Uniform PRNGs (faking randomness)</p>
                  <p><strong>Â§2.3:</strong> Inverse CDF (U(0,1) to any F)</p>
                  <p><strong>Â§2.4:</strong> Transformations (Box-Muller)</p>
                  <p><strong>Â§2.5:</strong> Rejection sampling</p>
                </div>
              </div>
    
              <div className="bg-red-50 rounded-lg p-3 border border-red-200">
                <p className="text-base font-bold text-red-800 mb-2">Coming Up: Faster MC</p>
                <div className="text-sm text-red-700">
                  <p><Latex math="O(n^{-1/2})" /> is slow: halving error needs 4x samples!</p>
                  <p className="mt-1"><strong>Â§2.6-2.7:</strong> Variance reduction techniques</p>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-gray-100 rounded-lg p-2 mt-3 border-2 border-gray-300">
            <p className="text-base text-center text-gray-700">
              <strong>Â§2.1 = WHAT and WHY</strong> | <strong>Â§2.2-2.5 = HOW to sample</strong> | <strong>Â§2.6-2.7 = HOW to be efficient</strong>
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 13: UNIFORM HERO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide13_UniformHero() {
  return (
    <div className="flex flex-col h-full items-center justify-center -mt-4">
          <p className="text-lg text-indigo-600 font-semibold mb-2">Section 2.2</p>
          <h1 className="text-4xl font-bold text-gray-900 mb-3">Uniform Random Variates</h1>
          <p className="text-xl text-gray-600 mb-6">The Computational Atom of Randomness</p>
          
          <div className="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-indigo-200 max-w-2xl">
            <div className="flex items-center justify-center gap-4 mb-4">
              <div className="bg-blue-100 rounded-lg p-3 border border-blue-300 text-center">
                <p className="text-lg font-bold text-blue-800"><Latex math="U(0,1)" /></p>
                <p className="text-sm text-blue-600">Uniform</p>
              </div>
              <div className="text-3xl text-gray-400">â†’</div>
              <div className="flex flex-col gap-2">
                <div className="bg-green-100 rounded px-3 py-1 border border-green-300">
                  <p className="text-sm text-green-700">Normal</p>
                </div>
                <div className="bg-amber-100 rounded px-3 py-1 border border-amber-300">
                  <p className="text-sm text-amber-700">Exponential</p>
                </div>
                <div className="bg-purple-100 rounded px-3 py-1 border border-purple-300">
                  <p className="text-sm text-purple-700">Gamma</p>
                </div>
                <div className="bg-red-100 rounded px-3 py-1 border border-red-300">
                  <p className="text-sm text-red-700">Any distribution</p>
                </div>
              </div>
            </div>
            <p className="text-center text-base text-gray-700">
              Generate uniforms â†’ Transform to target distribution
            </p>
          </div>
    
          <div className="mt-6 grid grid-cols-3 gap-4 max-w-2xl">
            <div className="bg-gray-100 rounded-lg p-3 text-center border border-gray-300">
              <p className="text-2xl mb-1">ğŸ²</p>
              <p className="text-sm font-semibold text-gray-700">PRNGs</p>
              <p className="text-xs text-gray-500">How computers fake randomness</p>
            </div>
            <div className="bg-gray-100 rounded-lg p-3 text-center border border-gray-300">
              <p className="text-2xl mb-1">âš ï¸</p>
              <p className="text-sm font-semibold text-gray-700">Pitfalls</p>
              <p className="text-xs text-gray-500">What can go wrong</p>
            </div>
            <div className="bg-gray-100 rounded-lg p-3 text-center border border-gray-300">
              <p className="text-2xl mb-1">ğŸ</p>
              <p className="text-sm font-semibold text-gray-700">Practice</p>
              <p className="text-xs text-gray-500">NumPy best practices</p>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                          SLIDE 14: WHY UNIFORM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const pitUrl_slide14 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_2_fig01_probability_integral_transform.png";
function Slide14_WhyUniform() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Why Uniform is Special</h1>
          <p className="text-gray-600 text-base mb-2">The Probability Integral Transform</p>
    
          <div className="flex gap-3">
            {/* Left: The theorem */}
            <div className="w-2/5 flex flex-col gap-2">
              <div className="bg-indigo-100 rounded-lg p-3 border-2 border-indigo-300">
                <p className="text-base font-bold text-indigo-800 mb-2">The Universal Transform</p>
                <div className="bg-white rounded p-2 space-y-2">
                  <div>
                    <p className="text-sm text-indigo-700">If <Latex math="X \sim F" /> (continuous):</p>
                    <p className="text-lg text-center"><Latex math="F(X) \sim U(0,1)" /></p>
                  </div>
                  <div className="border-t pt-2">
                    <p className="text-sm text-indigo-700">Conversely, if <Latex math="U \sim U(0,1)" />:</p>
                    <p className="text-lg text-center"><Latex math="F^{-1}(U) \sim F" /></p>
                  </div>
                </div>
              </div>
    
              <div className="bg-green-100 rounded-lg p-2 border-2 border-green-300">
                <p className="text-base font-bold text-green-800 mb-1">Example: Exponential</p>
                <div className="text-sm text-green-700">
                  <p><Latex math="F^{-1}(u) = -\frac{\ln(1-u)}{\lambda}" /></p>
                </div>
                <div className="bg-white rounded p-1 mt-1">
                  <p className="text-sm text-green-800 font-mono">X = -np.log1p(-U) / lam</p>
                </div>
              </div>
    
              <div className="bg-amber-100 rounded-lg p-2 border-2 border-amber-300">
                <p className="text-base font-bold text-amber-800">The Implication</p>
                <p className="text-sm text-amber-700">Control U(0,1) generation</p>
                <p className="text-sm text-amber-800 font-semibold">= Control ALL random sampling</p>
              </div>
            </div>
    
            {/* Right: Figure */}
            <div className="w-3/5">
              <div className="bg-white rounded-lg border border-gray-200 p-1">
                <img 
                  src={pitUrl_slide14} 
                  alt="Probability Integral Transform: Forward transforms X to U, Inverse transforms U to X"
                  className="w-full h-auto object-contain"
                />
              </div>
              <p className="text-xs text-gray-500 text-center mt-1">Top: Forward (X to U) | Bottom: Inverse (U to X)</p>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-gray-100 rounded-lg p-2 mt-2 border-2 border-gray-300">
            <p className="text-base text-center text-gray-700">
              <strong>Key insight:</strong> Generate U(0,1), apply <Latex math="F^{-1}" />, obtain ANY distribution
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 15: PRNG PARADOX
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide15_PRNGParadox() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">The PRNG Paradox</h1>
          <p className="text-gray-600 text-base mb-2">Deterministic machines, statistical randomness</p>
    
          <div className="flex gap-3">
            {/* Left: The paradox and von Neumann */}
            <div className="w-1/2 flex flex-col gap-2">
              <div className="bg-red-100 rounded-lg p-3 border-2 border-red-300">
                <p className="text-lg font-bold text-red-800 mb-2">The Problem</p>
                <div className="space-y-2 text-sm">
                  <div className="bg-white rounded p-2">
                    <p className="text-red-700"><strong>Computers:</strong> Deterministic</p>
                    <p className="text-red-600 text-sm">Same input â†’ Same output. Always.</p>
                  </div>
                  <div className="bg-white rounded p-2">
                    <p className="text-red-700"><strong>Random numbers:</strong> Unpredictable</p>
                    <p className="text-red-600 text-sm">No pattern, no repetition</p>
                  </div>
                </div>
                <p className="text-base text-red-800 font-semibold mt-2 text-center">Contradiction?</p>
              </div>
    
              <div className="bg-amber-50 rounded-lg p-3 border border-amber-200">
                <p className="text-base font-bold text-amber-800 mb-1">Von Neumann (1951)</p>
                <div className="bg-white rounded p-2 italic text-sm text-amber-700">
                  "Anyone who considers arithmetical methods of producing random digits is, of course, in a state of sin."
                </div>
              </div>
            </div>
    
            {/* Right: Formal definition */}
            <div className="w-1/2 flex flex-col gap-2">
              <div className="bg-indigo-100 rounded-lg p-3 border-2 border-indigo-300">
                <p className="text-lg font-bold text-indigo-800 mb-2">Formal Definition</p>
                <div className="bg-white rounded p-2 text-sm text-indigo-700">
                  <p className="mb-1">A <strong>PRNG</strong> is a transformation <Latex math="D" /> that from seed <Latex math="u_0" /> produces:</p>
                  <p className="text-center my-1 text-base"><Latex math="u_i = D^i(u_0) \in [0,1]" /></p>
                  <p className="text-sm">where <Latex math="D^i" /> is <Latex math="D" /> composed <Latex math="i" /> times.</p>
                </div>
                <div className="bg-indigo-50 rounded p-2 mt-2 text-sm">
                  <p className="text-indigo-800 font-semibold">Validity test:</p>
                  <p className="text-indigo-700"><Latex math="H_0" />: <Latex math="(U_1, \ldots, U_n) \sim" /> iid Unif(0,1)</p>
                  <p className="text-indigo-700"><Latex math="H_a" />: Joint law differs from iid uniform</p>
                </div>
              </div>
    
              <div className="bg-green-100 rounded-lg p-3 border-2 border-green-300">
                <p className="text-base font-bold text-green-800 mb-1">PRNG Requirements</p>
                <div className="text-sm text-green-700 space-y-0.5">
                  <p>âœ“ <strong>Deterministic:</strong> reproducible</p>
                  <p>âœ“ <strong>Long period:</strong> no quick repeats</p>
                  <p>âœ“ <strong>Passes tests:</strong> looks iid uniform</p>
                  <p>âœ“ <strong>Fast:</strong> O(1) per sample</p>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-amber-100 rounded-lg p-2 mt-2 border-2 border-amber-300">
            <p className="text-base text-center text-amber-800">
              <strong>Warning:</strong> Adequate for Monte Carlo sampling â‰  Secure for cryptography
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 16: MIDDLE SQUARE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const middleSquareUrl_slide16 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_2_fig07_middle_square.png";
function Slide16_MiddleSquare() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Middle-Square Method (1946)</h1>
          <p className="text-gray-600 text-base mb-2">Von Neumann's first PRNG - elegant but fatally flawed</p>
    
          <div className="flex gap-3">
            {/* Left: Algorithm and examples */}
            <div className="w-2/5 flex flex-col gap-2">
              <div className="bg-indigo-100 rounded-lg p-2 border-2 border-indigo-300">
                <p className="text-base font-bold text-indigo-800 mb-1">Algorithm (k=4 digits)</p>
                <div className="text-sm text-indigo-700">
                  <p>1. Start with k-digit seed</p>
                  <p>2. Square it (2k digits)</p>
                  <p>3. Extract middle k digits</p>
                  <p>4. Repeat</p>
                </div>
              </div>
    
              {/* Degenerate case: 0404 */}
              <div className="bg-red-100 rounded-lg p-2 border-2 border-red-300">
                <p className="text-base font-bold text-red-800 mb-1">Degenerates (seed=0404)</p>
                <div className="bg-white rounded p-1.5 text-sm font-mono text-red-700 space-y-0.5">
                  <p>0404Â² = 00<span className="bg-yellow-300 px-0.5 rounded">1632</span>16</p>
                  <p>1632Â² = 02<span className="bg-yellow-300 px-0.5 rounded">6634</span>24</p>
                  <p>6634Â² = 44<span className="bg-yellow-300 px-0.5 rounded">0099</span>56</p>
                  <p className="text-red-500">... â†’ <strong>0000</strong> (trapped!)</p>
                </div>
              </div>
    
              {/* Cycle case: 2100 */}
              <div className="bg-amber-100 rounded-lg p-2 border-2 border-amber-300">
                <p className="text-base font-bold text-amber-800 mb-1">4-Cycle (seed=2100)</p>
                <div className="bg-white rounded p-1.5 text-sm font-mono text-amber-700 space-y-0.5">
                  <p>2100Â² = 04<span className="bg-yellow-300 px-0.5 rounded">4100</span>00</p>
                  <p>4100Â² = 16<span className="bg-yellow-300 px-0.5 rounded">8100</span>00</p>
                  <p>8100Â² = 65<span className="bg-yellow-300 px-0.5 rounded">6100</span>00</p>
                  <p>6100Â² = 37<span className="bg-yellow-300 px-0.5 rounded">2100</span>00 â†º</p>
                </div>
              </div>
    
              {/* Failure modes */}
              <div className="bg-red-50 rounded-lg p-2 border border-red-200">
                <p className="text-sm font-bold text-red-800 mb-1">Failure Modes</p>
                <div className="text-sm text-red-700 space-y-0.5">
                  <p>â€¢ ~90% of seeds reach 0000</p>
                  <p>â€¢ Most others enter short cycles</p>
                  <p>â€¢ No theory to predict behavior</p>
                </div>
              </div>
            </div>
    
            {/* Right: Figure */}
            <div className="w-4/5">
              <div className="bg-white rounded-lg border border-gray-200 p-1">
                <img 
                  src={middleSquareUrl_slide16} 
                  alt="Middle-square method failures: reasonable sequence, degeneration, short cycle"
                  className="w-full h-auto object-contain"
                />
              </div>
              <p className="text-sm text-gray-500 text-center mt-1">Left: Reasonable (1234) | Center: Degenerates (0404) | Right: 4-cycle (2100)</p>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-gray-100 rounded-lg p-2 mt-2 border-2 border-gray-300">
            <p className="text-base text-center text-gray-700">
              <strong>Lesson:</strong> Intuition about "scrambling" fails. We need mathematical theory for PRNGs.
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 17: CHAOS RANDOMNESS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const logisticFailureUrl_slide17 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_2_fig03_logistic_map_failure.png";
function Slide17_ChaosRandomness() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Chaos â‰  Randomness</h1>
          <p className="text-gray-600 text-base mb-2">What do we actually need from a PRNG?</p>
    
          <div className="flex gap-3">
            {/* Left: Math details */}
            <div className="w-2/5 flex flex-col gap-2">
              <div className="bg-indigo-100 rounded-lg p-2 border-2 border-indigo-300">
                <p className="text-base font-bold text-indigo-800 mb-1">Logistic Map</p>
                <div className="text-sm text-indigo-700 space-y-0.5">
                  <p><Latex math="X_{n+1} = r \cdot X_n(1-X_n)" />, <Latex math="X_0 \in (0,1)" /></p>
                  <p><Latex math="r=4" />: "fully chaotic" â€” tiny differences in <Latex math="X_0" /> lead to completely different sequences</p>
                  <p>Marginal: <Latex math="X_n \sim \text{Beta}(\tfrac{1}{2}, \tfrac{1}{2})" /> (not uniform!)</p>
                </div>
              </div>
    
              <div className="bg-purple-100 rounded-lg p-2 border-2 border-purple-300">
                <p className="text-base font-bold text-purple-800 mb-1">Transform to Uniform</p>
                <div className="text-sm text-purple-700 space-y-0.5">
                  <p>Apply arcsine CDF: <Latex math="Y_n = \frac{2}{\pi}\arcsin(\sqrt{X_n})" /></p>
                  <p>Now <Latex math="Y_n \sim \text{Unif}(0,1)" /> â€” marginals correct! âœ“</p>
                </div>
              </div>
    
              <div className="bg-red-100 rounded-lg p-2 border-2 border-red-300">
                <p className="text-base font-bold text-red-800 mb-1">Lag-1 Test: Tent Map!</p>
                <div className="text-sm text-red-700 space-y-0.5">
                  <p>Plot <Latex math="(Y_n, Y_{n+1})" />: should fill <Latex math="[0,1]^2" /> uniformly</p>
                  <p>Instead: <Latex math="Y_{n+1} = \begin{cases} 2Y_n & Y_n < 0.5 \\ 2(1-Y_n) & Y_n \geq 0.5 \end{cases}" /></p>
                  <p className="text-red-800 font-semibold">100% deterministic! âœ—</p>
                </div>
              </div>
    
              <div className="bg-green-100 rounded-lg p-2 border-2 border-green-300">
                <p className="text-base font-bold text-green-800 mb-1">What We Need</p>
                <div className="text-sm text-green-700 space-y-0.5">
                  <p>âœ“ Marginals: <Latex math="U_n \sim \text{Unif}(0,1)" /></p>
                  <p>âœ“ Independence: <Latex math="(U_n, U_{n+1})" /> fills <Latex math="[0,1]^2" /></p>
                  <p>âœ“ No pattern in lag-k plots for any k</p>
                  <p className="text-green-800 font-semibold mt-1">How do we achieve this?</p>
                </div>
              </div>
            </div>
    
            {/* Right: Figure */}
            <div className="w-3/5">
              <div className="bg-white rounded-lg border border-gray-200 p-1">
                <img 
                  src={logisticFailureUrl_slide17} 
                  alt="Logistic map vs good PRNG: marginals similar but lag-1 plot exposes determinism"
                  className="w-full h-auto object-contain"
                />
              </div>
              <p className="text-sm text-gray-500 text-center mt-1">Top: Logistic (lag-1 = tent map) | Bottom: Good PRNG (fills square âœ“)</p>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-gray-100 rounded-lg p-2 mt-2 border-2 border-gray-300">
            <p className="text-base text-center text-gray-700">
              <strong>Next:</strong> Linear Congruential Generators â€” PRNGs with mathematical theory
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                              SLIDE 18: LCG
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const lcgLatticeUrl_slide18 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_2_fig04_lcg_lattice.png";
function Slide18_LCG() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Linear Congruential Generators</h1>
          <p className="text-gray-600 text-base mb-2">First PRNGs with mathematical theory (Lehmer, 1951)</p>
    
          <div className="flex gap-3">
            {/* Left: Formula and parameters */}
            <div className="w-2/5 flex flex-col gap-2">
              <div className="bg-indigo-100 rounded-lg p-2 border-2 border-indigo-300">
                <p className="text-base font-bold text-indigo-800 mb-1">The LCG Recurrence</p>
                <div className="bg-white rounded p-2 text-center">
                  <p className="text-lg"><Latex math="X_{n+1} = (aX_n + c) \mod m" /></p>
                </div>
                <p className="text-sm text-indigo-700 mt-1">Output: <Latex math="U_n = X_n / m \in [0, 1)" /></p>
              </div>
    
              <div className="bg-purple-50 rounded-lg p-2 border border-purple-200">
                <p className="text-sm font-bold text-purple-800 mb-1">Parameters</p>
                <div className="text-sm text-purple-700 space-y-0.5">
                  <p><Latex math="m" />: modulus (e.g., <Latex math="2^{32}" /> or <Latex math="2^{64}" />)</p>
                  <p><Latex math="a" />: multiplier (carefully chosen)</p>
                  <p><Latex math="c" />: increment (0 = "multiplicative" LCG)</p>
                  <p><Latex math="X_0" />: seed (initial state)</p>
                </div>
              </div>
    
              <div className="bg-green-100 rounded-lg p-2 border-2 border-green-300">
                <p className="text-sm font-bold text-green-800 mb-1">Why LCGs?</p>
                <div className="text-sm text-green-700 space-y-0.5">
                  <p>âœ“ <strong>Fast:</strong> one multiply + add + mod</p>
                  <p>âœ“ <strong>Analyzable:</strong> we can PROVE properties</p>
                  <p>âœ“ <strong>Tiny state:</strong> just one integer</p>
                </div>
              </div>
    
              <div className="bg-red-50 rounded-lg p-2 border border-red-200">
                <p className="text-sm font-bold text-red-800">The Catch</p>
                <p className="text-sm text-red-700">Quality depends entirely on (a, c, m).</p>
                <p className="text-sm text-red-700">All LCGs have lattice structure!</p>
              </div>
            </div>
    
            {/* Right: Figure */}
            <div className="w-3/5">
              <div className="bg-white rounded-lg border border-gray-200 p-1">
                <img 
                  src={lcgLatticeUrl_slide18} 
                  alt="LCG lattice structure: points fall on parallel lines in 2D, planes in 3D"
                  className="w-full h-auto object-contain"
                />
              </div>
              <p className="text-sm text-gray-500 text-center mt-1">LCG outputs fall on parallel lines (2D) or hyperplanes (higher D)</p>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-gray-100 rounded-lg p-2 mt-2 border-2 border-gray-300">
            <p className="text-base text-center text-gray-700">
              <strong>Key question:</strong> How do we choose (a, c, m) to guarantee good behavior?
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                          SLIDE 19: LCG THEORY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const randuUrl_slide19 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_2_fig02_randu_disaster.png";
function Slide19_LCGTheory() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">LCG Theory: Full Period vs Quality</h1>
          <p className="text-gray-600 text-base mb-2">Hull-Dobell guarantees period, but RANDU shows that's not enough</p>
    
          <div className="flex gap-3">
            {/* Left: Theory */}
            <div className="w-2/5 flex flex-col gap-2">
              <div className="bg-indigo-100 rounded-lg p-2 border-2 border-indigo-300">
                <p className="text-base font-bold text-indigo-800 mb-1">Hull-Dobell Theorem (1962)</p>
                <p className="text-sm text-indigo-700 mb-1">Mixed LCG (<Latex math="c \neq 0" />) has full period m iff:</p>
                <div className="bg-white rounded p-2 text-sm text-indigo-700 space-y-0.5">
                  <p>1. <Latex math="\gcd(c, m) = 1" /> (c and m coprime)</p>
                  <p>2. <Latex math="a \equiv 1 \pmod{p}" /> for all primes p | m</p>
                  <p>3. If 4 | m: <Latex math="a \equiv 1 \pmod{4}" /></p>
                </div>
                <p className="text-xs text-indigo-600 mt-1">For <Latex math="m = 2^k" />: need c odd, <Latex math="a = 4j+1" /></p>
              </div>
    
              <div className="bg-red-100 rounded-lg p-2 border-2 border-red-300">
                <p className="text-base font-bold text-red-800 mb-1">RANDU Disaster (IBM, 1960s)</p>
                <div className="bg-white rounded p-2 text-center">
                  <p className="text-sm"><Latex math="X_{n+1} = 65539 \cdot X_n \mod 2^{31}" /></p>
                </div>
                <p className="text-sm text-red-700 mt-1">Long period âœ“, uniform marginals âœ“</p>
                <p className="text-sm text-red-700 font-semibold">But 3D triples fall on only 15 planes!</p>
              </div>
    
              <div className="bg-amber-100 rounded-lg p-2 border-2 border-amber-300">
                <p className="text-sm font-bold text-amber-800 mb-1">The Problem</p>
                <p className="text-sm text-amber-700">ALL LCGs have lattice structure.</p>
                <p className="text-sm text-amber-700">Good parameters minimize it, can't eliminate it.</p>
                <p className="text-sm text-amber-800 font-semibold mt-1">We need a better approach...</p>
              </div>
            </div>
    
            {/* Right: RANDU figure */}
            <div className="w-3/5">
              <div className="bg-white rounded-lg border border-gray-200 p-1">
                <img 
                  src={randuUrl_slide19} 
                  alt="RANDU 3D lattice structure: points fall on 15 parallel planes"
                  className="w-full h-auto object-contain"
                />
              </div>
              <p className="text-sm text-gray-500 text-center mt-1">RANDU: triples <Latex math="(X_n, X_{n+1}, X_{n+2})" /> fall on 15 planes</p>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-gray-100 rounded-lg p-2 mt-2 border-2 border-gray-300">
            <p className="text-base text-center text-gray-700">
              <strong>Next:</strong> Modern PRNGs â€” keep LCG's analyzability, hide its structure
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 20: MODERN PRN GS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const comparisonUrl_slide20 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_2_fig06_generator_comparison.png";
function Slide20_ModernPRNGs() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-0.5">PCG64 (XSL RR 128/64)</h1>
          <p className="text-gray-600 text-base mb-1">NumPy's default â€” LCG for theory, permutation to hide structure</p>
    
          <div className="flex gap-2">
            {/* Left: Full PCG64 math */}
            <div className="w-1/2 flex flex-col gap-2">
              <div className="bg-indigo-100 rounded-lg p-2 border-2 border-indigo-300">
                <p className="text-base font-bold text-indigo-800 mb-1">State and Parameters</p>
                <div className="text-sm text-indigo-700 space-y-0.5">
                  <p><strong>State:</strong> <Latex math="s_n \in \{0, 1, \ldots, 2^{128}-1\}" /> (128-bit int)</p>
                  <p><strong>Multiplier:</strong> <Latex math="a" /> with <Latex math="a \equiv 1 \pmod{4}" /></p>
                  <p><strong>Increment:</strong> <Latex math="c" /> must be odd</p>
                </div>
              </div>
    
              <div className="bg-purple-100 rounded-lg p-2 border-2 border-purple-300">
                <p className="text-base font-bold text-purple-800 mb-1">Step 1: LCG Update</p>
                <div className="bg-white rounded p-1.5 text-center">
                  <p className="text-base"><Latex math="s_{n+1} = (a \cdot s_n + c) \mod 2^{128}" /></p>
                </div>
                <p className="text-sm text-purple-600 mt-1">Full period <Latex math="2^{128}" /> by Hull-Dobell</p>
              </div>
    
              <div className="bg-green-100 rounded-lg p-2 border-2 border-green-300">
                <p className="text-base font-bold text-green-800 mb-1">Step 2: XSL RR Permutation</p>
                <div className="text-sm text-green-700 space-y-0.5">
                  <p><strong>Split:</strong> <Latex math="l_n = s_n \mod 2^{64}" />, <Latex math="h_n = \lfloor s_n / 2^{64} \rfloor" /></p>
                  <p><strong>XSL fold:</strong> <Latex math="x_n = l_n \oplus h_n" /> (XOR mixes bits)</p>
                  <p><strong>Rotation:</strong> <Latex math="r_n = s_n \gg 122" /> (top 6 bits â†’ 0..63)</p>
                  <p><strong>Rotate:</strong> <Latex math="\text{rotr64}(x, r) = (x \gg r) | (x \ll (64-r))" /></p>
                  <p><strong>Output:</strong> <Latex math="\text{permute}(s_n) = \text{rotr64}(x_n, r_n)" /></p>
                </div>
              </div>
    
              <div className="bg-amber-100 rounded-lg p-2 border-2 border-amber-300">
                <p className="text-base font-bold text-amber-800 mb-1">Step 3: Map to [0,1)</p>
                <div className="bg-white rounded p-1.5 text-center">
                  <p className="text-base"><Latex math="U_n = \text{permute}(s_n) \,/\, 2^{64}" /></p>
                </div>
                <p className="text-sm text-amber-600 mt-1">64-bit int â†’ uniform on [0,1)</p>
              </div>
            </div>
    
            {/* Right: Why it works + MT comparison */}
            <div className="w-1/2 flex flex-col gap-2">
              <div className="bg-teal-100 rounded-lg p-2 border-2 border-teal-300">
                <p className="text-base font-bold text-teal-800 mb-1">Why This Works</p>
                <div className="text-sm text-teal-700 space-y-0.5">
                  <p><strong>LCG core:</strong> Provable full period, analyzable</p>
                  <p><strong>XSL fold:</strong> Mixes high/low bits (hides structure)</p>
                  <p><strong>Data-dependent rotation:</strong> Breaks patterns</p>
                  <p><strong>128â†’64 compression:</strong> Can't reverse permutation</p>
                </div>
              </div>
    
              <div className="bg-purple-100 rounded-lg p-2 border-2 border-purple-300">
                <p className="text-base font-bold text-purple-800 mb-1">Mersenne Twister (MT19937)</p>
                <div className="text-sm text-purple-700 space-y-0.5">
                  <p>Matsumoto & Nishimura (1997) â€” dominant for 20+ years</p>
                  <p><strong>Period:</strong> <Latex math="2^{19937}-1" /> (a Mersenne prime)</p>
                  <p><strong>State:</strong> 624 Ã— 32-bit integers (2.5 KB)</p>
                  <p><strong>Still default in:</strong> R, MATLAB, Julia, many libraries</p>
                  <p className="text-purple-600">NumPy switched to PCG64 in 2019</p>
                </div>
              </div>
    
              <div className="bg-white rounded-lg border border-gray-200 p-2 flex-grow min-h-[200px]">
                <img 
                  src={comparisonUrl_slide20} 
                  alt="Generator comparison: period, state size, and statistical quality"
                  className="w-full h-full object-contain"
                />
              </div>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-gray-100 rounded-lg p-2 mt-1 border-2 border-gray-300">
            <p className="text-base text-center text-gray-700">
              <strong>Key insight:</strong> State evolution is analyzable (LCG), output appears random (permutation)
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                      SLIDE 21: STATISTICAL TESTING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const diagnosticsUrl_slide21 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_2_fig05_prng_diagnostics.png";
function Slide21_StatisticalTesting() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Statistical Testing of PRNGs</h1>
          <p className="text-gray-600 text-base mb-2">How do we know a generator is "good enough"?</p>
    
          <div className="flex gap-3">
            {/* Left: Tests and theory */}
            <div className="w-1/2 flex flex-col gap-2">
              <div className="bg-purple-100 rounded-lg p-2 border-2 border-purple-300">
                <p className="text-base font-bold text-purple-800 mb-1">Chi-Square Test</p>
                <div className="text-sm text-purple-700 space-y-0.5">
                  <p><strong>Question:</strong> Are bin counts uniform?</p>
                  <p><Latex math="\chi^2 = \sum_{i=1}^{k} \frac{(O_i - E_i)^2}{E_i}" /></p>
                  <p>Under <Latex math="H_0" />: <Latex math="\chi^2 \sim \chi^2_{k-1}" /></p>
                </div>
              </div>
    
              <div className="bg-green-100 rounded-lg p-2 border-2 border-green-300">
                <p className="text-base font-bold text-green-800 mb-1">Serial Test (d-tuples)</p>
                <div className="text-sm text-green-700 space-y-0.5">
                  <p><strong>Question:</strong> Do pairs/triples fill <Latex math="[0,1]^d" />?</p>
                  <p>Form <Latex math="(U_n, U_{n+1}, ..., U_{n+d-1})" /></p>
                  <p>Chi-square on <Latex math="k^d" /> hypercube bins</p>
                  <p className="text-green-800 font-semibold">Key independence test!</p>
                </div>
              </div>
    
              <div className="bg-amber-100 rounded-lg p-2 border-2 border-amber-300">
                <p className="text-base font-bold text-amber-800 mb-1">TestU01 BigCrush</p>
                <div className="text-sm text-amber-700 space-y-0.5">
                  <p><strong>Gold standard:</strong> 160 tests, ~8 hours</p>
                  <p>Includes: chi-sq, runs, serial, gap, birthday spacing, linear complexity, matrix rank, FFT...</p>
                </div>
              </div>
    
              <div className="bg-red-100 rounded-lg p-2 border-2 border-red-300">
                <p className="text-base font-bold text-red-800 mb-1">Results</p>
                <div className="text-sm text-red-700">
                  <div className="grid grid-cols-2 gap-x-3">
                    <div>RANDU</div><div className="text-red-600 font-bold">20+ fails</div>
                    <div>MT19937</div><div className="text-amber-600">2 fails</div>
                    <div>PCG64</div><div className="text-green-600 font-bold">0 fails âœ“</div>
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right: Figure */}
            <div className="w-1/2">
              <div className="bg-white rounded-lg border border-gray-200 p-1 h-full">
                <img 
                  src={diagnosticsUrl_slide21} 
                  alt="PRNG diagnostics: histogram, lag plot, running mean, autocorrelation"
                  className="w-full h-full object-contain"
                />
              </div>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-gray-100 rounded-lg p-2 mt-2 border-2 border-gray-300">
            <p className="text-base text-center text-gray-700">
              <strong>Rule:</strong> Use generators that pass BigCrush | Passing â‰  proving randomness (just no known flaws)
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                  SLIDE 22: SEEDS AND PARALLEL STREAMS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide22_SeedsAndParallelStreams() {
  return (
    <div className="flex flex-col h-full -mt-3">
          <h1 className="text-xl font-bold text-gray-900 mb-0">Seeds, NumPy API, and Parallel Streams</h1>
          <p className="text-gray-600 text-xs mb-1">Reproducibility and multi-core simulation done right</p>
    
          <div className="flex gap-2 flex-1 min-h-0">
            {/* Left column: Sequential API */}
            <div className="w-1/2 flex flex-col gap-1.5">
              {/* Old vs New API */}
              <div className="grid grid-cols-2 gap-1.5">
                <div className="bg-red-100 rounded-lg p-1.5 border-2 border-red-300">
                  <p className="text-sm font-bold text-red-800 mb-1">Old API (Avoid)</p>
                  <div className="bg-white rounded p-1">
                    <pre className="text-xs text-red-700 overflow-x-auto">{`np.random.seed(42)
    x = np.random.normal()`}</pre>
                  </div>
                  <p className="text-xs text-red-600 mt-1">Global state, not thread-safe</p>
                </div>
    
                <div className="bg-green-100 rounded-lg p-1.5 border-2 border-green-300">
                  <p className="text-sm font-bold text-green-800 mb-1">New API (Use)</p>
                  <div className="bg-white rounded p-1">
                    <pre className="text-xs text-green-700 overflow-x-auto">{`rng = default_rng(42)
    x = rng.normal()`}</pre>
                  </div>
                  <p className="text-xs text-green-600 mt-1">Explicit, isolated, safe</p>
                </div>
              </div>
    
              {/* Best practice pattern */}
              <div className="bg-indigo-100 rounded-lg p-1.5 border-2 border-indigo-300">
                <p className="text-sm font-bold text-indigo-800 mb-1">Best Practice: Pass rng to Functions</p>
                <div className="bg-white rounded p-1">
                  <pre className="text-xs text-indigo-700 overflow-x-auto">{`from numpy.random import default_rng
    
    def simulate(n, rng):
        """Explicit random state."""
        return rng.exponential(1.0, n)
    
    rng = default_rng(42)  # Create once
    result = simulate(1000, rng)  # Pass everywhere`}</pre>
                </div>
              </div>
    
              {/* Why seeds matter */}
              <div className="bg-amber-50 rounded-lg p-1.5 border border-amber-200">
                <p className="text-sm font-bold text-amber-800 mb-1">Why Seeds Matter</p>
                <div className="text-xs text-amber-700 space-y-0.5">
                  <p><strong>Reproducibility:</strong> Same seed = same sequence</p>
                  <p><strong>Debugging:</strong> Reproduce exact failure</p>
                  <p><strong>Comparison:</strong> Same inputs for both methods</p>
                </div>
              </div>
    
              {/* Guidelines */}
              <div className="bg-gray-100 rounded-lg p-1.5 border border-gray-300">
                <p className="text-sm font-bold text-gray-800 mb-1">Guidelines</p>
                <div className="text-xs text-gray-700 space-y-0.5">
                  <p>1. Document seeds in code/papers</p>
                  <p>2. Run multiple seeds, report variance</p>
                  <p>3. Accept rng as function parameter</p>
                </div>
              </div>
            </div>
    
            {/* Right column: Parallel */}
            <div className="w-1/2 flex flex-col gap-1.5">
              {/* Parallel problem */}
              <div className="bg-red-50 rounded-lg p-1.5 border border-red-200">
                <p className="text-sm font-bold text-red-800 mb-1">Parallel Problem</p>
                <div className="bg-white rounded p-1">
                  <pre className="text-xs text-red-700">{`# WRONG: Worker i uses seed i
    rng = default_rng(i)  # May overlap!`}</pre>
                </div>
                <p className="text-xs text-red-600 mt-1">Streams may overlap or correlate between workers</p>
              </div>
    
              {/* spawn() solution */}
              <div className="bg-teal-100 rounded-lg p-1.5 border-2 border-teal-300">
                <p className="text-sm font-bold text-teal-800 mb-1">Solution: spawn() (Recommended)</p>
                <div className="bg-white rounded p-1">
                  <pre className="text-xs text-teal-700 overflow-x-auto">{`from numpy.random import SeedSequence, default_rng
    
    ss = SeedSequence(42)  # Master seed
    child_seeds = ss.spawn(num_workers)
    rngs = [default_rng(s) for s in child_seeds]
    # Give each worker its own rng`}</pre>
                </div>
                <p className="text-xs text-teal-600 mt-1">Cryptographic hashing ensures independence</p>
              </div>
    
              {/* jumped() alternative */}
              <div className="bg-purple-100 rounded-lg p-1.5 border-2 border-purple-300">
                <p className="text-sm font-bold text-purple-800 mb-1">Alternative: jumped()</p>
                <div className="bg-white rounded p-1">
                  <pre className="text-xs text-purple-700 overflow-x-auto">{`rng = default_rng(42)
    rng_w1 = rng.jumped()    # 2^128 ahead
    rng_w2 = rng.jumped(2)   # 2*2^128 ahead`}</pre>
                </div>
                <p className="text-xs text-purple-600 mt-1">Guaranteed non-overlapping blocks</p>
              </div>
    
              {/* Comparison table */}
              <div className="bg-cyan-50 rounded-lg p-1.5 border border-cyan-200">
                <p className="text-sm font-bold text-cyan-800 mb-1">spawn() vs jumped()</p>
                <table className="text-xs text-cyan-700 w-full">
                  <thead>
                    <tr className="border-b border-cyan-300">
                      <th className="text-left py-0.5">Method</th>
                      <th className="text-left py-0.5">Pros</th>
                      <th className="text-left py-0.5">Use When</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr><td>spawn()</td><td>Flexible, hierarchical</td><td>Most cases</td></tr>
                    <tr><td>jumped()</td><td>Math guarantee</td><td>Fixed workers</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
    
          {/* Bottom: Golden rule */}
          <div className="bg-gradient-to-r from-green-100 to-teal-100 rounded-lg p-1.5 border-2 border-green-300 mt-1.5 flex-shrink-0">
            <p className="text-sm text-center text-gray-800">
              <strong>Golden Rule:</strong> <code className="bg-white px-1 rounded text-xs">rng = default_rng(seed)</code> at entry point | 
              Pass <code className="bg-white px-1 rounded text-xs">rng</code> to functions | 
              Use <code className="bg-white px-1 rounded text-xs">spawn()</code> for parallel
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                        SLIDE 23: UNIFORM SUMMARY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide23_UniformSummary() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Section 2.2 Summary</h1>
          <p className="text-gray-600 text-base mb-2">Uniform Random Variates: Key Takeaways</p>
    
          <div className="flex gap-3">
            {/* Left: What we learned */}
            <div className="w-1/2 flex flex-col gap-2">
              <div className="bg-indigo-100 rounded-lg p-3 border-2 border-indigo-300">
                <p className="text-base font-bold text-indigo-800 mb-2">Key Concepts</p>
                <div className="space-y-1 text-sm text-indigo-700">
                  <div className="bg-white rounded p-2">
                    <p><strong>U(0,1):</strong> Universal source for all distributions</p>
                  </div>
                  <div className="bg-white rounded p-2">
                    <p><strong>PRNGs:</strong> Deterministic yet statistically random</p>
                  </div>
                  <div className="bg-white rounded p-2">
                    <p><strong>LCGs:</strong> Simple, fast, but lattice structure</p>
                  </div>
                  <div className="bg-white rounded p-2">
                    <p><strong>Modern:</strong> PCG64, MT pass rigorous tests</p>
                  </div>
                </div>
              </div>
    
              <div className="bg-purple-50 rounded-lg p-3 border border-purple-200">
                <p className="text-base font-bold text-purple-800 mb-2">PRNG Selection</p>
                <div className="text-sm text-purple-700 space-y-1">
                  <p><strong>Default:</strong> default_rng() â†’ PCG64</p>
                  <p><strong>Legacy:</strong> MT19937 still fine</p>
                  <p><strong>Crypto:</strong> secrets module only</p>
                </div>
              </div>
            </div>
    
            {/* Right: Practical rules */}
            <div className="w-1/2 flex flex-col gap-2">
              <div className="bg-green-100 rounded-lg p-3 border-2 border-green-300">
                <p className="text-base font-bold text-green-800 mb-2">Practical Rules</p>
                <div className="text-sm text-green-700 space-y-2">
                  <div className="bg-white rounded p-2 flex items-start gap-2">
                    <span className="text-green-600 font-bold">âœ“</span>
                    <span>Use <code className="bg-green-50 px-1">default_rng(seed)</code></span>
                  </div>
                  <div className="bg-white rounded p-2 flex items-start gap-2">
                    <span className="text-green-600 font-bold">âœ“</span>
                    <span>Pass rng to functions</span>
                  </div>
                  <div className="bg-white rounded p-2 flex items-start gap-2">
                    <span className="text-green-600 font-bold">âœ“</span>
                    <span>spawn() for parallel</span>
                  </div>
                  <div className="bg-white rounded p-2 flex items-start gap-2">
                    <span className="text-green-600 font-bold">âœ“</span>
                    <span>Document your seeds</span>
                  </div>
                </div>
              </div>
    
              <div className="bg-amber-100 rounded-lg p-3 border-2 border-amber-300">
                <p className="text-base font-bold text-amber-800 mb-2">Coming Next: Â§2.3</p>
                <p className="text-sm text-amber-700">We have U(0,1). Now transform to ANY distribution!</p>
                <div className="bg-white rounded p-2 mt-2 text-center">
                  <p className="text-base"><Latex math="U \sim U(0,1) \;\Rightarrow\; F^{-1}(U) \sim F" /></p>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-gray-100 rounded-lg p-2 mt-3 border-2 border-gray-300">
            <p className="text-base text-center text-gray-700">
              <strong>Â§2.2:</strong> Generate U(0,1) | <strong>Â§2.3:</strong> Transform to any F | <strong>Â§2.4-2.5:</strong> Special methods
            </p>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 24: INVERSE CDF HERO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const imageUrl_slide24 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_3_fig01_inverse_cdf_method.png";
function Slide24_InverseCDFHero() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-0">The Inverse CDF Method</h1>
          <p className="text-gray-600 text-sm mb-2">Section 2.3: Transforming uniforms into any distribution</p>
    
          {/* Core Formula */}
          <div className="bg-gradient-to-r from-indigo-100 via-purple-100 to-indigo-100 rounded-xl p-4 mb-3 border-2 border-indigo-300">
            <div className="flex items-center justify-center gap-4">
              <div className="bg-white rounded-lg px-4 py-2 border border-indigo-200 text-center">
                <div className="text-xs text-indigo-600 mb-1">Generate</div>
                <Latex math="U \sim \text{Uniform}(0,1)" />
              </div>
              <div className="text-3xl text-indigo-400">{"->"}</div>
              <div className="bg-white rounded-lg px-4 py-2 border border-purple-200 text-center">
                <div className="text-xs text-purple-600 mb-1">Transform</div>
                <Latex math="X = F^{-1}(U)" />
              </div>
              <div className="text-3xl text-purple-400">{"->"}</div>
              <div className="bg-white rounded-lg px-4 py-2 border border-violet-200 text-center">
                <div className="text-xs text-violet-600 mb-1">Result</div>
                <Latex math="X \sim F" />
              </div>
            </div>
          </div>
    
          {/* Image */}
          <div className="bg-white rounded-xl border border-gray-200 p-1.5 mb-2 h-140">
            <img 
              src={imageUrl_slide24} 
              alt="Inverse CDF method: 6 panels showing how uniform samples are transformed through the inverse CDF to produce samples from the target distribution"
              className="w-full h-full object-contain"
            />
          </div>
    
          {/* Bottom Properties */}
          <div className="grid grid-cols-4 gap-2 flex-shrink-0">
            <div className="bg-blue-50 rounded-lg p-2 border border-blue-200 text-center">
              <div className="text-blue-700 font-bold text-sm">Universal</div>
              <div className="text-xs text-blue-600">Works for any F</div>
            </div>
            <div className="bg-emerald-50 rounded-lg p-2 border border-emerald-200 text-center">
              <div className="text-emerald-700 font-bold text-sm">Efficient</div>
              <div className="text-xs text-emerald-600">{"O(1) when F_inv closed-form"}</div>
            </div>
            <div className="bg-purple-50 rounded-lg p-2 border border-purple-200 text-center">
              <div className="text-purple-700 font-bold text-sm">Foundational</div>
              <div className="text-xs text-purple-600">Basis for other methods</div>
            </div>
            <div className="bg-rose-50 rounded-lg p-2 border border-rose-200 text-center">
              <div className="text-rose-700 font-bold text-sm">Limited</div>
              <div className="text-xs text-rose-600">{"Needs tractable F_inv"}</div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                              SLIDE 25: CDF
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide25_CDF() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-xl font-bold text-gray-900 mb-0">The Cumulative Distribution Function</h1>
          <p className="text-gray-600 text-sm mb-1">Foundation of the inversion method</p>
    
          {/* Definition + Properties Row */}
          <div className="grid grid-cols-2 gap-2 mb-1">
            <div className="bg-gradient-to-r from-indigo-100 to-purple-100 rounded-lg p-2 border-2 border-indigo-300">
              <div className="font-bold text-indigo-800 text-xs mb-1">Definition</div>
              <div className="bg-white rounded p-1.5 text-center">
                <Latex math="F_X(x) = P(X \leq x)" />
              </div>
            </div>
            <div className="grid grid-cols-3 gap-1">
              <div className="bg-purple-50 rounded p-2.5 border border-purple-200 text-center">
                <div className="text-xs text-purple-700 font-semibold">Monotone</div>
                <div className="text-xs text-purple-600">non-decreasing</div>
              </div>
              <div className="bg-emerald-50 rounded p-2.5 border border-emerald-200 text-center">
                <div className="text-xs text-emerald-700 font-semibold">Right-continuous</div>
                <div className="text-xs text-emerald-600">continuity from right</div>
              </div>
              <div className="bg-blue-50 rounded p-2.5 border border-blue-200 text-center">
                <div className="text-xs text-blue-700 font-semibold">Bounds</div>
                <div className="text-xs text-blue-600">bounded between 0 and 1</div>
              </div>
            </div>
          </div>
    
          {/* Continuous vs Discrete Side by Side */}
          <div className="grid grid-cols-2 gap-2 flex-1 mb-1 min-h-0">
            {/* Continuous */}
            <div className="bg-purple-50 rounded-xl p-2 border border-purple-200 flex flex-col">
              <div className="font-bold text-purple-800 text-sm mb-1">Continuous: Algebra Problem</div>
              <div className="bg-white rounded p-1 mb-1 text-center text-sm">
                <Latex math="F(x) = \int_{-\infty}^{x} f(t)\, dt" />
              </div>
              <div className="flex-1 flex items-center justify-center min-h-28">
                <svg viewBox="0 0 140 95" className="w-full h-full">
                  <defs>
                    <linearGradient id="cdfGrad25" x1="0%" y1="100%" x2="100%" y2="0%">
                      <stop offset="0%" stopColor="#c4b5fd"/>
                      <stop offset="100%" stopColor="#7c3aed"/>
                    </linearGradient>
                  </defs>
                  {/* Axes */}
                  <line x1="20" y1="80" x2="130" y2="80" stroke="#374151" strokeWidth="1.5"/>
                  <line x1="20" y1="80" x2="20" y2="10" stroke="#374151" strokeWidth="1.5"/>
                  {/* Axis labels */}
                  <text x="132" y="83" fontSize="10" fill="#374151">x</text>
                  <text x="12" y="15" fontSize="10" fill="#374151">1</text>
                  <text x="12" y="83" fontSize="10" fill="#374151">0</text>
                  {/* Smooth CDF curve */}
                  <path d="M 20 77 Q 45 77 60 65 Q 80 45 95 28 Q 110 15 128 13" 
                        fill="none" stroke="url(#cdfGrad25)" strokeWidth="3"/>
                  {/* Horizontal line at u */}
                  <line x1="20" y1="45" x2="82" y2="45" stroke="#ef4444" strokeWidth="2" strokeDasharray="4,2"/>
                  <line x1="82" y1="45" x2="82" y2="80" stroke="#ef4444" strokeWidth="2" strokeDasharray="4,2"/>
                  <circle cx="82" cy="45" r="4" fill="#ef4444"/>
                  {/* Labels */}
                  <text x="10" y="48" fontSize="11" fill="#ef4444" fontWeight="bold">u</text>
                  <text x="76" y="92" fontSize="11" fill="#ef4444" fontWeight="bold">x*</text>
                  <text x="88" y="38" fontSize="10" fill="#7c3aed" fontWeight="bold">unique!</text>
                </svg>
              </div>
              <div className="bg-white rounded p-1 text-xs text-purple-700 text-center">
                <strong>Solve:</strong> F(x) = u for x
              </div>
            </div>
    
            {/* Discrete */}
            <div className="bg-teal-50 rounded-xl p-2 border border-teal-200 flex flex-col">
              <div className="font-bold text-teal-800 text-sm mb-1">Discrete: Search Problem</div>
              <div className="bg-white rounded p-1 mb-1 text-center text-sm">
                <Latex math="F(x) = \sum_{x_i \leq x} p_i" />
              </div>
              <div className="flex-1 flex items-center justify-center min-h-28">
                <svg viewBox="0 0 140 95" className="w-full h-full">
                  {/* Axes */}
                  <line x1="20" y1="80" x2="130" y2="80" stroke="#374151" strokeWidth="1.5"/>
                  <line x1="20" y1="80" x2="20" y2="10" stroke="#374151" strokeWidth="1.5"/>
                  {/* Axis labels */}
                  <text x="132" y="83" fontSize="10" fill="#374151">x</text>
                  <text x="12" y="15" fontSize="10" fill="#374151">1</text>
                  <text x="12" y="83" fontSize="10" fill="#374151">0</text>
                  
                  {/* Step function - 4 steps for discrete distribution */}
                  <path d="M 20 80 L 38 80 L 38 60 L 65 60 L 65 38 L 98 38 L 98 18 L 128 18" 
                        fill="none" stroke="#0d9488" strokeWidth="3"/>
                  
                  {/* Open circles (exclusive) at step bottoms */}
                  <circle cx="38" cy="80" r="3.5" fill="white" stroke="#0d9488" strokeWidth="2"/>
                  <circle cx="65" cy="60" r="3.5" fill="white" stroke="#0d9488" strokeWidth="2"/>
                  <circle cx="98" cy="38" r="3.5" fill="white" stroke="#0d9488" strokeWidth="2"/>
                  
                  {/* Filled circles (inclusive) at step tops */}
                  <circle cx="38" cy="60" r="3.5" fill="#0d9488"/>
                  <circle cx="65" cy="38" r="3.5" fill="#0d9488"/>
                  <circle cx="98" cy="18" r="3.5" fill="#0d9488"/>
                  
                  {/* Red dashed line: u at the level of F(x2) = solid dot */}
                  <line x1="20" y1="38" x2="65" y2="38" stroke="#ef4444" strokeWidth="2" strokeDasharray="4,2"/>
                  <line x1="65" y1="38" x2="65" y2="80" stroke="#ef4444" strokeWidth="2" strokeDasharray="4,2"/>
                  
                  {/* Highlight the answer point */}
                  <circle cx="65" cy="38" r="6" fill="none" stroke="#ef4444" strokeWidth="2"/>
                  
                  {/* Labels */}
                  <text x="10" y="41" fontSize="11" fill="#ef4444" fontWeight="bold">u</text>
                  <text x="33" y="92" fontSize="10" fill="#0d9488">x1</text>
                  <text x="58" y="92" fontSize="10" fill="#ef4444" fontWeight="bold">x2</text>
                  <text x="93" y="92" fontSize="10" fill="#0d9488">x3</text>
                  {/* Show the flat region between x1 and x2 */}
                  <text x="42" y="55" fontSize="9" fill="#0d9488">flat</text>
                </svg>
              </div>
              <div className="bg-white rounded p-1 text-xs text-teal-700 text-center">
                <strong>Find:</strong> {"smallest k where F_k >= u"}
              </div>
            </div>
          </div>
    
          {/* Bottom: Key contrast */}
          <div className="grid grid-cols-2 gap-2 flex-shrink-0">
            <div className="bg-purple-100 rounded-lg p-1.5 border border-purple-300 text-center">
              <div className="text-sm text-purple-800">
                <strong>Continuous:</strong> Smooth, unique F(x)=u solution
              </div>
            </div>
            <div className="bg-teal-100 rounded-lg p-1.5 border border-teal-300 text-center">
              <div className="text-sm text-teal-800">
                <strong>Discrete:</strong> Steps, flat regions, need generalized inverse
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                      SLIDE 26: GENERALIZED INVERSE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide26_GeneralizedInverse() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-0">The Generalized Inverse</h1>
          <p className="text-gray-600 text-base mb-1">A universal definition for all distributions</p>
    
          {/* Main Definition Box */}
          <div className="bg-gradient-to-r from-amber-50 via-yellow-50 to-amber-50 rounded-lg p-2 mb-1 border-2 border-amber-400">
            <div className="font-bold text-amber-900 text-base mb-1">Definition (Generalized Inverse):</div>
            <div className="text-sm text-gray-800 mb-1">
              For a non-decreasing function <Latex math="F: \mathbb{R} \to [0,1]" />, the <strong>generalized inverse</strong> of <Latex math="F" />, denoted <Latex math="F^-" />, is:
            </div>
            <div className="bg-white rounded-lg p-2 text-center border border-amber-200">
              <Latex math="F^-(u) = \inf\{x : F(x) \geq u\}, \quad \forall u \in [0,1]" display={true} />
            </div>
          </div>
    
          {/* Proposition Box */}
          <div className="bg-blue-50 rounded-lg p-2 mb-1 border border-blue-300">
            <div className="font-bold text-blue-900 text-base mb-1">Proposition:</div>
            <div className="text-sm text-gray-800">
              Let <Latex math="F: \mathbb{R} \to [0,1]" /> be any non-decreasing, right-continuous CDF.
              If <Latex math="U \sim \mathcal{U}_{[0,1]}" /> and we set <Latex math="X = F^-(U)" />, then <Latex math="X" /> has CDF <Latex math="F" />.
            </div>
          </div>
    
          {/* Visual + Proof side by side */}
          <div className="grid grid-cols-2 gap-2 flex-1 min-h-0">
            {/* Left: Diagrams */}
            <div className="flex flex-col gap-1">
              {/* Continuous case */}
              <div className="bg-purple-50 rounded-lg p-2 border border-purple-200 flex-1">
                <div className="font-bold text-purple-900 text-sm mb-1">Continuous Case</div>
                <div className="bg-white rounded border border-purple-100 h-24 flex items-center justify-center">
                  <svg viewBox="0 0 150 80" className="w-full h-full">
                    <line x1="25" y1="68" x2="140" y2="68" stroke="#6b21a8" strokeWidth="1"/>
                    <line x1="25" y1="68" x2="25" y2="8" stroke="#6b21a8" strokeWidth="1"/>
                    <path d="M 25 65 Q 50 65 65 52 Q 90 32 105 18 Q 120 10 138 9" 
                          fill="none" stroke="#8b5cf6" strokeWidth="2.5"/>
                    {/* u horizontal to curve */}
                    <line x1="25" y1="35" x2="95" y2="35" stroke="#dc2626" strokeWidth="2"/>
                    {/* vertical dashed down */}
                    <line x1="95" y1="35" x2="95" y2="68" stroke="#dc2626" strokeWidth="2" strokeDasharray="4,2"/>
                    {/* dot at intersection */}
                    <circle cx="95" cy="35" r="4" fill="#dc2626"/>
                    <text x="14" y="38" fontSize="11" fill="#dc2626" fontWeight="bold">u</text>
                    <text x="89" y="78" fontSize="10" fill="#dc2626" fontWeight="bold">x*</text>
                    <text x="100" y="28" fontSize="10" fill="#6b21a8" fontWeight="bold">unique</text>
                  </svg>
                </div>
                <div className="text-sm text-purple-800 text-center">inf = unique solution to F(x) = u</div>
              </div>
    
              {/* Discrete case */}
              <div className="bg-teal-50 rounded-lg p-2 border border-teal-200 flex-1">
                <div className="font-bold text-teal-900 text-sm mb-1">Discrete Case</div>
                <div className="bg-white rounded border border-teal-100 h-24 flex items-center justify-center">
                  <svg viewBox="0 0 150 80" className="w-full h-full">
                    <line x1="25" y1="68" x2="140" y2="68" stroke="#0f766e" strokeWidth="1"/>
                    <line x1="25" y1="68" x2="25" y2="8" stroke="#0f766e" strokeWidth="1"/>
                    {/* Step function */}
                    <path d="M 25 68 L 50 68 L 50 48 L 85 48 L 85 25 L 120 25 L 120 12 L 138 12" 
                          fill="none" stroke="#14b8a6" strokeWidth="2.5"/>
                    {/* Open circles at bottoms */}
                    <circle cx="50" cy="68" r="3" fill="white" stroke="#14b8a6" strokeWidth="2"/>
                    <circle cx="85" cy="48" r="3" fill="white" stroke="#14b8a6" strokeWidth="2"/>
                    <circle cx="120" cy="25" r="3" fill="white" stroke="#14b8a6" strokeWidth="2"/>
                    {/* Filled circles at tops */}
                    <circle cx="50" cy="48" r="3" fill="#14b8a6"/>
                    <circle cx="85" cy="25" r="3" fill="#14b8a6"/>
                    <circle cx="120" cy="12" r="3" fill="#14b8a6"/>
                    {/* u in flat region */}
                    <line x1="25" y1="38" x2="85" y2="38" stroke="#dc2626" strokeWidth="2"/>
                    <line x1="85" y1="38" x2="85" y2="68" stroke="#dc2626" strokeWidth="2" strokeDasharray="4,2"/>
                    {/* Circle the solid dot >= u */}
                    <circle cx="85" cy="25" r="7" fill="none" stroke="#dc2626" strokeWidth="2"/>
                    <text x="14" y="41" fontSize="11" fill="#dc2626" fontWeight="bold">u</text>
                    <text x="79" y="78" fontSize="10" fill="#dc2626" fontWeight="bold">x*</text>
                    <text x="94" y="28" fontSize="9" fill="#0f766e" fontWeight="bold">{">= u"}</text>
                  </svg>
                </div>
                <div className="text-sm text-teal-800 text-center">{"inf = smallest x with F(x) >= u"}</div>
              </div>
            </div>
    
            {/* Right: Proof */}
            <div className="bg-slate-50 rounded-lg p-2 border border-slate-300 flex flex-col">
              <div className="font-bold text-slate-800 text-base mb-1">Proof:</div>
              <div className="text-sm text-slate-700 space-y-1.5 flex-1 overflow-auto">
                <div className="font-semibold text-slate-800">First, show <Latex math="F^-(u) \leq x \Leftrightarrow u \leq F(x)" />:</div>
                
                <div className="bg-white rounded p-2 border-l-3 border-indigo-400">
                  <div className="font-semibold text-indigo-800 mb-1">{"(==>)"} If <Latex math="F^-(u) \leq x" />:</div>
                  <div className="text-slate-600 space-y-0.5">
                    <div>By monotonicity: <Latex math="F(F^-(u)) \leq F(x)" /></div>
                    <div>By definition of inf: <Latex math="F(F^-(u)) \geq u" /></div>
                    <div>Therefore: <Latex math="u \leq F(x)" /></div>
                  </div>
                </div>
    
                <div className="bg-white rounded p-2 border-l-3 border-emerald-400">
                  <div className="font-semibold text-emerald-800 mb-1">{"(<==)"} If <Latex math="F(x) \geq u" />:</div>
                  <div className="text-slate-600 space-y-0.5">
                    <div>Then <Latex math="x \in \{y : F(y) \geq u\}" /></div>
                    <div>Since <Latex math="F^-(u) = \inf" /> of this set</div>
                    <div>We have: <Latex math="F^-(u) \leq x" /></div>
                  </div>
                </div>
    
                <div className="bg-amber-100 rounded p-2 border border-amber-300">
                  <div className="font-semibold text-amber-900">Thus:</div>
                  <div className="text-center text-base">
                    <Latex math="\{F^-(u) \leq x\} = \{u \leq F(x)\}" />
                  </div>
                  <div className="text-center mt-1 text-base">
                    <Latex math="P(F^-(U) \leq x) = P(U \leq F(x)) = F(x)" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                              SLIDE 27: PIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide27_PIT() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-0">The Inverse CDF Algorithm</h1>
          <p className="text-gray-600 text-base mb-2">Continuous vs. Discrete implementations</p>
    
          {/* Side by side: Continuous and Discrete */}
          <div className="grid grid-cols-2 gap-3 flex-1 min-h-0">
            
            {/* Left: Continuous Case */}
            <div className="bg-purple-50 rounded-xl p-3 border-2 border-purple-300 flex flex-col">
              <div className="flex items-center gap-2 mb-2">
                <div className="bg-purple-600 text-white text-sm font-bold px-2 py-1 rounded">CONTINUOUS</div>
                <span className="text-purple-700 text-sm font-semibold">The easy case</span>
              </div>
              
              <div className="bg-white rounded-lg p-3 mb-2 border border-purple-200">
                <div className="text-base font-semibold text-purple-900 mb-2">Algorithm:</div>
                <div className="space-y-2 text-sm">
                  <div className="flex items-start gap-2">
                    <span className="bg-purple-200 text-purple-800 font-bold w-6 h-6 rounded-full flex items-center justify-center text-xs flex-shrink-0">1</span>
                    <span className="text-purple-800">Draw <Latex math="u \sim \text{Unif}(0,1)" /></span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="bg-purple-200 text-purple-800 font-bold w-6 h-6 rounded-full flex items-center justify-center text-xs flex-shrink-0">2</span>
                    <span className="text-purple-800">Return <Latex math="x = F^{-1}(u)" /></span>
                  </div>
                </div>
              </div>
    
              <div className="bg-purple-100 rounded-lg p-2 flex-1">
                <div className="text-sm font-semibold text-purple-800 mb-1">Complexity: <span className="text-purple-600">O(1)</span></div>
                <div className="text-sm text-purple-700">
                  Just evaluate the formula! Works when <Latex math="F^{-1}" /> has closed form.
                </div>
                <div className="mt-2 text-xs text-purple-600 bg-white rounded p-1.5">
                  <strong>Examples:</strong> Exponential, Weibull, Pareto, Cauchy, Logistic
                </div>
              </div>
            </div>
    
            {/* Right: Discrete Case */}
            <div className="bg-teal-50 rounded-xl p-3 border-2 border-teal-300 flex flex-col">
              <div className="flex items-center gap-2 mb-2">
                <div className="bg-teal-600 text-white text-sm font-bold px-2 py-1 rounded">DISCRETE</div>
                <span className="text-teal-700 text-sm font-semibold">A search problem</span>
              </div>
    
              {/* Given */}
              <div className="bg-amber-50 rounded-lg p-2 mb-2 border border-amber-200">
                <div className="text-sm text-amber-900">
                  <strong>Given:</strong> <Latex math="p_j = P(X = j)" /> for <Latex math="j \in \{1, \ldots, K\}" />
                </div>
                <div className="text-sm text-amber-800 mt-1">
                  <strong>Define:</strong> <Latex math="F_i = \sum_{j=1}^{i} p_j" /> so <Latex math="F_K = 1" />
                </div>
              </div>
              
              <div className="bg-white rounded-lg p-3 mb-2 border border-teal-200">
                <div className="text-base font-semibold text-teal-900 mb-2">Algorithm:</div>
                <div className="space-y-2 text-sm">
                  <div className="flex items-start gap-2">
                    <span className="bg-teal-200 text-teal-800 font-bold w-6 h-6 rounded-full flex items-center justify-center text-xs flex-shrink-0">1</span>
                    <span className="text-teal-800">Draw <Latex math="u \sim \text{Unif}(0,1)" /></span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="bg-teal-200 text-teal-800 font-bold w-6 h-6 rounded-full flex items-center justify-center text-xs flex-shrink-0">2</span>
                    <span className="text-teal-800">Find <Latex math="i" /> such that <Latex math="F_{i-1} < u \leq F_i" /></span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="bg-teal-200 text-teal-800 font-bold w-6 h-6 rounded-full flex items-center justify-center text-xs flex-shrink-0">3</span>
                    <span className="text-teal-800">Return <Latex math="i" /></span>
                  </div>
                </div>
              </div>
    
              <div className="bg-sky-50 rounded-lg p-2 flex-1 border border-sky-200">
                <div className="text-sm font-semibold text-sky-800 mb-1">Finding index <Latex math="i" />:</div>
                <div className="space-y-0.5 text-sm text-sky-700">
                  <div>1. Linear scan: <span className="font-mono text-sky-600">O(K)</span></div>
                  <div>2. Binary search: <span className="font-mono text-sky-600">O(log K)</span></div>
                  <div>3. Alias method: <span className="font-mono text-sky-600">O(1)</span></div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom: Key Insight */}
          <div className="mt-2 bg-gradient-to-r from-indigo-100 to-violet-100 rounded-lg p-2 border border-indigo-300 flex-shrink-0">
            <div className="text-sm text-center text-indigo-800">
              <strong>Key Insight:</strong> Continuous = <em>evaluate formula</em> | Discrete = <em>search in sorted array</em>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                      SLIDE 28: GEOMETRIC INTUITION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const imageUrl_slide28 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_3_fig01_inverse_cdf_method.png";
function Slide28_GeometricIntuition() {
  return (
    <div className="flex flex-col h-full -mt-2">
          <div className="flex items-center justify-between mb-0">
            <div>
              <h1 className="text-2xl font-bold text-gray-900">Geometric Intuition</h1>
              <p className="text-gray-600 text-base">Visualizing the transformation</p>
            </div>
            <div className="flex items-center gap-2">
              <a 
                href="https://treese41528.github.io/ComputationalDataScience/Simulations/MonteCarloSimulation/inverse_cdf_transform_general.html" 
                target="_blank" 
                rel="noopener noreferrer"
                className="flex items-center gap-1 px-3 py-1.5 bg-sky-100 hover:bg-sky-200 text-sky-800 rounded-lg text-sm font-medium transition-colors"
              >
                <span>ğŸ“Š</span>
                <span>CDF Explorer</span>
              </a>
              <a 
                href="https://treese41528.github.io/ComputationalDataScience/Simulations/MonteCarloSimulation/inverse_cdf_transform_sampling.html" 
                target="_blank" 
                rel="noopener noreferrer"
                className="flex items-center gap-1 px-3 py-1.5 bg-emerald-100 hover:bg-emerald-200 text-emerald-800 rounded-lg text-sm font-medium transition-colors"
              >
                <span>ğŸ²</span>
                <span>Sampling Demo</span>
              </a>
            </div>
          </div>
    
          {/* The Flow with Arrows */}
          <div className="bg-gradient-to-r from-indigo-100 to-purple-100 rounded-lg p-2 mb-2 mt-2 border border-indigo-300">
            <div className="flex items-center justify-center gap-2 text-sm">
              <div className="bg-white rounded-lg px-3 py-1.5 border border-indigo-200">
                <Latex math="U \sim \text{Unif}(0,1)" />
              </div>
              <span className="text-indigo-600 font-bold text-lg">{"-->"}</span>
              <div className="bg-white rounded-lg px-3 py-1.5 border border-indigo-200">
                <span className="text-indigo-700">horizontal to CDF</span>
              </div>
              <span className="text-indigo-600 font-bold text-lg">{"-->"}</span>
              <div className="bg-white rounded-lg px-3 py-1.5 border border-indigo-200">
                <span className="text-indigo-700">project down</span>
              </div>
              <span className="text-indigo-600 font-bold text-lg">{"-->"}</span>
              <div className="bg-white rounded-lg px-3 py-1.5 border border-indigo-200">
                <Latex math="X = F^{-1}(U)" />
              </div>
            </div>
          </div>
    
          {/* Large Image - constrained height */}
          <div className="bg-white rounded-xl border-2 border-gray-300 p-2 mb-2 h-130">
            <img 
              src={imageUrl_slide28} 
              alt="6-panel visualization of inverse CDF method showing uniform samples transformed through CDF to target distribution"
              className="w-full h-full object-contain"
            />
          </div>
    
          {/* Density Insight - full width now */}
          <div className="bg-emerald-50 rounded-lg p-2 border border-emerald-200 flex-shrink-0">
            <div className="font-bold text-emerald-800 text-base mb-1">Why It Works: CDF Shape Determines Density</div>
            <div className="grid grid-cols-3 gap-3 text-sm">
              <div className="bg-white rounded p-2 text-center">
                <div className="font-semibold text-emerald-700 mb-0.5">Steep Region</div>
                <div className="text-emerald-600">Large U range maps to small x range</div>
                <div className="text-emerald-800 font-semibold mt-0.5">{"-->"} High density</div>
              </div>
              <div className="bg-white rounded p-2 text-center">
                <div className="font-semibold text-amber-700 mb-0.5">Shallow Region</div>
                <div className="text-amber-600">Small U range maps to large x range</div>
                <div className="text-amber-800 font-semibold mt-0.5">{"-->"} Low density</div>
              </div>
              <div className="bg-white rounded p-2 text-center">
                <div className="font-semibold text-violet-700 mb-0.5">Jump (Discrete)</div>
                <div className="text-violet-600">All U in jump height map to same x</div>
                <div className="text-violet-800 font-semibold mt-0.5">{"-->"} Point mass</div>
              </div>
            </div>
            <div className="mt-1 text-sm text-emerald-600 text-center">
              <Latex math="f(x) = F'(x)" /> for continuous; jump height = <Latex math="P(X = x)" /> for discrete
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                          SLIDE 29: EXPONENTIAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide29_Exponential() {
  return (
    <div className="flex flex-col -mt-2">
          <h1 className="text-xl font-bold text-gray-900 mb-0">Exponential Distribution</h1>
          <p className="text-gray-600 text-sm mb-1">The "hello world" of inverse CDF sampling</p>
    
          {/* Setup - compact */}
          <div className="grid grid-cols-2 gap-2 mb-1">
            <div className="bg-blue-50 rounded-lg p-1.5 border border-blue-200">
              <div className="font-bold text-blue-800 text-xs">PDF</div>
              <div className="bg-white rounded p-1 text-center">
                <Latex math="f(x) = \lambda e^{-\lambda x},\; x \geq 0" />
              </div>
            </div>
            <div className="bg-purple-50 rounded-lg p-1.5 border border-purple-200">
              <div className="font-bold text-purple-800 text-xs">CDF</div>
              <div className="bg-white rounded p-1 text-center">
                <Latex math="F(x) = 1 - e^{-\lambda x}" />
              </div>
            </div>
          </div>
    
          {/* Derivation - compact */}
          <div className="bg-gradient-to-r from-indigo-100 via-purple-100 to-indigo-100 rounded-xl p-2 mb-1 border-2 border-indigo-300">
            <div className="font-bold text-indigo-800 text-xs mb-1 text-center">Derivation</div>
            <div className="grid grid-cols-4 gap-1 items-center text-sm">
              <div className="bg-white rounded p-1 text-center">
                <div className="text-xs text-indigo-600">F(x)=u</div>
                <Latex math="1-e^{-\lambda x}=u" />
              </div>
              <div className="bg-white rounded p-1 text-center">
                <div className="text-xs text-indigo-600">Isolate</div>
                <Latex math="e^{-\lambda x}=1-u" />
              </div>
              <div className="bg-white rounded p-1 text-center">
                <div className="text-xs text-indigo-600">Log</div>
                <Latex math="-\lambda x=\ln(1-u)" />
              </div>
              <div className="bg-white rounded p-1 text-center">
                <div className="text-xs text-indigo-600">Solve</div>
                <Latex math="x=\frac{-\ln(1-u)}{\lambda}" />
              </div>
            </div>
          </div>
    
          {/* Result with simplification */}
          <div className="grid grid-cols-2 gap-2 mb-1">
            <div className="bg-emerald-50 rounded-lg p-1.5 border-2 border-emerald-300">
              <div className="font-bold text-emerald-800 text-xs">Inverse CDF</div>
              <div className="bg-white rounded p-1 text-center">
                <Latex math="F^{-1}(u) = \frac{-\ln(1-u)}{\lambda}" />
              </div>
            </div>
            <div className="bg-amber-50 rounded-lg p-1.5 border-2 border-amber-300">
              <div className="font-bold text-amber-800 text-xs">Simplified (U ~ 1-U)</div>
              <div className="bg-white rounded p-1 text-center">
                <Latex math="F^{-1}(U) = \frac{-\ln(U)}{\lambda}" />
              </div>
              <div className="text-xs text-amber-600 text-center">Preferred form!</div>
            </div>
          </div>
    
          {/* Code Implementation */}
          <div className="bg-slate-900 rounded-xl p-2 mb-1 flex-1 min-h-0">
            <pre className="text-xs text-green-400 font-mono overflow-x-auto">
    {`def sample_exp(lam, n, rng):
        """O(1) per sample: 1 uniform + 1 log + 1 div"""
        return -np.log(rng.random(n)) / lam
    
    # Verify: E[X]=1/lam=0.5, Var(X)=1/lam^2=0.25
    rng = np.random.default_rng(42)
    X = sample_exp(2.0, 10000, rng)
    print(f"Mean: {X.mean():.4f} (theory: 0.5000)")
    print(f"Var:  {X.var():.4f} (theory: 0.2500)")`}
            </pre>
          </div>
    
          {/* Bottom: Properties */}
          <div className="grid grid-cols-4 gap-1 flex-shrink-0">
            <div className="bg-teal-50 rounded-lg p-1 border border-teal-200 text-center">
              <div className="text-teal-700 font-bold text-xs">Time</div>
              <div className="text-xs text-teal-600">O(1)</div>
            </div>
            <div className="bg-rose-50 rounded-lg p-1 border border-rose-200 text-center">
              <div className="text-rose-700 font-bold text-xs">Ops</div>
              <div className="text-xs text-rose-600">3 FLOPs</div>
            </div>
            <div className="bg-violet-50 rounded-lg p-1 border border-violet-200 text-center">
              <div className="text-violet-700 font-bold text-xs">Space</div>
              <div className="text-xs text-violet-600">O(1)</div>
            </div>
            <div className="bg-blue-50 rounded-lg p-1 border border-blue-200 text-center">
              <div className="text-blue-700 font-bold text-xs">Use</div>
              <div className="text-xs text-blue-600">Queues</div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                        SLIDE 30: MORE CONTINUOUS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide30_MoreContinuous() {
  return (
    <div className="flex flex-col -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-0">More Continuous Distributions</h1>
          <p className="text-gray-600 text-base mb-2">Four distributions with closed-form inverses</p>
    
          {/* 2x2 Grid with larger text and full derivations */}
          <div className="grid grid-cols-2 gap-3 flex-1 min-h-0">
            {/* Weibull */}
            <div className="bg-purple-50 rounded-xl p-3 border border-purple-200 flex flex-col">
              <div className="font-bold text-purple-800 text-lg mb-1">Weibull(k, <Latex math="\lambda" />)</div>
              <div className="bg-white rounded p-2 space-y-1">
                <div className="text-base"><Latex math="F(x) = \begin{cases} 0 & x < 0 \\ 1 - e^{-(x/\lambda)^k} & x \geq 0 \end{cases}" /></div>
                <div className="border-t border-purple-200 pt-1 text-base">
                  <div className="text-purple-600 text-sm">Derivation:</div>
                  <div><Latex math="e^{-(x/\lambda)^k} = 1-u" /></div>
                  <div><Latex math="(x/\lambda)^k = -\ln(1-u)" /></div>
                </div>
                <div className="border-t border-purple-300 pt-1 bg-purple-100 -mx-2 px-2 -mb-2 pb-1 rounded-b text-base">
                  <Latex math="F^{-1}(u) = \lambda(-\ln(1-u))^{1/k}" />
                </div>
              </div>
              <div className="text-sm text-purple-700 mt-2">
                <strong>Use:</strong> Reliability. <Latex math="k=1" /> = Exponential
              </div>
            </div>
    
            {/* Pareto */}
            <div className="bg-emerald-50 rounded-xl p-3 border border-emerald-200 flex flex-col">
              <div className="font-bold text-emerald-800 text-lg mb-1">Pareto(<Latex math="\alpha" />, <Latex math="x_m" />)</div>
              <div className="bg-white rounded p-2 space-y-1">
                <div className="text-base"><Latex math="F(x) = \begin{cases} 0 & x < x_m \\ 1 - (x_m/x)^\alpha & x \geq x_m \end{cases}" /></div>
                <div className="border-t border-emerald-200 pt-1 text-base">
                  <div className="text-emerald-600 text-sm">Derivation:</div>
                  <div><Latex math="(x_m/x)^\alpha = 1-u" /></div>
                  <div><Latex math="x = x_m (1-u)^{-1/\alpha}" /></div>
                </div>
                <div className="border-t border-emerald-300 pt-1 bg-emerald-100 -mx-2 px-2 -mb-2 pb-1 rounded-b text-base">
                  <Latex math="F^{-1}(u) = x_m(1-u)^{-1/\alpha}" />
                </div>
              </div>
              <div className="text-sm text-emerald-700 mt-2">
                <strong>Use:</strong> Income, city sizes (80-20 rule)
              </div>
            </div>
    
            {/* Cauchy */}
            <div className="bg-amber-50 rounded-xl p-3 border border-amber-200 flex flex-col">
              <div className="font-bold text-amber-800 text-lg mb-1">Cauchy(<Latex math="\mu" />, <Latex math="\sigma" />)</div>
              <div className="bg-white rounded p-2 space-y-1">
                <div className="text-base"><Latex math="F(x) = \frac{1}{\pi}\arctan\frac{x-\mu}{\sigma} + \frac{1}{2}" /></div>
                <div className="border-t border-amber-200 pt-1 text-base">
                  <div className="text-amber-600 text-sm">Derivation:</div>
                  <div><Latex math="\arctan(\cdot) = \pi(u-\tfrac{1}{2})" /></div>
                  <div><Latex math="\frac{x-\mu}{\sigma} = \tan(\pi(u-\tfrac{1}{2}))" /></div>
                </div>
                <div className="border-t border-amber-300 pt-1 bg-amber-100 -mx-2 px-2 -mb-2 pb-1 rounded-b text-base">
                  <Latex math="F^{-1}(u) = \mu + \sigma\tan(\pi(u-\tfrac{1}{2}))" />
                </div>
              </div>
              <div className="text-sm text-amber-700 mt-2">
                <strong>Warning:</strong> No mean/variance! LLN fails
              </div>
            </div>
    
            {/* Logistic */}
            <div className="bg-blue-50 rounded-xl p-3 border border-blue-200 flex flex-col">
              <div className="font-bold text-blue-800 text-lg mb-1">Logistic(<Latex math="\mu" />, s)</div>
              <div className="bg-white rounded p-2 space-y-1">
                <div className="text-base"><Latex math="F(x) = \frac{1}{1 + e^{-(x-\mu)/s}}" /></div>
                <div className="border-t border-blue-200 pt-1 text-base">
                  <div className="text-blue-600 text-sm">Derivation:</div>
                  <div><Latex math="e^{-(x-\mu)/s} = \frac{1-u}{u}" /></div>
                  <div><Latex math="-\frac{x-\mu}{s} = \ln\frac{1-u}{u}" /></div>
                </div>
                <div className="border-t border-blue-300 pt-1 bg-blue-100 -mx-2 px-2 -mb-2 pb-1 rounded-b text-base">
                  <Latex math="F^{-1}(u) = \mu + s\ln\frac{u}{1-u}" />
                </div>
              </div>
              <div className="text-sm text-blue-700 mt-2">
                <strong>Use:</strong> Logistic regression (logit = <Latex math="F^{-1}" />)
              </div>
            </div>
          </div>
    
          {/* Bottom: What about Normal? */}
          <div className="mt-2 bg-rose-50 rounded-lg p-3 border-2 border-rose-300 flex-shrink-0">
            <div className="flex items-center gap-3">
              <div className="text-3xl text-rose-600">âš </div>
              <div className="flex-1">
                <div className="font-bold text-rose-800 text-lg">Normal has NO closed-form inverse</div>
                <div className="text-base text-rose-700">
                  <Latex math="\Phi(x) = \int_{-\infty}^{x} \frac{1}{\sqrt{2\pi}}e^{-t^2/2}dt" /> cannot be inverted algebraically. Need Box-Muller or Ziggurat.
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                      SLIDE 31: NUMERICAL PRECISION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide31_NumericalPrecision() {
  return (
    <div className="flex flex-col -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-0">Numerical Precision</h1>
          <p className="text-gray-600 text-base mb-2">Critical edge cases when <Latex math="U" /> is near 0 or 1</p>
    
          {/* Three Problems - Larger */}
          <div className="grid grid-cols-3 gap-3 mb-3">
            <div className="bg-blue-50 rounded-lg p-3 border border-blue-200">
              <div className="font-bold text-blue-800 text-base mb-2">1. Boundary Values</div>
              <div className="text-sm text-blue-700 space-y-1">
                <div><Latex math="-\ln(U)" /> fails at <Latex math="U=0" /></div>
                <div><Latex math="-\ln(1-U)" /> fails at <Latex math="U=1" /></div>
              </div>
              <div className="text-sm text-blue-600 mt-2 bg-blue-100 rounded p-1.5">
                <strong>Fix:</strong> PRNGs return <Latex math="U \in (0,1)" /> â€” neither boundary hit
              </div>
            </div>
            <div className="bg-purple-50 rounded-lg p-3 border border-purple-200">
              <div className="font-bold text-purple-800 text-base mb-2">2. Cancellation</div>
              <div className="text-base text-purple-700 space-y-1">
                <div><Latex math="u = 0.9999999999999999" /></div>
                <div><Latex math="1-u \approx 10^{-16}" /> (1 digit!)</div>
              </div>
              <div className="text-sm text-purple-600 mt-2 bg-purple-100 rounded p-1.5">
                <strong>Fix:</strong> Symmetry avoids <Latex math="1-u" />
              </div>
            </div>
            <div className="bg-amber-50 rounded-lg p-3 border-2 border-amber-400">
              <div className="font-bold text-amber-800 text-base mb-2">3. Granularity âš </div>
              <div className="text-base text-amber-700 space-y-1">
                <div>Floats sparse near 1</div>
                <div>Dense near 0</div>
              </div>
              <div className="text-sm text-amber-700 mt-2 bg-amber-100 rounded p-1.5">
                <strong>Fix:</strong> Symmetry <Latex math="-\ln(U)" />
              </div>
            </div>
          </div>
    
          {/* Visual: Float spacing - improved */}
          <div className="bg-white rounded-lg border border-gray-300 p-3 mb-3">
            <div className="font-semibold text-gray-800 text-base mb-2">Float64: How close can <Latex math="U" /> get to each boundary?</div>
            <div className="grid grid-cols-2 gap-4">
              {/* Left: near 0 */}
              <div className="bg-green-50 rounded-lg p-2 border border-green-200">
                <div className="text-sm font-semibold text-green-800 mb-1">Smallest positive float</div>
                <div className="text-lg text-green-700 font-mono text-center my-2">
                  <Latex math="U_{\min} \approx 10^{-324}" />
                </div>
                <div className="text-xs text-green-700">
                  Floats use <em>relative</em> precision, so tiny values like <Latex math="10^{-300}" /> are representable.
                </div>
                <div className="text-sm text-green-600 mt-2 bg-green-100 rounded p-1 text-center">
                  <Latex math="-\ln(10^{-324}) \approx 745" />
                </div>
              </div>
              
              {/* Right: near 1 */}
              <div className="bg-amber-50 rounded-lg p-2 border border-amber-200">
                <div className="text-sm font-semibold text-amber-800 mb-1">Closest float to 1 (below)</div>
                <div className="text-lg text-amber-700 font-mono text-center my-2">
                  <Latex math="1 - \varepsilon \approx 1 - 10^{-16}" />
                </div>
                <div className="text-xs text-amber-700">
                  Machine epsilon <Latex math="\varepsilon = 2^{-52}" /> is the gap between 1 and the next float.
                </div>
                <div className="text-sm text-amber-600 mt-2 bg-amber-100 rounded p-1 text-center">
                  <Latex math="-\ln(10^{-16}) \approx 37" />
                </div>
              </div>
            </div>
            <div className="mt-2 text-sm text-gray-700 bg-gray-100 rounded p-2">
              <strong>The asymmetry:</strong> <Latex math="U" /> can get <Latex math="10^{308}" /> times closer to 0 than to 1. 
              Use <Latex math="-\ln(U)" /> to exploit this.
            </div>
          </div>
    
          {/* Code Comparison - Simplified */}
          <div className="bg-slate-900 rounded-xl p-3 mb-3">
            <div className="grid grid-cols-2 gap-6 font-mono">
              <div>
                <div className="text-red-400 mb-2 font-bold text-base flex items-center gap-2">
                  <span className="text-xl">âœ—</span> Naive
                </div>
                <pre className="text-slate-300 text-base">x = -np.log(1-u)/lam</pre>
                <div className="text-red-300 text-sm mt-2 space-y-1">
                  <div>â€¢ <code>1-u</code> loses digits when <code>u</code> near 1</div>
                  <div>â€¢ <code>u</code> can't get close to 1 (sparse floats)</div>
                </div>
              </div>
              <div>
                <div className="text-green-400 mb-2 font-bold text-base flex items-center gap-2">
                  <span className="text-xl">âœ“</span> Use Symmetry
                </div>
                <pre className="text-slate-300 text-base">x = -np.log(u)/lam</pre>
                <div className="text-green-300 text-sm mt-2 space-y-1">
                  <div>â€¢ No subtraction, no cancellation</div>
                  <div>â€¢ <code>u</code> CAN get close to 0 (dense floats)</div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Tail reach comparison */}
          <div className="bg-gradient-to-r from-gray-50 to-white rounded-lg border border-gray-300 p-3 mb-2">
            <div className="font-semibold text-gray-800 text-base mb-2">Maximum Achievable <Latex math="X" /> (Exponential with <Latex math="\lambda=1" />)</div>
            <div className="space-y-2">
              <div className="flex items-center gap-3">
                <div className="w-24 text-right text-sm text-gray-600"><Latex math="-\ln(1-U)" />:</div>
                <div className="h-7 bg-red-400 rounded flex items-center justify-end pr-2" style={{width: '20%'}}>
                  <span className="text-white font-bold text-sm">~37</span>
                </div>
                <span className="text-sm text-gray-500">Limited by <Latex math="\varepsilon_{\text{mach}} \approx 10^{-16}" /></span>
              </div>
              <div className="flex items-center gap-3">
                <div className="w-24 text-right text-sm text-gray-600"><Latex math="-\ln(U)" />:</div>
                <div className="h-7 bg-green-500 rounded flex items-center justify-end pr-2" style={{width: '100%'}}>
                  <span className="text-white font-bold text-sm">~745</span>
                </div>
                <span className="text-sm text-gray-500">Uses smallest float <Latex math="\approx 10^{-324}" /></span>
              </div>
            </div>
          </div>
    
          {/* Bottom: Rule */}
          <div className="bg-gradient-to-r from-emerald-100 to-teal-100 rounded-lg p-3 border-2 border-emerald-400 flex-shrink-0">
            <div className="text-base text-center text-emerald-800">
              <strong>Rule:</strong> When <Latex math="F^{-1}(u)" /> contains <Latex math="\ln(1-u)" />, exploit symmetry <Latex math="U \stackrel{d}{=} 1-U" /> to use <Latex math="\ln(u)" /> instead
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 32: DISCRETE OVERVIEW
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide32_DiscreteOverview() {
  return (
    <div className="flex flex-col -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-0">Discrete Distributions</h1>
          <p className="text-gray-600 text-base mb-2">From algebra to search â€” distribution shape affects performance</p>
    
          {/* The Problem */}
          <div className="bg-gradient-to-r from-indigo-100 to-purple-100 rounded-xl p-3 mb-3 border-2 border-indigo-300">
            <div className="flex items-center gap-4">
              <div className="flex-1">
                <div className="font-bold text-indigo-800 text-base mb-1">The Discrete Inverse Problem</div>
                <div className="text-base text-indigo-700">Find smallest <Latex math="k" /> where <Latex math="F_k \geq U" /> â€” this is a <strong>search</strong></div>
              </div>
              <div className="bg-white rounded-lg p-2 border border-indigo-300">
                <Latex math="F^{-1}(U) = \min\{k : F_k \geq U\}" />
              </div>
            </div>
          </div>
    
          {/* Distribution Shapes - Why it matters */}
          <div className="bg-white rounded-lg border border-gray-300 p-3 mb-3">
            <div className="font-semibold text-gray-800 text-base mb-2">Where is the probability mass? This determines search efficiency.</div>
            <div className="grid grid-cols-5 gap-3">
              {/* Right-skewed (mass on left) */}
              <div className="text-center">
                <svg viewBox="0 0 60 40" className="w-full h-12">
                  <rect x="5" y="5" width="8" height="30" fill="#10b981" opacity="0.8"/>
                  <rect x="15" y="15" width="8" height="20" fill="#10b981" opacity="0.6"/>
                  <rect x="25" y="25" width="8" height="10" fill="#10b981" opacity="0.4"/>
                  <rect x="35" y="30" width="8" height="5" fill="#10b981" opacity="0.3"/>
                  <rect x="45" y="33" width="8" height="2" fill="#10b981" opacity="0.2"/>
                </svg>
                <div className="text-sm text-green-700 font-semibold">Right-skewed</div>
                <div className="text-xs text-green-600">Geometric, Poisson</div>
                <div className="text-xs text-green-700 mt-1 bg-green-50 rounded p-1">Most <Latex math="U" /> hit early <Latex math="k" /></div>
              </div>
              
              {/* Left-skewed (mass on right) */}
              <div className="text-center">
                <svg viewBox="0 0 60 40" className="w-full h-12">
                  <rect x="5" y="33" width="8" height="2" fill="#ef4444" opacity="0.2"/>
                  <rect x="15" y="30" width="8" height="5" fill="#ef4444" opacity="0.3"/>
                  <rect x="25" y="25" width="8" height="10" fill="#ef4444" opacity="0.4"/>
                  <rect x="35" y="15" width="8" height="20" fill="#ef4444" opacity="0.6"/>
                  <rect x="45" y="5" width="8" height="30" fill="#ef4444" opacity="0.8"/>
                </svg>
                <div className="text-sm text-red-700 font-semibold">Left-skewed</div>
                <div className="text-xs text-red-600">NegBinom (large r)</div>
                <div className="text-xs text-red-700 mt-1 bg-red-50 rounded p-1">Must scan past empty space</div>
              </div>
              
              {/* Symmetric */}
              <div className="text-center">
                <svg viewBox="0 0 60 40" className="w-full h-12">
                  <rect x="5" y="30" width="8" height="5" fill="#8b5cf6" opacity="0.3"/>
                  <rect x="15" y="20" width="8" height="15" fill="#8b5cf6" opacity="0.5"/>
                  <rect x="25" y="8" width="8" height="27" fill="#8b5cf6" opacity="0.8"/>
                  <rect x="35" y="20" width="8" height="15" fill="#8b5cf6" opacity="0.5"/>
                  <rect x="45" y="30" width="8" height="5" fill="#8b5cf6" opacity="0.3"/>
                </svg>
                <div className="text-sm text-violet-700 font-semibold">Symmetric</div>
                <div className="text-xs text-violet-600">Binomial</div>
                <div className="text-xs text-violet-700 mt-1 bg-violet-50 rounded p-1">Wastes time on tails</div>
              </div>
              
              {/* Uniform */}
              <div className="text-center">
                <svg viewBox="0 0 60 40" className="w-full h-12">
                  <rect x="5" y="15" width="8" height="20" fill="#f59e0b" opacity="0.6"/>
                  <rect x="15" y="15" width="8" height="20" fill="#f59e0b" opacity="0.6"/>
                  <rect x="25" y="15" width="8" height="20" fill="#f59e0b" opacity="0.6"/>
                  <rect x="35" y="15" width="8" height="20" fill="#f59e0b" opacity="0.6"/>
                  <rect x="45" y="15" width="8" height="20" fill="#f59e0b" opacity="0.6"/>
                </svg>
                <div className="text-sm text-amber-700 font-semibold">Uniform</div>
                <div className="text-xs text-amber-600">Discrete Uniform</div>
                <div className="text-xs text-amber-700 mt-1 bg-amber-50 rounded p-1">No shortcut: <Latex math="K/2" /> avg</div>
              </div>
              
              {/* Multimodal/Irregular */}
              <div className="text-center">
                <svg viewBox="0 0 60 40" className="w-full h-12">
                  <rect x="5" y="28" width="8" height="7" fill="#0ea5e9" opacity="0.4"/>
                  <rect x="15" y="8" width="8" height="27" fill="#0ea5e9" opacity="0.9"/>
                  <rect x="25" y="30" width="8" height="5" fill="#0ea5e9" opacity="0.3"/>
                  <rect x="35" y="12" width="8" height="23" fill="#0ea5e9" opacity="0.8"/>
                  <rect x="45" y="25" width="8" height="10" fill="#0ea5e9" opacity="0.5"/>
                </svg>
                <div className="text-sm text-sky-700 font-semibold">Irregular</div>
                <div className="text-xs text-sky-600">Multimodal, empirical</div>
                <div className="text-xs text-sky-700 mt-1 bg-sky-50 rounded p-1">No predictable pattern</div>
              </div>
            </div>
          </div>
    
          {/* Three Methods */}
          <div className="grid grid-cols-3 gap-3 mb-3">
            <div className="bg-blue-50 rounded-lg p-3 border border-blue-200">
              <div className="font-bold text-blue-800 text-lg mb-1">Linear Search</div>
              <div className="text-2xl font-bold text-blue-600 text-center my-2">O(K)</div>
              <div className="text-sm text-blue-700">Scan left to right</div>
              <div className="text-sm text-blue-600 mt-1 font-semibold">Shape-dependent!</div>
            </div>
    
            <div className="bg-emerald-50 rounded-lg p-3 border border-emerald-200">
              <div className="font-bold text-emerald-800 text-lg mb-1">Binary Search</div>
              <div className="text-2xl font-bold text-emerald-600 text-center my-2">O(log K)</div>
              <div className="text-sm text-emerald-700">Bisect sorted CDF</div>
              <div className="text-sm text-emerald-600 mt-1">Shape-independent</div>
            </div>
    
            <div className="bg-amber-50 rounded-lg p-3 border-2 border-amber-400">
              <div className="font-bold text-amber-800 text-lg mb-1">Alias Method</div>
              <div className="text-2xl font-bold text-amber-600 text-center my-2">O(1)</div>
              <div className="text-sm text-amber-700">Table lookup</div>
              <div className="text-sm text-amber-600 mt-1 font-semibold">Shape-independent</div>
            </div>
          </div>
    
          {/* Key insight */}
          <div className="bg-slate-100 rounded-lg p-3 border border-slate-300 flex-shrink-0">
            <div className="text-base text-center text-slate-800">
              <strong>Key insight:</strong> Linear search exploits structure but has unpredictable performance. 
              Binary and Alias give <em>guaranteed</em> bounds regardless of distribution shape.
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                          SLIDE 33: LINEAR SCAN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide33_LinearScan() {
  return (
    <div className="flex flex-col -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-0">Linear Scan</h1>
          <p className="text-gray-600 text-base mb-2">The simplest discrete sampling method</p>
    
          <div className="grid grid-cols-2 gap-4">
            {/* Left: Algorithm */}
            <div className="space-y-3">
              {/* Algorithm box */}
              <div className="bg-amber-50 rounded-xl p-3 border-2 border-amber-300">
                <div className="font-bold text-amber-800 text-base italic mb-2">Inverse-CDF (Linear Scan) Algorithm</div>
                <div className="text-sm space-y-1">
                  <div><strong>Input:</strong> Categories <Latex math="\mathcal{C} = \{1, 2, \ldots, K\}" /></div>
                  <div><strong>Weights:</strong> <Latex math="\mathbf{p} = (p_1, p_2, \ldots, p_K)" /> with <Latex math="p_i > 0" /></div>
                </div>
                <div className="mt-2 text-sm">
                  <div className="font-semibold text-amber-700">Precompute:</div>
                  <div className="ml-3">Normalize: <Latex math="p \leftarrow p / \sum_{i=1}^{K} p_i" /></div>
                  <div className="ml-3">Cumulates: <Latex math="F_k \leftarrow \sum_{i=1}^{k} p_i" /></div>
                </div>
                <div className="mt-2 text-sm">
                  <div className="font-semibold text-amber-700">Draw sample:</div>
                  <div className="ml-3"><Latex math="u \sim \text{Unif}(0,1)" /></div>
                  <div className="ml-3">For <Latex math="i" /> in <Latex math="(1, 2, \ldots, K)" />:</div>
                  <div className="ml-6">if <Latex math="u \leq F_i" />: Return <Latex math="i" /></div>
                </div>
              </div>
    
              {/* Complexity */}
              <div className="bg-blue-50 rounded-lg p-3 border border-blue-200">
                <div className="text-center">
                  <div className="font-bold text-blue-800 text-lg">Complexity: <Latex math="O(K)" /></div>
                  <div className="text-sm text-blue-600 mt-1">worst case per sample</div>
                </div>
              </div>
    
              {/* Shape dependency note */}
              <div className="bg-rose-50 rounded-lg p-2 border border-rose-200">
                <div className="text-sm text-rose-700">
                  <strong>Warning:</strong> Performance depends heavily on where mass is concentrated!
                </div>
              </div>
            </div>
    
            {/* Right: Visualizations */}
            <div className="space-y-3">
              {/* Pathological case */}
              <div className="bg-white rounded-lg border border-gray-300 p-3">
                <div className="text-sm text-gray-700 mb-2 text-center font-semibold">Worst case: 90% mass in last bin (K=50)</div>
                <svg viewBox="0 0 200 50" className="w-full h-20">
                  {/* Small bars for first 49 */}
                  {Array.from({length: 49}, (_, i) => (
                    <rect key={i} x={10 + i*3.5} y={38} width="2.5" height="6" fill="#3b82f6" opacity="0.4"/>
                  ))}
                  {/* Large bar for last */}
                  <rect x={181} y={5} width="8" height="39" fill="#3b82f6" opacity="0.9"/>
                  {/* Axis */}
                  <line x1="10" y1="44" x2="195" y2="44" stroke="#374151" strokeWidth="1"/>
                  <text x="100" y="50" fontSize="8" fill="#374151" textAnchor="middle">Category index</text>
                </svg>
                <div className="text-sm text-red-600 text-center font-medium">Must scan ~50 bins for most samples!</div>
              </div>
    
              {/* Tail distribution */}
              <div className="bg-white rounded-lg border border-gray-300 p-3">
                <div className="text-sm text-gray-700 mb-2 text-center font-semibold">Tail-heavy? Scan right-to-left!</div>
                <svg viewBox="0 0 200 50" className="w-full h-20">
                  {/* Exponentially increasing bars (log scale visual) */}
                  {Array.from({length: 40}, (_, i) => {
                    const height = 5 + (i / 39) * 35;
                    return <rect key={i} x={10 + i*4.5} y={44 - height} width="3.5" height={height} fill="#8b5cf6" opacity={0.3 + (i/39)*0.6}/>;
                  })}
                  {/* Arrow showing reverse scan */}
                  <path d="M 185 25 L 165 25 M 170 20 L 165 25 L 170 30" stroke="#10b981" strokeWidth="2" fill="none"/>
                  {/* Axis */}
                  <line x1="10" y1="44" x2="195" y2="44" stroke="#374151" strokeWidth="1"/>
                </svg>
                <div className="text-sm text-green-600 text-center font-medium">Reverse scan finds answer quickly</div>
              </div>
    
              {/* The catch */}
              <div className="bg-amber-50 rounded-lg p-3 border border-amber-200">
                <div className="font-semibold text-amber-800 text-base mb-1">The Catch</div>
                <div className="text-sm text-amber-700">
                  You must <em>know</em> the shape beforehand. For unknown or irregular distributions, you're guessing.
                </div>
              </div>
    
              {/* When it's good */}
              <div className="bg-green-50 rounded-lg p-3 border border-green-200">
                <div className="font-semibold text-green-800 text-base mb-2">When Linear Scan Wins</div>
                <div className="text-sm text-green-700 space-y-1">
                  <div>â€¢ Small <Latex math="K" /> (overhead not worth it)</div>
                  <div>â€¢ Right-skewed â†’ scan left-to-right</div>
                  <div>â€¢ Left-skewed â†’ scan right-to-left</div>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 34: BINARY SEARCH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide34_BinarySearch() {
  return (
    <div className="flex flex-col -mt-2">
          <div className="flex items-center justify-between mb-0">
            <div>
              <h1 className="text-2xl font-bold text-gray-900">Binary Search</h1>
              <p className="text-gray-600 text-base">Guaranteed <Latex math="O(\log K)" /> for any distribution shape</p>
            </div>
            <a href="https://treese41528.github.io/ComputationalDataScience/Simulations/MonteCarloSimulation/binary_search_discrete_sampling.html" 
               target="_blank" 
               rel="noopener noreferrer"
               className="flex items-center gap-1 px-3 py-1.5 bg-cyan-100 hover:bg-cyan-200 text-cyan-800 rounded-lg text-sm font-medium transition-colors">
              <span>ğŸ–¥ï¸</span>
              <span>Interactive Simulation</span>
            </a>
          </div>
    
          <div className="grid grid-cols-2 gap-4 mt-2">
            {/* Left: Algorithm + How it works + Strengths/Trade-offs */}
            <div className="space-y-2">
              {/* Algorithm box */}
              <div className="bg-amber-50 rounded-xl p-3 border-2 border-amber-300">
                <div className="font-bold text-amber-800 text-base italic mb-2">Inverse-CDF (Binary Search) Algorithm</div>
                <div className="text-sm space-y-1">
                  <div><strong>Input:</strong> Categories <Latex math="\mathcal{C} = \{1, 2, \ldots, K\}" /></div>
                  <div><strong>Weights:</strong> <Latex math="\mathbf{p} = (p_1, p_2, \ldots, p_K)" /> with <Latex math="p_i > 0" /></div>
                </div>
                <div className="mt-2 text-sm">
                  <div className="font-semibold text-amber-700">Precompute:</div>
                  <div className="ml-3">Normalize: <Latex math="\mathbf{p} \leftarrow \mathbf{p} / \sum_{i=1}^{K} p_i" /></div>
                  <div className="ml-3">Cumulates: <Latex math="F_k \leftarrow \sum_{i=1}^{k} p_i" /> for <Latex math="k \in \{1,\ldots,K\}" /></div>
                </div>
                <div className="mt-2 text-sm">
                  <div className="font-semibold text-amber-700">Draw sample:</div>
                  <div className="ml-3"><Latex math="u \sim \text{Unif}[0,1)" /></div>
                  <div className="ml-3">low <Latex math="\leftarrow 1" />, high <Latex math="\leftarrow K" /></div>
                  <div className="ml-3">while low {'<'} high:</div>
                  <div className="ml-6">mid <Latex math="\leftarrow \lfloor(\text{low} + \text{high})/2\rfloor" /></div>
                  <div className="ml-6">if <Latex math="u \leq F_{\text{mid}}" />: high <Latex math="\leftarrow" /> mid</div>
                  <div className="ml-6">else: low <Latex math="\leftarrow" /> mid + 1</div>
                  <div className="ml-3">Return low</div>
                </div>
              </div>
    
              {/* Complexity */}
              <div className="bg-blue-50 rounded-lg p-2 border border-blue-200">
                <div className="text-center">
                  <div className="font-bold text-blue-800 text-lg">Complexity: <Latex math="O(\log K)" /></div>
                  <div className="text-sm text-blue-600">always exactly <Latex math="\lceil \log_2 K \rceil" /> steps</div>
                </div>
              </div>
    
              {/* How it works + Strengths/Trade-offs */}
              <div className="grid grid-cols-2 gap-2">
                <div className="bg-indigo-50 rounded-lg p-2 border border-indigo-200">
                  <div className="font-semibold text-indigo-800 text-sm mb-1">How it works:</div>
                  <div className="text-xs text-indigo-700 space-y-0.5">
                    <div>â€¢ Split search space in half</div>
                    <div>â€¢ Compare <Latex math="u" /> with <Latex math="F_{\text{mid}}" /></div>
                    <div>â€¢ Eliminate half each step</div>
                  </div>
                </div>
                <div className="space-y-2">
                  <div className="bg-green-50 rounded-lg p-2 border border-green-200">
                    <div className="font-semibold text-green-800 text-xs mb-1">Strengths:</div>
                    <div className="text-xs text-green-700 space-y-0.5">
                      <div>âœ“ Predictable performance</div>
                      <div>âœ“ Simple to implement</div>
                      <div>âœ“ Works for any shape</div>
                    </div>
                  </div>
                  <div className="bg-rose-50 rounded-lg p-2 border border-rose-200">
                    <div className="font-semibold text-rose-800 text-xs mb-1">Trade-off:</div>
                    <div className="text-xs text-rose-700 space-y-0.5">
                      <div>âœ— Can't exploit any shape</div>
                      <div>âœ— Always checks middle first</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right: Large Binary Search Tree */}
            <div className="space-y-2">
              <div className="bg-white rounded-lg border border-gray-300 p-2">
                <div className="text-sm text-gray-700 text-center font-semibold mb-1">Binary Search Tree for K=16 (red=visited, green=found)</div>
                <svg viewBox="0 0 260 175" className="w-full h-56">
                  {/* Edge labels showing CDF comparisons */}
                  
                  {/* Level 0 â†’ Level 1 edges */}
                  <line x1="130" y1="20" x2="65" y2="50" stroke="#9ca3af" strokeWidth="1.5"/>
                  <line x1="130" y1="20" x2="195" y2="50" stroke="#ef4444" strokeWidth="2.5"/>
                  <text x="88" y="30" fontSize="7" fill="#6b7280" transform="rotate(-30, 88, 30)">U {'<'} 0.249</text>
                  <text x="172" y="30" fontSize="7" fill="#ef4444" transform="rotate(30, 172, 30)">U {'â‰¥'} 0.500</text>
                  
                  {/* Level 1 â†’ Level 2 edges */}
                  <line x1="65" y1="60" x2="35" y2="90" stroke="#9ca3af" strokeWidth="1.5"/>
                  <line x1="65" y1="60" x2="95" y2="90" stroke="#9ca3af" strokeWidth="1.5"/>
                  <line x1="195" y1="60" x2="165" y2="90" stroke="#ef4444" strokeWidth="2.5"/>
                  <line x1="195" y1="60" x2="225" y2="90" stroke="#9ca3af" strokeWidth="1.5"/>
                  <text x="45" y="72" fontSize="6" fill="#6b7280" transform="rotate(-30, 45, 72)">{'<'}0.014</text>
                  <text x="85" y="72" fontSize="6" fill="#6b7280" transform="rotate(30, 85, 72)">{'â‰¥'}0.029</text>
                  <text x="175" y="72" fontSize="6" fill="#ef4444" transform="rotate(-30, 175, 72)">{'<'}0.939</text>
                  <text x="215" y="72" fontSize="6" fill="#6b7280" transform="rotate(30, 215, 72)">{'â‰¥'}0.971</text>
                  
                  {/* Level 2 â†’ Level 3 edges */}
                  <line x1="35" y1="100" x2="20" y2="125" stroke="#9ca3af" strokeWidth="1"/>
                  <line x1="35" y1="100" x2="50" y2="125" stroke="#9ca3af" strokeWidth="1"/>
                  <line x1="95" y1="100" x2="80" y2="125" stroke="#9ca3af" strokeWidth="1"/>
                  <line x1="95" y1="100" x2="110" y2="125" stroke="#9ca3af" strokeWidth="1"/>
                  <line x1="165" y1="100" x2="147" y2="125" stroke="#9ca3af" strokeWidth="1"/>
                  <line x1="165" y1="100" x2="183" y2="125" stroke="#ef4444" strokeWidth="2"/>
                  <line x1="225" y1="100" x2="210" y2="125" stroke="#9ca3af" strokeWidth="1"/>
                  <line x1="225" y1="100" x2="240" y2="125" stroke="#9ca3af" strokeWidth="1"/>
                  
                  {/* Level 3 â†’ Level 4 edge (for 16) */}
                  <line x1="240" y1="135" x2="250" y2="158" stroke="#9ca3af" strokeWidth="1"/>
                  
                  {/* Level 0: node 8 (root, visited) */}
                  <circle cx="130" cy="16" r="13" fill="#ef4444" stroke="#dc2626" strokeWidth="2"/>
                  <text x="130" y="21" fontSize="11" fill="white" textAnchor="middle" fontWeight="bold">8</text>
                  
                  {/* Level 1: nodes 4, 12 */}
                  <circle cx="65" cy="55" r="12" fill="#3b82f6" stroke="#2563eb" strokeWidth="1.5"/>
                  <text x="65" y="60" fontSize="10" fill="white" textAnchor="middle" fontWeight="bold">4</text>
                  <circle cx="195" cy="55" r="12" fill="#ef4444" stroke="#dc2626" strokeWidth="2"/>
                  <text x="195" y="60" fontSize="10" fill="white" textAnchor="middle" fontWeight="bold">12</text>
                  
                  {/* Level 2: nodes 2, 6, 10, 14 */}
                  <circle cx="35" cy="95" r="11" fill="#3b82f6" stroke="#2563eb" strokeWidth="1.5"/>
                  <text x="35" y="99" fontSize="9" fill="white" textAnchor="middle" fontWeight="bold">2</text>
                  <circle cx="95" cy="95" r="11" fill="#3b82f6" stroke="#2563eb" strokeWidth="1.5"/>
                  <text x="95" y="99" fontSize="9" fill="white" textAnchor="middle" fontWeight="bold">6</text>
                  <circle cx="165" cy="95" r="11" fill="#ef4444" stroke="#dc2626" strokeWidth="2"/>
                  <text x="165" y="99" fontSize="9" fill="white" textAnchor="middle" fontWeight="bold">10</text>
                  <circle cx="225" cy="95" r="11" fill="#3b82f6" stroke="#2563eb" strokeWidth="1.5"/>
                  <text x="225" y="99" fontSize="9" fill="white" textAnchor="middle" fontWeight="bold">14</text>
                  
                  {/* Level 3: nodes 1, 3, 5, 7, 9, 11, 13, 15 */}
                  <circle cx="20" cy="130" r="9" fill="#93c5fd" stroke="#3b82f6" strokeWidth="1"/>
                  <text x="20" y="134" fontSize="8" fill="#1e40af" textAnchor="middle" fontWeight="bold">1</text>
                  <circle cx="50" cy="130" r="9" fill="#93c5fd" stroke="#3b82f6" strokeWidth="1"/>
                  <text x="50" y="134" fontSize="8" fill="#1e40af" textAnchor="middle" fontWeight="bold">3</text>
                  <circle cx="80" cy="130" r="9" fill="#93c5fd" stroke="#3b82f6" strokeWidth="1"/>
                  <text x="80" y="134" fontSize="8" fill="#1e40af" textAnchor="middle" fontWeight="bold">5</text>
                  <circle cx="110" cy="130" r="9" fill="#93c5fd" stroke="#3b82f6" strokeWidth="1"/>
                  <text x="110" y="134" fontSize="8" fill="#1e40af" textAnchor="middle" fontWeight="bold">7</text>
                  <circle cx="147" cy="130" r="9" fill="#93c5fd" stroke="#3b82f6" strokeWidth="1"/>
                  <text x="147" y="134" fontSize="8" fill="#1e40af" textAnchor="middle" fontWeight="bold">9</text>
                  <circle cx="183" cy="130" r="9" fill="#22c55e" stroke="#16a34a" strokeWidth="2"/>
                  <text x="183" y="134" fontSize="8" fill="white" textAnchor="middle" fontWeight="bold">11</text>
                  <circle cx="210" cy="130" r="9" fill="#93c5fd" stroke="#3b82f6" strokeWidth="1"/>
                  <text x="210" y="134" fontSize="8" fill="#1e40af" textAnchor="middle" fontWeight="bold">13</text>
                  <circle cx="240" cy="130" r="9" fill="#93c5fd" stroke="#3b82f6" strokeWidth="1"/>
                  <text x="240" y="134" fontSize="8" fill="#1e40af" textAnchor="middle" fontWeight="bold">15</text>
                  
                  {/* Level 4: node 16 */}
                  <circle cx="250" cy="160" r="8" fill="#93c5fd" stroke="#3b82f6" strokeWidth="1"/>
                  <text x="250" y="164" fontSize="7" fill="#1e40af" textAnchor="middle" fontWeight="bold">16</text>
                </svg>
              </div>
    
              {/* Search Trace */}
              <div className="bg-amber-50 rounded-lg p-2 border border-amber-300">
                <div className="font-bold text-amber-800 text-sm mb-1">Search Trace: U = 0.885</div>
                <div className="font-mono text-sm grid grid-cols-2 gap-x-4 text-gray-800">
                  <div>1. k=8: U {'>'} 0.500 <span className="text-red-600 font-bold">â†’ RIGHT</span></div>
                  <div>2. k=12: U {'â‰¤'} 0.971 <span className="text-red-600 font-bold">â†’ LEFT</span></div>
                  <div>3. k=10: U {'>'} 0.876 <span className="text-red-600 font-bold">â†’ RIGHT</span></div>
                  <div>4. k=11: U {'â‰¤'} 0.939 <span className="text-green-600 font-bold">â†’ FOUND</span></div>
                </div>
              </div>
    
              {/* NumPy hint */}
              <div className="bg-gray-50 rounded-lg p-2 border border-gray-200">
                <div className="text-sm text-gray-800">
                  <span className="font-semibold">NumPy:</span>
                  <code className="ml-2 bg-gray-100 px-2 py-0.5 rounded text-sm">np.searchsorted(F, u)</code>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                     SLIDE 35: EXPONENTIAL DOUBLING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide35_ExponentialDoubling() {
  return (
    <div className="flex flex-col -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-0">Exponential Doubling</h1>
          <p className="text-gray-600 text-base mb-2">Adaptive search: <Latex math="O(\log k)" /> where k is the sampled value</p>
    
          <div className="grid grid-cols-2 gap-3">
            {/* Left: Algorithm */}
            <div className="space-y-2">
              {/* Algorithm box */}
              <div className="bg-amber-50 rounded-xl p-2 border-2 border-amber-300 text-xs">
                <div className="font-bold text-amber-800 text-sm italic mb-1">Exponential Doubling Algorithm</div>
                <div className="space-y-0.5">
                  <div><strong>Precompute:</strong> Normalize <Latex math="p" />, compute <Latex math="F_k" /></div>
                </div>
                <div className="mt-2 space-y-0.5">
                  <div className="font-semibold text-amber-700">Draw sample:</div>
                  <div className="ml-2"><Latex math="u \sim \text{Unif}(0,1)" /></div>
                  <div className="ml-2"><Latex math="\text{prev} \leftarrow 0, \; \text{curr} \leftarrow 1" /></div>
                  <div className="ml-2 mt-1 font-semibold text-purple-700">Phase 1: Find bracket</div>
                  <div className="ml-2">while <Latex math="\text{curr} < K" /> and <Latex math="u > F_{\text{curr}}" />:</div>
                  <div className="ml-4"><Latex math="\text{prev} \leftarrow \text{curr}" /></div>
                  <div className="ml-4"><Latex math="\text{curr} \leftarrow \min(2 \cdot \text{curr}, K)" /></div>
                  <div className="ml-2 mt-1 font-semibold text-blue-700">Phase 2: Binary search in bracket</div>
                  <div className="ml-2"><Latex math="\text{low} \leftarrow \text{prev} + 1, \; \text{high} \leftarrow \text{curr}" /></div>
                  <div className="ml-2">[standard binary search]</div>
                  <div className="ml-2">Return low</div>
                </div>
              </div>
    
              {/* Complexity */}
              <div className="bg-emerald-50 rounded-lg p-2 border border-emerald-200">
                <div className="text-center">
                  <div className="font-bold text-emerald-800 text-base">Complexity: <Latex math="O(\log k)" /></div>
                  <div className="text-xs text-emerald-600 mt-1">where <Latex math="k" /> is the sampled value, not <Latex math="K" /></div>
                  <div className="text-xs text-emerald-500 mt-1">Early speedup for <Latex math="k \ll K" /></div>
                </div>
              </div>
            </div>
    
            {/* Right: Visualization and explanation */}
            <div className="space-y-2">
              {/* Two phases visual */}
              <div className="bg-white rounded-lg border border-gray-300 p-2">
                <div className="text-xs text-gray-600 mb-1 text-center">Two-Phase Search</div>
                <div className="grid grid-cols-2 gap-2">
                  <div className="bg-purple-50 rounded p-1.5">
                    <div className="text-xs font-semibold text-purple-800 mb-1">Phase 1: Jump</div>
                    <div className="text-xs text-purple-700">Check: 1, 2, 4, 8, 16...</div>
                    <svg viewBox="0 0 80 25" className="w-full h-6 mt-1">
                      <line x1="5" y1="15" x2="75" y2="15" stroke="#d1d5db" strokeWidth="1"/>
                      {/* Jump positions */}
                      <circle cx="10" cy="15" r="3" fill="#8b5cf6"/>
                      <circle cx="20" cy="15" r="3" fill="#8b5cf6"/>
                      <circle cx="35" cy="15" r="3" fill="#8b5cf6"/>
                      <circle cx="55" cy="15" r="3" fill="#10b981"/>
                      {/* Arrows */}
                      <path d="M 13 10 Q 16 5 19 10" stroke="#8b5cf6" fill="none" strokeWidth="0.8"/>
                      <path d="M 23 10 Q 28 3 34 10" stroke="#8b5cf6" fill="none" strokeWidth="0.8"/>
                      <path d="M 38 10 Q 45 2 54 10" stroke="#8b5cf6" fill="none" strokeWidth="0.8"/>
                      <text x="10" y="23" fontSize="6" fill="#374151" textAnchor="middle">1</text>
                      <text x="20" y="23" fontSize="6" fill="#374151" textAnchor="middle">2</text>
                      <text x="35" y="23" fontSize="6" fill="#374151" textAnchor="middle">4</text>
                      <text x="55" y="23" fontSize="6" fill="#10b981" textAnchor="middle">8âœ“</text>
                    </svg>
                  </div>
                  <div className="bg-blue-50 rounded p-1.5">
                    <div className="text-xs font-semibold text-blue-800 mb-1">Phase 2: Bisect</div>
                    <div className="text-xs text-blue-700">Binary in [5, 8]</div>
                    <svg viewBox="0 0 80 25" className="w-full h-6 mt-1">
                      <line x1="5" y1="15" x2="75" y2="15" stroke="#d1d5db" strokeWidth="1"/>
                      {/* Bracket */}
                      <rect x="20" y="10" width="40" height="10" fill="#3b82f6" opacity="0.2" rx="2"/>
                      <circle cx="25" cy="15" r="3" fill="#93c5fd"/>
                      <circle cx="40" cy="15" r="3" fill="#3b82f6"/>
                      <circle cx="55" cy="15" r="3" fill="#93c5fd"/>
                      <text x="25" y="23" fontSize="6" fill="#374151" textAnchor="middle">5</text>
                      <text x="40" y="23" fontSize="6" fill="#3b82f6" textAnchor="middle">6âœ“</text>
                      <text x="55" y="23" fontSize="6" fill="#374151" textAnchor="middle">8</text>
                    </svg>
                  </div>
                </div>
              </div>
    
              {/* Why it adapts */}
              <div className="bg-green-50 rounded-lg p-2 border border-green-200">
                <div className="font-semibold text-green-800 text-sm mb-1">Why It Adapts</div>
                <div className="text-xs text-green-700 space-y-1">
                  <div><strong>Small k (head-heavy):</strong> Find bracket in few jumps</div>
                  <div><strong>Large k (tail):</strong> More jumps, but still <Latex math="O(\log k)" /></div>
                  <div><strong>Key:</strong> Bracket size doubles each jump, so binary search phase is also <Latex math="O(\log k)" /></div>
                </div>
              </div>
    
              {/* When to use */}
              <div className="bg-violet-50 rounded-lg p-2 border border-violet-200">
                <div className="font-semibold text-violet-800 text-sm mb-1">Best For</div>
                <div className="text-xs text-violet-700 space-y-0.5">
                  <div>â€¢ Right-skewed distributions (Geometric, Poisson)</div>
                  <div>â€¢ Unbounded support (<Latex math="K = \infty" />)</div>
                  <div>â€¢ When you can't precompute alias tables</div>
                </div>
              </div>
    
              {/* Trade-off note */}
              <div className="bg-amber-50 rounded-lg p-2 border border-amber-200">
                <div className="text-xs text-amber-700">
                  <span className="font-semibold">Trade-off:</span> At most 2Ã— binary search cost, but can be much faster for concentrated distributions
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                     SLIDE 36: INTERPOLATION SEARCH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide36_InterpolationSearch() {
  return (
    <div className="flex flex-col -mt-2">
          <div className="flex items-center justify-between mb-0">
            <div>
              <h1 className="text-3xl font-bold text-gray-900">Interpolation Search</h1>
              <p className="text-gray-600 text-lg"><Latex math="O(\log \log K)" /> for uniform, but <Latex math="O(K)" /> worst case</p>
            </div>
            <a 
              href="https://treese41528.github.io/ComputationalDataScience/Simulations/MonteCarloSimulation/interpolation_search_discrete_sampling.html"
              target="_blank"
              rel="noopener noreferrer"
              className="flex items-center gap-1 px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-800 rounded-lg text-sm font-medium transition-colors"
            >
              <span>ğŸ®</span>
              <span>Interactive Simulation</span>
            </a>
          </div>
    
          <div className="grid grid-cols-2 gap-4 mt-3">
            {/* Left: Algorithm */}
            <div className="space-y-3">
              {/* Algorithm box */}
              <div className="bg-amber-50 rounded-xl p-3 border-2 border-amber-300 text-base">
                <div className="font-bold text-amber-800 text-lg italic mb-2">Interpolation Search Algorithm</div>
                <div className="space-y-0.5">
                  <div><strong>Precompute:</strong> Normalize <Latex math="p" />, compute <Latex math="F_k" /></div>
                </div>
                <div className="mt-2 space-y-1">
                  <div className="font-semibold text-amber-700">Draw sample:</div>
                  <div className="ml-2"><Latex math="u \sim \text{Unif}(0,1)" /></div>
                  <div className="ml-2"><Latex math="\text{low} \leftarrow 1, \; \text{high} \leftarrow K" /></div>
                  <div className="ml-2 mt-1">while <Latex math="\text{low} < \text{high}" />:</div>
                  <div className="ml-4 bg-purple-50 rounded p-2 my-1">
                    <div className="text-purple-800 font-semibold">Smart guess:</div>
                    <div className="mt-1"><Latex math="\text{ratio} \leftarrow \frac{u - F_{\text{low}}}{F_{\text{high}} - F_{\text{low}}}" /></div>
                    <div className="mt-1"><Latex math="\text{guess} \leftarrow \text{low} + \lfloor\text{ratio} \cdot (\text{high} - \text{low})\rfloor" /></div>
                  </div>
                  <div className="ml-4">if <Latex math="u \leq F_{\text{guess}}" />: <Latex math="\text{high} \leftarrow \text{guess}" /></div>
                  <div className="ml-4">else: <Latex math="\text{low} \leftarrow \text{guess} + 1" /></div>
                  <div className="ml-2">Return low</div>
                </div>
              </div>
    
              {/* Complexity */}
              <div className="bg-gradient-to-r from-emerald-50 to-rose-50 rounded-lg p-3 border border-gray-300">
                <div className="grid grid-cols-2 gap-3 text-center">
                  <div>
                    <div className="text-sm text-emerald-600">Best (uniform)</div>
                    <div className="font-bold text-emerald-800 text-xl"><Latex math="O(\log \log K)" /></div>
                  </div>
                  <div>
                    <div className="text-sm text-rose-600">Worst (concentrated)</div>
                    <div className="font-bold text-rose-800 text-xl"><Latex math="O(K)" /></div>
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right: Visualization and conditions */}
            <div className="space-y-2">
              {/* Visual: Linear CDF ideal */}
              <div className="bg-white rounded-lg border border-gray-300 p-1">
                <div className="text-sm text-gray-600 mb-0.5 text-center font-medium">Interpolation: Assume Linear CDF</div>
                <svg viewBox="0 0 130 65" className="w-full h-44" 
                    role="img" 
                    aria-label="CDF visualization showing linear approximation vs actual step function for interpolation search">
                <title>Interpolation Search CDF Comparison</title>
                <desc>Graph comparing ideal linear CDF (dashed green line) with actual discrete step function (blue) to illustrate how interpolation search estimates position</desc>
  
                  {/* Legend in top left - smaller */}
                  <rect x="4" y="2" width="42" height="16" fill="white" stroke="#d1d5db" strokeWidth="0.5" rx="1.5"/>
                  <line x1="7" y1="7" x2="16" y2="7" stroke="#10b981" strokeWidth="1.5" strokeDasharray="3,2"/>
                  <text x="18" y="9" fontSize="5.5" fill="#374151">linear approx</text>
                  <line x1="7" y1="14" x2="16" y2="14" stroke="#3b82f6" strokeWidth="1.5"/>
                  <text x="18" y="16" fontSize="5.5" fill="#374151">actual CDF</text>
                  
                  {/* Axes */}
                  <line x1="15" y1="55" x2="125" y2="55" stroke="#374151" strokeWidth="1"/>
                  <line x1="15" y1="55" x2="15" y2="5" stroke="#374151" strokeWidth="1"/>
                  
                  {/* Axis labels */}
                  <text x="70" y="63" fontSize="7" fill="#374151" textAnchor="middle">k</text>
                  <text x="8" y="30" fontSize="7" fill="#374151" textAnchor="middle">F</text>
                  
                  {/* Ideal linear CDF (dashed green line) */}
                  <line x1="15" y1="55" x2="122" y2="8" stroke="#10b981" strokeWidth="1.5" strokeDasharray="4,3"/>
                  
                  {/* Actual CDF - STEP FUNCTION (blue) */}
                  <path d="M15,55 H28 V49 H41 V42 H54 V34 H67 V26 H80 V19 H93 V13 H106 V8 H122" 
                        fill="none" stroke="#3b82f6" strokeWidth="2"/>
                  {/* Small dots at step corners */}
                  <circle cx="28" cy="49" r="1.5" fill="#3b82f6"/>
                  <circle cx="41" cy="42" r="1.5" fill="#3b82f6"/>
                  <circle cx="54" cy="34" r="1.5" fill="#3b82f6"/>
                  <circle cx="67" cy="26" r="1.5" fill="#3b82f6"/>
                  <circle cx="80" cy="19" r="1.5" fill="#3b82f6"/>
                  <circle cx="93" cy="13" r="1.5" fill="#3b82f6"/>
                  <circle cx="106" cy="8" r="1.5" fill="#3b82f6"/>
                  
                  {/* Target u (horizontal red dashed line) */}
                  <line x1="15" y1="30" x2="125" y2="30" stroke="#ef4444" strokeDasharray="3,2" strokeWidth="1"/>
                  <text x="127" y="32" fontSize="7" fill="#ef4444">u</text>
                  
                  {/* Interpolation guess (orange) */}
                  <circle cx="62" cy="30" r="3" fill="#f59e0b"/>
                  <line x1="62" y1="30" x2="62" y2="55" stroke="#f59e0b" strokeDasharray="2,2" strokeWidth="1"/>
                  <text x="62" y="61" fontSize="6" fill="#f59e0b" textAnchor="middle">guess</text>
                  
                  {/* Y-axis markers */}
                  <text x="12" y="57" fontSize="5" fill="#6b7280">0</text>
                  <text x="12" y="9" fontSize="5" fill="#6b7280">1</text>
                </svg>
              </div>
    
              {/* Good and Bad conditions side by side */}
              <div className="grid grid-cols-2 gap-2">
                {/* Good conditions */}
                <div className="bg-green-50 rounded-lg p-2 border border-green-200">
                  <div className="font-semibold text-green-800 text-sm mb-1">Works Well</div>
                  <div className="text-sm text-green-700 space-y-0.5">
                    <div className="flex items-center gap-1"><span className="text-green-500">âœ“</span> Uniform/monotonic PMF</div>
                    <div className="flex items-center gap-1"><span className="text-green-500">âœ“</span> No large flat CDF regions</div>
                    <div className="flex items-center gap-1"><span className="text-green-500">âœ“</span> Gradual probability change</div>
                  </div>
                </div>
    
                {/* Bad conditions */}
                <div className="bg-rose-50 rounded-lg p-2 border border-rose-200">
                  <div className="font-semibold text-rose-800 text-sm mb-1">Fails When</div>
                  <div className="text-sm text-rose-700 space-y-0.5">
                    <div className="flex items-center gap-1"><span className="text-rose-500">âœ—</span> Mass at few points</div>
                    <div className="flex items-center gap-1"><span className="text-rose-500">âœ—</span> Long flat CDF stretches</div>
                    <div className="flex items-center gap-1"><span className="text-rose-500">âœ—</span> Gaps between bins</div>
                  </div>
                </div>
              </div>
    
              {/* Summary */}
              <div className="bg-amber-50 rounded-lg p-2 border border-amber-200">
                <div className="text-sm text-amber-700">
                  <span className="font-semibold">Bottom line:</span> Amazing for uniform distributions, but too risky for general use â€” prefer binary search for reliability
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 37: ALIAS METHOD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const imageUrl_slide37 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_3_alias_method_setup.png";
function Slide37_AliasMethod() {
  return (
    <div className="flex flex-col -mt-2">
          <div className="flex items-center justify-between mb-1">
            <div>
              <h1 className="text-3xl font-bold text-gray-900">Walker/Vose Alias Method</h1>
              <p className="text-gray-600 text-lg"><Latex math="O(1)" /> sampling â€” the optimal solution for large <Latex math="n" /></p>
            </div>
            <a 
              href="https://treese41528.github.io/ComputationalDataScience/Simulations/MonteCarloSimulation/alias_method_simulation.html"
              target="_blank"
              rel="noopener noreferrer"
              className="flex items-center gap-1 px-3 py-1.5 bg-amber-100 hover:bg-amber-200 text-amber-800 rounded-lg text-sm font-medium transition-colors"
            >
              <span>ğŸ®</span>
              <span>Interactive Simulation</span>
            </a>
          </div>
    
          <div className="grid grid-cols-2 gap-4">
            {/* Left: Full Algorithm */}
            <div className="space-y-2">
              {/* Setup algorithm */}
              <div className="bg-amber-50 rounded-xl p-3 border-2 border-amber-300 text-sm">
                <div className="font-bold text-amber-800 text-base italic mb-2">Alias Method â€” Setup Phase</div>
                <div className="space-y-0.5">
                  <div><strong>Input:</strong> <Latex math="\mathcal{C} = \{0, 1, \ldots, K-1\}" />, <Latex math="\mathbf{p} = (p_0, \ldots, p_{K-1})" /> with <Latex math="p_i > 0" /></div>
                </div>
                <div className="mt-2 space-y-0.5">
                  <div><strong>Scale:</strong> <Latex math="w_i \leftarrow K \cdot p_i / \sum_{j} p_j" /></div>
                  <div><strong>Create:</strong> prob[], alias[] arrays of length K</div>
                  <div><strong>small</strong> <Latex math="\leftarrow" /> empty stack, <strong>large</strong> <Latex math="\leftarrow" /> empty stack</div>
                  <div className="mt-1"><strong>for</strong> <Latex math="i = 0" /> to <Latex math="K-1" />:</div>
                  <div className="ml-4"><strong>if</strong> <Latex math="w_i < 1" />: small.push(<Latex math="i" />)</div>
                  <div className="ml-4"><strong>else</strong>: large.push(<Latex math="i" />)</div>
                  <div className="mt-1"><strong>while</strong> small and large non-empty:</div>
                  <div className="ml-4"><Latex math="\ell \leftarrow" /> pop(small), <Latex math="g \leftarrow" /> pop(large)</div>
                  <div className="ml-4"><Latex math="\text{prob}_\ell \leftarrow w_\ell" />, <Latex math="\text{alias}_\ell \leftarrow g" /></div>
                  <div className="ml-4"><Latex math="w_g \leftarrow w_g + w_\ell - 1" /></div>
                  <div className="ml-4"><strong>if</strong> <Latex math="w_g < 1" />: small.push(<Latex math="g" />) <span className="text-gray-500"># now small</span></div>
                  <div className="ml-4"><strong>else</strong>: large.push(<Latex math="g" />) <span className="text-gray-500"># still large</span></div>
                </div>
              </div>
    
              {/* Sample algorithm */}
              <div className="bg-green-50 rounded-xl p-3 border-2 border-green-300 text-sm">
                <div className="font-bold text-green-800 text-base italic mb-2">Alias Method â€” Draw Sample</div>
                <div className="space-y-1">
                  <div className="text-green-700 font-medium">Standard (2 uniforms):</div>
                  <div className="ml-2"><Latex math="\text{col} \sim \text{Uniform}\{0, 1, \ldots, K-1\}" /></div>
                  <div className="ml-2"><Latex math="u \sim \text{Uniform}[0, 1)" /></div>
                </div>
                <div className="mt-2 pt-2 border-t border-green-300 space-y-1">
                  <div className="text-green-700 font-medium">Optimized (1 uniform):</div>
                  <div className="ml-2"><Latex math="U \sim \text{Uniform}(0, K)" /></div>
                  <div className="ml-2"><Latex math="\text{col} \leftarrow \lfloor U \rfloor" /> <span className="text-gray-500"># integer part</span></div>
                  <div className="ml-2"><Latex math="u \leftarrow U - \text{col}" /> <span className="text-gray-500"># fractional part</span></div>
                </div>
                <div className="mt-2 pt-2 border-t border-green-300 space-y-1">
                  <div className="text-green-700 font-medium">Decision:</div>
                  <div className="ml-2"><strong>if</strong> <Latex math="u < \text{prob}_{\text{col}}" />: <strong>return</strong> col</div>
                  <div className="ml-2"><strong>else</strong>: <strong>return</strong> <Latex math="\text{alias}_{\text{col}}" /></div>
                </div>
              </div>
            </div>
    
            {/* Right: Visualization */}
            <div className="space-y-2">
              {/* Image */}
              <div className="bg-white rounded-lg border border-gray-300 p-1">
                <img 
                  src={imageUrl_slide37} 
                  alt="Alias method setup: Original PMF, scaled heights with average=1 line, and final balanced cups with native/borrowed portions"
                  className="w-full h-110 object-contain"
                />
              </div>
    
              {/* Complexity */}
              <div className="bg-blue-50 rounded-lg p-2 border border-blue-200">
                <div className="grid grid-cols-2 gap-3 text-center">
                  <div>
                    <div className="text-sm text-blue-600">Setup</div>
                    <div className="font-bold text-blue-800 text-xl"><Latex math="O(K)" /></div>
                  </div>
                  <div>
                    <div className="text-sm text-amber-600">Sample</div>
                    <div className="font-bold text-amber-800 text-xl"><Latex math="O(1)" /></div>
                  </div>
                </div>
              </div>
    
              {/* Key insight */}
              <div className="grid grid-cols-2 gap-2">
                <div className="bg-violet-50 rounded-lg p-2 border border-violet-200">
                  <div className="font-semibold text-violet-800 text-sm mb-1">Single Uniform Trick</div>
                  <div className="text-sm text-violet-700 space-y-0.5">
                    <div><Latex math="U \sim \text{Unif}(0,K)" /></div>
                    <div>col = <Latex math="\lfloor U \rfloor" />, u = <Latex math="U - \text{col}" /></div>
                    <div className="text-xs text-violet-600 italic">Integer & fractional parts independent!</div>
                  </div>
                </div>
    
                <div className="bg-emerald-50 rounded-lg p-2 border border-emerald-200">
                  <div className="font-semibold text-emerald-800 text-sm mb-1">Why O(1)?</div>
                  <div className="text-sm text-emerald-700 space-y-0.5">
                    <div>â€¢ 1 RNG + 1 comparison</div>
                    <div>â€¢ At most 2 outcomes/cup</div>
                    <div>â€¢ Direct table lookup</div>
                  </div>
                </div>
              </div>
    
              {/* When to use */}
              <div className="bg-rose-50 rounded-lg p-2 border border-rose-200">
                <div className="font-semibold text-rose-800 text-sm mb-1">When to Use Alias Method</div>
                <div className="grid grid-cols-3 gap-2 text-sm text-rose-700">
                  <div className="text-center">
                    <div className="font-semibold">Large K</div>
                    <div className="text-xs">1000s+ categories</div>
                  </div>
                  <div className="text-center">
                    <div className="font-semibold">Many samples</div>
                    <div className="text-xs"><Latex math="n \gg K" /></div>
                  </div>
                  <div className="text-center">
                    <div className="font-semibold">Static probs</div>
                    <div className="text-xs">Setup cost amortized</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 38: METHOD COMPARISON
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide38_MethodComparison() {
  const [activeTab, setActiveTab] = useState('head');
  
    // Cross-window tab synchronization
    useEffect(() => {
      const handleMessage = (event) => {
        if (event.data?.type === 'slide38-tab-change') {
          setActiveTab(event.data.tab);
        }
      };
      
      window.addEventListener('message', handleMessage);
      
      // Also listen for messages from opener/opened windows
      const broadcastChannel = new BroadcastChannel('slide38-tabs');
      broadcastChannel.onmessage = (event) => {
        if (event.data?.type === 'slide38-tab-change') {
          setActiveTab(event.data.tab);
        }
      };
      
      return () => {
        window.removeEventListener('message', handleMessage);
        broadcastChannel.close();
      };
    }, []);
  
    const handleTabChange = (tabId) => {
      setActiveTab(tabId);
      
      // Broadcast to other windows via BroadcastChannel
      const broadcastChannel = new BroadcastChannel('slide38-tabs');
      broadcastChannel.postMessage({ type: 'slide38-tab-change', tab: tabId });
      broadcastChannel.close();
      
      // Also try postMessage for opener/opened windows
      if (window.opener) {
        window.opener.postMessage({ type: 'slide38-tab-change', tab: tabId }, '*');
      }
      // Broadcast to all child windows
      if (window.frames) {
        for (let i = 0; i < window.frames.length; i++) {
          try {
            window.frames[i].postMessage({ type: 'slide38-tab-change', tab: tabId }, '*');
          } catch (e) {
            // Ignore cross-origin errors
          }
        }
      }
    };
  
    const tabs = [
      { id: 'head', label: 'Head-Heavy', bgActive: 'bg-green-100', textActive: 'text-green-800', border: 'border-green-300' },
      { id: 'tail', label: 'Tail-Heavy', bgActive: 'bg-rose-100', textActive: 'text-rose-800', border: 'border-rose-300' },
      { id: 'symmetric', label: 'Symmetric', bgActive: 'bg-violet-100', textActive: 'text-violet-800', border: 'border-violet-300' },
      { id: 'uniform', label: 'Uniform', bgActive: 'bg-amber-100', textActive: 'text-amber-800', border: 'border-amber-300' },
    ];
  
    const benchmarkImages = {
      head: 'https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/Monte%20Carlo%20Methods_slide019_img004_b8994dbd.png',
      tail: 'https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/Monte%20Carlo%20Methods_slide019_img003_7e5a8c9f.png',
      symmetric: 'https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/Monte%20Carlo%20Methods_slide020_img004_f6113b1d.png',
      uniform: 'https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/Monte%20Carlo%20Methods_slide020_img005_f28deb1f.png',
    };
  
    const observations = {
      head: {
        title: 'Head-Heavy (Right-Skewed)',
        subtitle: 'Fig 2.24: Mass concentrates in early categories',
        bgCard: 'bg-green-50',
        borderCard: 'border-green-200',
        textTitle: 'text-green-800',
        points: [
          { method: 'Linear', status: 'good', text: 'Nearly constant! Terminates quickly at early indices' },
          { method: 'Exp-double', status: 'best', text: 'Excels here â€” O(log k) where k is result index' },
          { method: 'Binary', status: 'ok', text: 'Reliable O(log K) but wastes comparisons' },
          { method: 'Interp', status: 'bad', text: 'Struggles â€” CDF is highly nonlinear' },
          { method: 'Alias', status: 'best', text: 'O(1) iters; time grows with K (cache misses)' },
        ],
      },
      tail: {
        title: 'Tail-Heavy (Left-Skewed)',
        subtitle: 'Fig 2.23: Most samples search toward array end',
        bgCard: 'bg-rose-50',
        borderCard: 'border-rose-200',
        textTitle: 'text-rose-800',
        points: [
          { method: 'Linear', status: 'bad', text: 'Grows as O(K) â€” must scan entire array' },
          { method: 'Binary', status: 'good', text: 'O(log K) â€” shape-independent' },
          { method: 'Exp-double', status: 'good', text: 'O(log K) with different constants' },
          { method: 'Interp', status: 'ok', text: 'Also grows logarithmically' },
          { method: 'Alias', status: 'best', text: 'O(1) iters; time grows with K (cache misses)' },
        ],
      },
      symmetric: {
        title: 'Symmetric (U-Shaped)',
        subtitle: 'Fig 2.25: Mass at both head and tail',
        bgCard: 'bg-violet-50',
        borderCard: 'border-violet-200',
        textTitle: 'text-violet-800',
        points: [
          { method: 'Linear', status: 'bad', text: 'Poor â€” must traverse to tail half the time' },
          { method: 'Binary', status: 'good', text: 'Achieves O(log K) reliably' },
          { method: 'Exp-double', status: 'good', text: 'Also O(log K) performance' },
          { method: 'Interp', status: 'ok', text: 'Moderate â€” CDF somewhat nonlinear' },
          { method: 'Alias', status: 'best', text: 'O(1) iters â€” advantage grows with K' },
        ],
      },
      uniform: {
        title: 'Uniform Distribution',
        subtitle: 'Fig 2.26: Interpolation search best case',
        bgCard: 'bg-amber-50',
        borderCard: 'border-amber-200',
        textTitle: 'text-amber-800',
        points: [
          { method: 'Linear', status: 'bad', text: 'O(K/2) average â€” no shortcut possible' },
          { method: 'Binary', status: 'good', text: 'Reliable O(log K) baseline' },
          { method: 'Interp', status: 'best', text: 'O(log log K)! Nearly flat line â€” CDF perfectly linear' },
          { method: 'Exp-double', status: 'ok', text: 'No skew to exploit' },
          { method: 'Alias', status: 'best', text: 'O(1) iters â€” dominates for large n' },
        ],
      },
    };
  
    const statusColors = {
      best: 'text-blue-600 font-bold',
      good: 'text-green-600 font-semibold',
      ok: 'text-amber-600',
      bad: 'text-rose-600 font-semibold',
    };
  
  const currentObs = observations[activeTab];
    const currentTab = tabs.find(t => t.id === activeTab);
  
    const decisionRules = {
      head: { recommendation: 'Linear or Exp-double for small K; Alias for large n', reason: 'Linear terminates quickly; Exp-double excels with O(log k)' },
      tail: { recommendation: 'Binary or Alias â€” never Linear!', reason: 'Linear grows O(K); Binary/Alias shape-independent' },
      symmetric: { recommendation: 'Binary default; Alias for n > K', reason: 'Linear poor (traverses to tail); Alias advantage grows' },
      uniform: { recommendation: 'Interp for iterations; Alias for wall-clock', reason: 'Interp achieves O(log log K); Alias still O(1)' },
    };

  return (
    <div className="flex flex-col -mt-3">
          <div className="flex items-center justify-between mb-0">
            <div>
              <h1 className="text-3xl font-bold text-gray-900">Method Comparison</h1>
              <p className="text-gray-600 text-lg">Empirical benchmarks: Time per draw vs support size K</p>
            </div>
            <div className="flex gap-1">
              {tabs.map((tab) => (
                <button
                  key={tab.id}
                  onClick={() => handleTabChange(tab.id)}
                  className={`px-3 py-1.5 rounded-lg text-base font-semibold transition-colors ${
                    activeTab === tab.id
                      ? `${tab.bgActive} ${tab.textActive} border-2 ${tab.border}`
                      : 'bg-gray-100 text-gray-600 hover:bg-gray-200 border-2 border-transparent'
                  }`}
                >
                  {tab.label}
                </button>
              ))}
            </div>
          </div>
    
          {/* Content area */}
          <div className={`${currentObs.bgCard} rounded-xl p-3 border-2 ${currentObs.borderCard} mt-2`}>
            <div className="grid grid-cols-3 gap-3">
              {/* Left: Benchmark image (2 cols) */}
              <div className="col-span-2">
                <img 
                  src={benchmarkImages[activeTab]} 
                  alt={`Benchmark for ${currentObs.title}`}
                  className="w-full h-64 object-contain bg-white rounded-lg border-2 border-gray-300"
                />
                {/* Chart description */}
                <div className="text-center mt-1 space-y-0.5">
                  <div className="text-sm text-gray-700 font-medium">
                    Left: Time per draw (seconds) | Right: Iterations per draw
                  </div>
                  <div className="text-xs text-gray-500 italic">
                    Note: Iterations measure algorithmic steps only (excludes O(K) setup cost)
                  </div>
                </div>
                {/* Legend */}
                <div className="flex justify-center gap-3 mt-1 text-sm">
                  <span className="flex items-center gap-1"><span className="w-3 h-0.5 bg-blue-500 inline-block"></span> Alias</span>
                  <span className="flex items-center gap-1"><span className="w-3 h-0.5 bg-orange-500 inline-block"></span> Binary</span>
                  <span className="flex items-center gap-1"><span className="w-3 h-0.5 bg-green-500 inline-block"></span> Exp-double</span>
                  <span className="flex items-center gap-1"><span className="w-3 h-0.5 bg-red-500 inline-block"></span> Interp</span>
                  <span className="flex items-center gap-1"><span className="w-3 h-0.5 bg-purple-500 inline-block"></span> Linear</span>
                </div>
              </div>
    
              {/* Right: Observations + Table (1 col) */}
              <div className="col-span-1 space-y-2">
                {/* Observations */}
                <div className="bg-white rounded-lg p-2 border border-gray-200">
                  <div className={`font-bold ${currentObs.textTitle} text-lg`}>{currentObs.title}</div>
                  <div className="text-xs text-gray-500 italic mb-1">{currentObs.subtitle}</div>
                  <div className="space-y-0.5">
                    {currentObs.points.map((point, idx) => (
                      <div key={idx} className="text-sm flex gap-1">
                        <span className={`font-semibold min-w-[75px] ${statusColors[point.status]}`}>{point.method}:</span>
                        <span className="text-gray-700">{point.text}</span>
                      </div>
                    ))}
                  </div>
                </div>
    
                {/* Decision for this distribution */}
                <div className={`${currentObs.bgCard} rounded-lg p-2 border-2 ${currentObs.borderCard}`}>
                  <div className={`font-semibold ${currentObs.textTitle} text-base`}>Recommendation:</div>
                  <div className="text-base text-gray-800 font-medium">{decisionRules[activeTab].recommendation}</div>
                  <div className="text-sm text-gray-600 italic mt-0.5">{decisionRules[activeTab].reason}</div>
                </div>
    
                {/* Complexity table */}
                <div className="bg-white rounded-lg p-2 border border-gray-200">
                  <div className="text-xs text-gray-500 text-center mb-1">Per-sample complexity (after O(K) setup)</div>
                  <table className="w-full text-sm">
                    <thead>
                      <tr className="border-b-2 border-gray-300">
                        <th className="text-left p-0.5 text-gray-700">Method</th>
                        <th className="text-center p-0.5 text-gray-700">Iters</th>
                        <th className="text-center p-0.5 text-gray-700">Time</th>
                      </tr>
                    </thead>
                    <tbody className="text-xs">
                      <tr className="border-b border-gray-200">
                        <td className="p-0.5 text-purple-700 font-semibold">Linear</td>
                        <td className="p-0.5 text-center"><Latex math="O(K)" /></td>
                        <td className="p-0.5 text-center"><Latex math="O(K)" /></td>
                      </tr>
                      <tr className="border-b border-gray-200">
                        <td className="p-0.5 text-orange-700 font-semibold">Binary</td>
                        <td className="p-0.5 text-center"><Latex math="O(\log K)" /></td>
                        <td className="p-0.5 text-center"><Latex math="O(\log K)" /></td>
                      </tr>
                      <tr className="border-b border-gray-200">
                        <td className="p-0.5 text-red-700 font-semibold">Interp</td>
                        <td className="p-0.5 text-center"><Latex math="O(\log\log K)" /></td>
                        <td className="p-0.5 text-center text-gray-500">varies</td>
                      </tr>
                      <tr>
                        <td className="p-0.5 text-blue-700 font-bold">Alias</td>
                        <td className="p-0.5 text-center font-bold text-blue-600"><Latex math="O(1)" /></td>
                        <td className="p-0.5 text-center text-blue-600"><Latex math="O(1)" />*</td>
                      </tr>
                    </tbody>
                  </table>
                  <div className="text-xs text-gray-500 mt-1">*Alias time grows slightly with K due to cache misses on random array access</div>
                </div>
    
                {/* Key insight */}
                <div className="bg-blue-100 rounded-lg p-2 border-2 border-blue-300">
                  <div className="text-sm text-center text-blue-800 font-medium">
                    Alias = <strong>O(1) iterations</strong> | Time grows with K (cache)
                  </div>
                  <div className="text-xs text-center text-blue-700 mt-0.5">
                    Limitation: Requires <strong>finite discrete</strong> support; rebuild if weights change
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                        SLIDE 39: SECTION SUMMARY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide39_SectionSummary() {
  return (
    <div className="flex flex-col -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-0">Section 2.3: Putting It All Together</h1>
          <p className="text-gray-600 text-base mb-2">The Inverse CDF Method â€” Complete Toolkit and Limitations</p>
    
          {/* Core Formula */}
          <div className="bg-gradient-to-r from-indigo-100 via-purple-100 to-indigo-100 rounded-xl p-2 mb-2 border-2 border-indigo-300">
            <div className="text-center">
              <div className="text-sm text-indigo-700 mb-0.5">The Probability Integral Transform</div>
              <Latex math="U \sim \text{Uniform}(0,1) \;\Rightarrow\; X = F^{-1}(U) \sim F" display={true} />
            </div>
          </div>
    
          <div className="grid grid-cols-2 gap-3 mb-2">
            {/* Left: What We Covered */}
            <div className="space-y-2">
              {/* Continuous */}
              <div className="bg-emerald-50 rounded-lg p-2 border border-emerald-200">
                <div className="font-bold text-emerald-800 text-sm mb-1">Continuous Distributions</div>
                <div className="text-xs text-emerald-700 space-y-0.5">
                  <div>â€¢ Algebraic inversion: Exponential, Weibull, Pareto, Cauchy</div>
                  <div>â€¢ Numerical precision: Use <Latex math="-\ln(U)" /> for tails</div>
                </div>
              </div>
    
              {/* Discrete Algorithms */}
              <div className="bg-blue-50 rounded-lg p-2 border border-blue-200">
                <div className="font-bold text-blue-800 text-sm mb-1">Discrete Sampling Algorithms</div>
                <table className="w-full text-xs text-blue-700">
                  <thead>
                    <tr className="border-b border-blue-200">
                      <th className="text-left p-0.5">Method</th>
                      <th className="text-center p-0.5">Sample</th>
                      <th className="text-left p-0.5">When</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td className="p-0.5">Linear</td>
                      <td className="text-center p-0.5"><Latex math="O(K)" /></td>
                      <td className="p-0.5 text-xs">Small K, right-skew</td>
                    </tr>
                    <tr className="bg-blue-100/50">
                      <td className="p-0.5">Binary</td>
                      <td className="text-center p-0.5"><Latex math="O(\log K)" /></td>
                      <td className="p-0.5 text-xs">General default</td>
                    </tr>
                    <tr>
                      <td className="p-0.5">Interp</td>
                      <td className="text-center p-0.5"><Latex math="O(\log\log K)" /></td>
                      <td className="p-0.5 text-xs">Linear CDF only</td>
                    </tr>
                    <tr className="bg-emerald-100/50 font-semibold">
                      <td className="p-0.5">Alias</td>
                      <td className="text-center p-0.5"><Latex math="O(1)" /></td>
                      <td className="p-0.5 text-xs">n â‰« K (LLMs!)</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
    
            {/* Right: Limitations */}
            <div className="bg-rose-50 rounded-lg p-2 border-2 border-rose-300">
              <div className="font-bold text-rose-800 text-sm mb-1">Inverse CDF Limitations</div>
              <div className="space-y-1.5">
                <div className="bg-white rounded p-1.5">
                  <div className="font-semibold text-rose-700 text-xs">1. No analytic <Latex math="F^{-1}" /></div>
                  <div className="text-xs text-rose-600">Normal: have <Latex math="\Phi" />, can't invert algebraically</div>
                  <div className="text-xs text-rose-500 italic">â†’ Box-Muller, Ziggurat</div>
                </div>
                <div className="bg-white rounded p-1.5">
                  <div className="font-semibold text-amber-700 text-xs">2. Multivariate (direct)</div>
                  <div className="text-xs text-amber-600"><Latex math="F: \mathbb{R}^d \to [0,1]" /> â€” can't invert scalar to vector</div>
                  <div className="text-xs text-amber-500 italic">â†’ But CAN use on conditionals!</div>
                </div>
                <div className="bg-white rounded p-1.5">
                  <div className="font-semibold text-purple-700 text-xs">3. Unnormalized density</div>
                  <div className="text-xs text-purple-600">Posterior: <Latex math="p(\theta|y) \propto" /> ? (unknown Z)</div>
                  <div className="text-xs text-purple-500 italic">â†’ Can't compute F, need MCMC</div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Key Takeaways */}
          <div className="bg-amber-50 rounded-lg p-2 border border-amber-200 mb-2">
            <div className="font-bold text-amber-800 text-sm mb-1">Key Takeaways</div>
            <div className="grid grid-cols-4 gap-2 text-xs text-amber-700">
              <div className="bg-white rounded p-1.5">
                <div className="font-semibold">1. First choice</div>
                <div>Try inverse CDF first â€” direct & exact</div>
              </div>
              <div className="bg-white rounded p-1.5">
                <div className="font-semibold">2. Discrete = search</div>
                <div>Binary default; Alias for many samples</div>
              </div>
              <div className="bg-white rounded p-1.5">
                <div className="font-semibold">3. Know limits</div>
                <div>Normal, multivariate, posterior</div>
              </div>
              <div className="bg-white rounded p-1.5">
                <div className="font-semibold">4. Precision</div>
                <div>Use <Latex math="-\ln(U)" /> for tails</div>
              </div>
            </div>
          </div>
    
          {/* Next Sections */}
          <div className="bg-gradient-to-r from-teal-100 to-cyan-100 rounded-lg p-2 border border-teal-300">
            <div className="font-bold text-teal-800 text-sm mb-1 text-center">Coming Up: When We Need More</div>
            <div className="grid grid-cols-3 gap-2">
              <div className="bg-white rounded-lg p-2 border border-teal-200 text-center">
                <div className="text-teal-700 font-bold text-sm">Section 2.4</div>
                <div className="text-xs text-teal-600">Box-Muller Transform</div>
                <div className="text-xs text-teal-500 italic">Normal from 2 uniforms</div>
              </div>
              <div className="bg-white rounded-lg p-2 border border-violet-200 text-center">
                <div className="text-violet-700 font-bold text-sm">Section 2.5</div>
                <div className="text-xs text-violet-600">Rejection Sampling</div>
                <div className="text-xs text-violet-500 italic">Any bounded density</div>
              </div>
              <div className="bg-white rounded-lg p-2 border border-indigo-200 text-center">
                <div className="text-indigo-700 font-bold text-sm">Chapter 5</div>
                <div className="text-xs text-indigo-600">MCMC Methods</div>
                <div className="text-xs text-indigo-500 italic">Complex posteriors</div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                        SLIDE 40: TRANSFORM HERO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide40_TransformHero() {
  return (
    <div className="p-8 flex flex-col items-center justify-center h-full bg-gradient-to-b from-indigo-50 to-white">
          {/* Section number */}
          <div className="text-6xl font-bold text-indigo-300 mb-2">2.4</div>
          
          {/* Title */}
          <h1 className="text-4xl font-bold text-gray-900 mb-2 text-center">Transformation Methods</h1>
          <p className="text-xl text-gray-600 mb-6 text-center">Exploiting Mathematical Structure</p>
    
          {/* Central concept */}
          <div className="bg-gradient-to-r from-indigo-100 via-purple-100 to-pink-100 rounded-2xl p-6 mb-6 border-2 border-indigo-300 max-w-3xl">
            <div className="text-center text-lg text-indigo-800">
              When <Latex math="F^{-1}" /> is intractable, find a <strong>transformation</strong> that converts 
              simple variates into complex ones
            </div>
          </div>
    
          {/* Distribution hierarchy preview */}
          <div className="flex items-center gap-3 mb-6">
            <div className="bg-blue-100 rounded-xl px-4 py-3 border-2 border-blue-300">
              <div className="text-blue-800 font-bold text-center">Uniform</div>
              <div className="text-blue-600 text-sm text-center">U(0,1)</div>
            </div>
            
            <div className="text-3xl text-gray-400"><Latex math="\rightarrow" /></div>
            
            <div className="bg-purple-100 rounded-xl px-4 py-3 border-2 border-purple-400">
              <div className="text-purple-800 font-bold text-center">Normal</div>
              <div className="text-purple-600 text-sm text-center">Box-Muller</div>
            </div>
            
            <div className="text-3xl text-gray-400"><Latex math="\rightarrow" /></div>
            
            <div className="bg-gradient-to-b from-rose-100 to-amber-100 rounded-xl px-4 py-3 border-2 border-rose-300">
              <div className="text-rose-800 font-bold text-center text-sm">Distribution</div>
              <div className="text-rose-800 font-bold text-center text-sm">Ecosystem</div>
              <div className="text-rose-600 text-xs text-center mt-1"><Latex math="t, F, \chi^2, \ldots" /></div>
            </div>
          </div>
    
          {/* Key methods */}
          <div className="grid grid-cols-3 gap-4 max-w-2xl">
            <div className="bg-emerald-50 rounded-lg p-3 border border-emerald-200 text-center">
              <div className="font-bold text-emerald-800">Box-Muller</div>
              <div className="text-sm text-emerald-600">2 uniforms <Latex math="\rightarrow" /> 2 normals</div>
            </div>
            <div className="bg-amber-50 rounded-lg p-3 border border-amber-200 text-center">
              <div className="font-bold text-amber-800">Polar Method</div>
              <div className="text-sm text-amber-600">No trigonometry</div>
            </div>
            <div className="bg-cyan-50 rounded-lg p-3 border border-cyan-200 text-center">
              <div className="font-bold text-cyan-800">Ziggurat</div>
              <div className="text-sm text-cyan-600">Library standard</div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 41: WHY TRANSFORM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide41_WhyTransform() {
  return (
    <div className="p-6 flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-4">Why Transformation Methods?</h1>
    
          {/* Problem Statement */}
          <div className="bg-rose-50 rounded-lg p-3 mb-4 border-2 border-rose-300">
            <div className="font-bold text-rose-800 mb-1">The Challenge</div>
            <div className="text-rose-700 text-sm">
              When <Latex math="F^{-1}" /> has no closed form, inverse CDF requires expensive numerical methods
            </div>
          </div>
    
          {/* Three approaches comparison */}
          <div className="grid grid-cols-3 gap-3 mb-4 flex-grow">
            {/* Numerical */}
            <div className="bg-gray-50 rounded-lg p-3 border border-gray-300">
              <div className="font-bold text-gray-700 text-sm mb-2">Numerical Inversion</div>
              <div className="text-xs text-gray-600 space-y-1">
                <div>Solve <Latex math="F(x) = u" /> iteratively</div>
                <div className="text-gray-500">Newton-Raphson, Brent</div>
              </div>
              <div className="mt-2 bg-red-100 rounded px-2 py-1">
                <div className="text-red-700 text-xs font-semibold">Cost: 10+ CDF evals/sample</div>
              </div>
            </div>
    
            {/* Polynomial */}
            <div className="bg-gray-50 rounded-lg p-3 border border-gray-300">
              <div className="font-bold text-gray-700 text-sm mb-2">Polynomial Approx</div>
              <div className="text-xs text-gray-600 space-y-1">
                <div>Rational approximations</div>
                <div className="text-gray-500">scipy.special.ndtri</div>
              </div>
              <div className="mt-2 bg-amber-100 rounded px-2 py-1">
                <div className="text-amber-700 text-xs font-semibold">Cost: Many arithmetic ops</div>
              </div>
            </div>
    
            {/* Transformation */}
            <div className="bg-emerald-50 rounded-lg p-3 border-2 border-emerald-400">
              <div className="font-bold text-emerald-700 text-sm mb-2">Transformation</div>
              <div className="text-xs text-emerald-600 space-y-1">
                <div>Algebraic/geometric</div>
                <div className="text-emerald-500">Exploit structure</div>
              </div>
              <div className="mt-2 bg-emerald-200 rounded px-2 py-1">
                <div className="text-emerald-800 text-xs font-semibold">Cost: Few operations!</div>
              </div>
            </div>
          </div>
    
          {/* Box-Muller cost */}
          <div className="bg-blue-50 rounded-lg p-3 mb-3 border border-blue-200">
            <div className="font-bold text-blue-800 text-sm mb-2">Box-Muller: 2 Normals for the Price of...</div>
            <div className="flex items-center justify-center gap-6">
              <div className="text-center">
                <div className="text-blue-600 text-lg font-mono">1</div>
                <div className="text-blue-500 text-xs">logarithm</div>
              </div>
              <div className="text-blue-300 text-xl">+</div>
              <div className="text-center">
                <div className="text-blue-600 text-lg font-mono">1</div>
                <div className="text-blue-500 text-xs">square root</div>
              </div>
              <div className="text-blue-300 text-xl">+</div>
              <div className="text-center">
                <div className="text-blue-600 text-lg font-mono">2</div>
                <div className="text-blue-500 text-xs">trig functions</div>
              </div>
              <div className="text-blue-400 text-xl">=</div>
              <div className="text-center bg-blue-200 rounded px-3 py-1">
                <div className="text-blue-800 text-lg font-bold">2</div>
                <div className="text-blue-700 text-xs font-semibold">independent normals!</div>
              </div>
            </div>
          </div>
    
          {/* Key advantage */}
          <div className="bg-purple-100 rounded-lg p-3 border-2 border-purple-300">
            <div className="flex items-center gap-2">
              <div className="text-purple-600 text-xl font-bold">Key:</div>
              <div>
                <span className="text-purple-700 text-sm">
                  Normal unlocks <Latex math="\chi^2" />, <Latex math="t" />, <Latex math="F" />, lognormal, Rayleigh, Maxwell, MVN...
                </span>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 42: NORMAL CHALLENGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide42_NormalChallenge() {
  return (
    <div className="p-6 flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-3">The Normal Distribution Challenge</h1>
    
          {/* The normal density and CDF */}
          <div className="grid grid-cols-2 gap-4 mb-4">
            <div className="bg-blue-50 rounded-lg p-3 border border-blue-200">
              <div className="font-bold text-blue-800 text-sm mb-2">Standard Normal Density</div>
              <div className="text-center py-2">
                <Latex math="\phi(z) = \frac{1}{\sqrt{2\pi}} e^{-z^2/2}" display={true} />
              </div>
              <div className="text-blue-600 text-xs text-center">Simple, beautiful, symmetric</div>
            </div>
    
            <div className="bg-rose-50 rounded-lg p-3 border border-rose-200">
              <div className="font-bold text-rose-800 text-sm mb-2">Standard Normal CDF</div>
              <div className="text-center py-2">
                <Latex math="\Phi(z) = \int_{-\infty}^{z} \frac{1}{\sqrt{2\pi}} e^{-t^2/2} \, dt" display={true} />
              </div>
              <div className="text-rose-600 text-xs text-center">No closed-form expression!</div>
            </div>
          </div>
    
          {/* The problem */}
          <div className="bg-red-100 rounded-lg p-4 mb-4 border-2 border-red-300">
            <div className="flex items-start gap-3">
              <span className="text-red-500 text-2xl font-bold">!</span>
              <div>
                <div className="font-bold text-red-800 mb-1">The Gaussian Integral is Transcendental</div>
                <div className="text-red-700 text-sm">
                  <Latex math="\int e^{-x^2} dx" /> cannot be expressed using elementary functions (proved by Liouville)
                </div>
                <div className="text-red-600 text-xs mt-1">
                  Therefore <Latex math="\Phi^{-1}(u)" /> has no algebraic formula!
                </div>
              </div>
            </div>
          </div>
    
          {/* The insight */}
          <div className="bg-gradient-to-r from-emerald-100 to-teal-100 rounded-lg p-4 mb-3 border-2 border-emerald-300 flex-grow">
            <div className="font-bold text-emerald-800 mb-2 flex items-center gap-2">
              <span className="text-lg">Key:</span> Box-Muller Insight: Consider TWO Normals
            </div>
            
            <div className="grid grid-cols-2 gap-4">
              <div>
                <div className="text-emerald-700 text-sm mb-2">Joint density of two independent normals:</div>
                <div className="bg-white rounded p-2 text-center">
                  <Latex math="f(z_1, z_2) = \frac{1}{2\pi} e^{-(z_1^2 + z_2^2)/2}" display={true} />
                </div>
              </div>
              
              <div>
                <div className="text-teal-700 text-sm mb-2">Depends only on <Latex math="r^2 = z_1^2 + z_2^2" />:</div>
                <div className="bg-white rounded p-2 text-center">
                  <Latex math="f(r, \theta) = \frac{r}{2\pi} e^{-r^2/2}" display={true} />
                </div>
              </div>
            </div>
    
            <div className="mt-3 text-center">
              <div className="inline-block bg-emerald-200 rounded-lg px-4 py-2">
                <span className="text-emerald-800 font-semibold">Polar symmetry makes the intractable tractable!</span>
              </div>
            </div>
          </div>
    
          {/* The 2D integral */}
          <div className="bg-purple-100 rounded-lg p-3 border border-purple-300">
            <div className="flex items-center justify-center gap-4">
              <div className="text-purple-700 text-sm">1D: <Latex math="\int_{-\infty}^{\infty} e^{-x^2/2} dx = \sqrt{2\pi}" /> (no closed-form antiderivative)</div>
              <div className="text-purple-400 font-bold">vs</div>
              <div className="text-purple-700 text-sm">2D: <Latex math="\iint e^{-(x^2+y^2)/2} dx\,dy = 2\pi" /> (separable in polar!)</div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                          SLIDE 43: BOX MULLER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide43_BoxMuller() {
  return (
    <div className="p-4 flex flex-col h-full">
          {/* Title */}
          <h1 className="text-3xl font-bold text-gray-900 mb-2">Box-Muller Transform</h1>
          
          {/* Transformation chain + Warning in same row */}
          <div className="flex items-center gap-3 mb-3">
            <div className="bg-gray-100 rounded-lg px-4 py-2 border border-gray-300 flex-grow">
              <div className="flex items-center justify-center gap-4 text-base">
                <div className="bg-blue-100 rounded-lg px-3 py-1 border border-blue-300">
                  <Latex math="(U_1, U_2) \sim \text{Unif}" />
                </div>
                <Latex math="\xrightarrow{\text{inverse CDF}}" />
                <div className="bg-purple-100 rounded-lg px-3 py-1 border border-purple-300">
                  <Latex math="(R, \Theta)" />
                </div>
                <Latex math="\xrightarrow{\text{Cartesian}}" />
                <div className="bg-green-100 rounded-lg px-3 py-1 border border-green-300">
                  <Latex math="(Z_1, Z_2) \stackrel{\text{iid}}{\sim} \mathcal{N}(0,1)" />
                </div>
              </div>
            </div>
            <div className="bg-rose-100 rounded-lg px-3 py-2 border border-rose-300 flex items-center gap-2 shrink-0">
              <span className="text-rose-500 font-bold">!</span>
              <span className="text-rose-700 text-sm">Two-for-One: Always use BOTH <Latex math="Z_1, Z_2" /></span>
            </div>
          </div>
    
          {/* Main content: 2 columns */}
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: Image + Key Insight + Step 1 */}
            <div className="flex flex-col gap-2">
              <div className="bg-emerald-100 rounded-xl p-2 border-2 border-emerald-400">
                <div className="text-emerald-800 font-bold text-lg text-center">
                  Radial symmetry <Latex math="\Rightarrow R \perp \Theta" />
                </div>
                <div className="text-emerald-700 text-sm text-center">
                  Density depends only on <Latex math="r = \sqrt{z_1^2 + z_2^2}" />, not direction
                </div>
              </div>
              <div className="bg-white rounded-xl border-2 border-blue-200 p-1 flex items-center justify-center">
                <img 
                  src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_4_fig02_box_muller_geometry.png"
                  alt="Box-Muller Geometry"
                  className="max-w-full max-h-44 object-contain"
                />
              </div>
              
              {/* Step 1: Uniform to Polar */}
              <div className="bg-blue-50 rounded-xl p-3 border border-blue-300 flex-grow">
                <div className="font-bold text-blue-800 text-base mb-2">Step 1: Uniform <Latex math="\to" /> Polar</div>
                <div className="grid grid-cols-2 gap-2 text-base mb-2">
                  <div className="text-blue-700"><Latex math="R = \sqrt{-2\ln U_1}" /></div>
                  <div className="text-blue-700"><Latex math="U_1 = e^{-R^2/2}" /></div>
                  <div className="text-blue-700"><Latex math="\Theta = 2\pi U_2" /></div>
                  <div className="text-blue-700"><Latex math="U_2 = \Theta/(2\pi)" /></div>
                </div>
                <div className="bg-blue-100 rounded p-2">
                  <div className="text-center">
                    <Latex math="\frac{\partial(U_1, U_2)}{\partial(R, \Theta)} = \begin{pmatrix} -Re^{-R^2/2} & 0 \\ 0 & \frac{1}{2\pi} \end{pmatrix}" display={true} />
                  </div>
                  <div className="text-center text-base mt-2 font-semibold text-blue-800">
                    <Latex math="\left|\det J_1\right| = \underbrace{Re^{-R^2/2}}_{\text{Rayleigh}(1)} \cdot \underbrace{\frac{1}{2\pi}}_{\text{Unif}(0,2\pi)}" />
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right: Step 2 + Result */}
            <div className="flex flex-col gap-2">
              {/* Step 2: Polar to Cartesian */}
              <div className="bg-purple-50 rounded-xl p-3 border border-purple-300">
                <div className="font-bold text-purple-800 text-base mb-2">Step 2: Polar <Latex math="\to" /> Cartesian</div>
                <div className="grid grid-cols-2 gap-2 text-base mb-2">
                  <div className="text-purple-700"><Latex math="Z_1 = R\cos\Theta" /></div>
                  <div className="text-purple-700"><Latex math="Z_2 = R\sin\Theta" /></div>
                </div>
                <div className="bg-purple-100 rounded p-2">
                  <div className="text-center">
                    <Latex math="\frac{\partial(Z_1, Z_2)}{\partial(R, \Theta)} = \begin{pmatrix} \frac{\partial Z_1}{\partial R} & \frac{\partial Z_1}{\partial \Theta} \\[4pt] \frac{\partial Z_2}{\partial R} & \frac{\partial Z_2}{\partial \Theta} \end{pmatrix} = \begin{pmatrix} \cos\Theta & -R\sin\Theta \\[4pt] \sin\Theta & R\cos\Theta \end{pmatrix}" display={true} />
                  </div>
                  <div className="text-center text-base mt-2 font-semibold text-purple-800">
                    <Latex math="\left|\det J_2\right| = R\cos^2\Theta + R\sin^2\Theta = R" />
                  </div>
                </div>
              </div>
    
              {/* Result */}
              <div className="bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl p-3 border-2 border-green-400 flex-grow">
                <div className="font-bold text-green-800 text-base mb-2">Combined Result</div>
                <div className="text-center">
                  <Latex math="f(z_1, z_2) = 1 \cdot |J_1| \cdot |J_2|^{-1} = \frac{R}{2\pi}e^{-R^2/2} \cdot \frac{1}{R} = \frac{1}{2\pi}e^{-(z_1^2+z_2^2)/2}" display={true} />
                </div>
                <div className="text-center text-lg mt-3">
                  <Latex math="= \underbrace{\frac{1}{\sqrt{2\pi}}e^{-z_1^2/2}}_{\phi(z_1)} \cdot \underbrace{\frac{1}{\sqrt{2\pi}}e^{-z_2^2/2}}_{\phi(z_2)}" />
                </div>
                <div className="bg-green-200 rounded px-2 py-1 mt-3 text-center">
                  <span className="text-green-800 font-semibold text-base">
                    Factorization proves <Latex math="Z_1, Z_2 \stackrel{\text{iid}}{\sim} \mathcal{N}(0,1)" />
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                   SLIDE 44: BOX MULLER IMPLEMENTATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide44_BoxMullerImplementation() {
  return (
    <div className="p-4 flex flex-col h-full">
          {/* Title */}
          <h1 className="text-3xl font-bold text-gray-900 mb-3">Box-Muller: Algorithm</h1>
    
          {/* Input/Output banner */}
          <div className="flex items-center justify-center gap-4 mb-3">
            <div className="bg-blue-100 rounded-lg px-4 py-2 border border-blue-300">
              <div className="font-bold text-blue-800 text-sm">Input</div>
              <div className="text-blue-700 text-base"><Latex math="U_1, U_2 \stackrel{\text{iid}}{\sim} \text{Unif}(0,1)" /></div>
            </div>
            <div className="text-2xl text-gray-400"><Latex math="\rightarrow" /></div>
            <div className="bg-green-100 rounded-lg px-4 py-2 border border-green-300">
              <div className="font-bold text-green-800 text-sm">Output</div>
              <div className="text-green-700 text-base"><Latex math="Z_1, Z_2 \stackrel{\text{iid}}{\sim} \mathcal{N}(0,1)" /></div>
            </div>
          </div>
    
          {/* Main content: 2 columns */}
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: Large Image */}
            <div className="flex flex-col gap-3">
              <div className="bg-white rounded-xl border-2 border-blue-300 p-2 flex-grow flex items-center justify-center overflow-hidden max-h-72">
                <img 
                  src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_4_fig02_box_muller_geometry.png"
                  alt="Box-Muller Geometry: Uniform square to polar to bivariate normal"
                  className="max-w-full max-h-44 object-contain"
                />
              </div>
    
              {/* Complete formulas */}
              <div className="bg-indigo-100 rounded-xl p-3 border-2 border-indigo-300">
                <div className="font-bold text-indigo-800 text-base mb-2">Complete Formulas</div>
                <div className="space-y-1 text-lg">
                  <div><Latex math="Z_1 = \sqrt{-2\ln U_1} \cos(2\pi U_2)" /></div>
                  <div><Latex math="Z_2 = \sqrt{-2\ln U_1} \sin(2\pi U_2)" /></div>
                </div>
              </div>
            </div>
    
            {/* Right: Algorithm + Notes */}
            <div className="flex flex-col gap-3">
              {/* Algorithm steps */}
              <div className="bg-gray-50 rounded-xl p-4 border-2 border-gray-300 flex-grow">
                <div className="font-bold text-gray-800 text-lg mb-3">Algorithm: Box-Muller Transform</div>
                
                <div className="space-y-3">
                  <div className="flex items-start gap-3">
                    <div className="bg-blue-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shrink-0">1</div>
                    <div className="text-base">
                      <span className="text-gray-700">Generate </span>
                      <Latex math="U_1, U_2 \stackrel{\text{iid}}{\sim} \text{Unif}(0, 1)" />
                    </div>
                  </div>
                  
                  <div className="flex items-start gap-3">
                    <div className="bg-purple-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shrink-0">2</div>
                    <div className="text-base">
                      <span className="text-gray-700">Radius: </span>
                      <Latex math="R = \sqrt{-2 \ln U_1}" />
                      <span className="text-gray-500 text-sm ml-2">(Rayleigh)</span>
                    </div>
                  </div>
                  
                  <div className="flex items-start gap-3">
                    <div className="bg-green-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shrink-0">3</div>
                    <div className="text-base">
                      <span className="text-gray-700">Angle: </span>
                      <Latex math="\Theta = 2\pi U_2" />
                      <span className="text-gray-500 text-sm ml-2">(Uniform)</span>
                    </div>
                  </div>
                  
                  <div className="flex items-start gap-3">
                    <div className="bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shrink-0">4</div>
                    <div className="text-base">
                      <span className="text-gray-700">Return: </span>
                      <Latex math="Z_1 = R\cos\Theta,\; Z_2 = R\sin\Theta" />
                    </div>
                  </div>
                </div>
              </div>
    
              {/* Why it works */}
              <div className="bg-emerald-100 rounded-xl p-3 border-2 border-emerald-400">
                <div className="font-bold text-emerald-800 text-base mb-1">Why It Works</div>
                <div className="text-emerald-700 text-sm">
                  <Latex math="R \sim \text{Rayleigh}" /> via inverse CDF
                </div>
                <div className="text-emerald-700 text-sm">
                  <Latex math="\Theta \sim \text{Unif}(0, 2\pi)" /> independent of R
                </div>
                <div className="text-emerald-700 text-sm mt-1">
                  Radial symmetry <Latex math="\Rightarrow" /> density factors as <Latex math="\phi(z_1)\phi(z_2)" />
                </div>
              </div>
    
              {/* Key implementation notes */}
              <div className="grid grid-cols-3 gap-2">
                <div className="bg-amber-50 rounded-lg p-2 border border-amber-200">
                  <div className="font-semibold text-amber-700 text-sm">Vectorize</div>
                  <div className="text-amber-600 text-xs">All pairs at once</div>
                </div>
                <div className="bg-purple-50 rounded-lg p-2 border border-purple-200">
                  <div className="font-semibold text-purple-700 text-sm">Two-for-One</div>
                  <div className="text-purple-600 text-xs">Use BOTH outputs</div>
                </div>
                <div className="bg-rose-50 rounded-lg p-2 border border-rose-200">
                  <div className="font-semibold text-rose-700 text-sm">Guard log(0)</div>
                  <div className="text-rose-600 text-xs">Clamp U away from 0</div>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                        SLIDE 45: MARSAGLIA POLAR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide45_MarsagliaPolar() {
  return (
    <div className="p-4 flex flex-col h-full">
          {/* Title row */}
          <div className="flex items-center justify-between mb-3">
            <div>
              <h1 className="text-3xl font-bold text-gray-900">Marsaglia Polar Method</h1>
              <div className="text-gray-600 text-base">Eliminate trigonometry via rejection sampling in the unit disk</div>
            </div>
            <div className="bg-teal-100 rounded-lg px-4 py-2 border-2 border-teal-300">
              <div className="font-bold text-teal-800 text-base">No Trig!</div>
              <div className="text-teal-700 text-sm">Only: log, sqrt, div</div>
            </div>
          </div>
    
          {/* Main content: 2 columns */}
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: Large Figure */}
            <div className="flex flex-col gap-3">
              <div className="bg-white rounded-xl border-2 border-blue-300 p-2 flex items-center justify-center overflow-hidden" style={{maxHeight: '16rem'}}>
                <img 
                  src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_4_fig03_polar_method.png"
                  alt="Polar Method: Sample in square, keep points in disk, transform to normal"
                  className="max-w-full max-h-full object-contain"
                />
              </div>
    
              {/* Key insight */}
              <div className="bg-emerald-100 rounded-xl p-3 border-2 border-emerald-400">
                <div className="font-bold text-emerald-800 text-base mb-1">Key Insight</div>
                <div className="text-emerald-700 text-base">
                  <Latex math="(V_1/\sqrt{S}, V_2/\sqrt{S})" /> is uniform on unit circle
                </div>
                <div className="text-emerald-700 text-base mt-1">
                  <Latex math="S \sim \text{Unif}(0,1)" /> since <Latex math="P(S \leq s) = \pi s / \pi = s" />
                </div>
              </div>
            </div>
    
            {/* Right: Algorithm + Stats */}
            <div className="flex flex-col gap-3">
              {/* Algorithm */}
              <div className="bg-gray-50 rounded-xl p-4 border-2 border-gray-300 flex-grow">
                <div className="font-bold text-gray-800 text-lg mb-3">Algorithm</div>
                <div className="space-y-2 text-base">
                  <div className="flex items-start gap-3">
                    <span className="bg-blue-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shrink-0">1</span>
                    <span><Latex math="V_1, V_2 \sim \text{Unif}(-1, 1)" /></span>
                  </div>
                  <div className="flex items-start gap-3">
                    <span className="bg-blue-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shrink-0">2</span>
                    <span><Latex math="S = V_1^2 + V_2^2" /></span>
                  </div>
                  <div className="flex items-start gap-3">
                    <span className="bg-rose-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shrink-0">3</span>
                    <span>If <Latex math="S \geq 1" /> or <Latex math="S = 0" />: reject, goto 1</span>
                  </div>
                  <div className="flex items-start gap-3">
                    <span className="bg-purple-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shrink-0">4</span>
                    <span><Latex math="M = \sqrt{-2\ln S \,/\, S}" /></span>
                  </div>
                  <div className="flex items-start gap-3">
                    <span className="bg-green-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shrink-0">5</span>
                    <span><Latex math="Z_1 = V_1 M,\quad Z_2 = V_2 M" /></span>
                  </div>
                </div>
              </div>
    
              {/* Acceptance rate */}
              <div className="bg-amber-100 rounded-xl p-3 border-2 border-amber-300">
                <div className="font-bold text-amber-800 text-base mb-1">Acceptance Rate</div>
                <div className="text-amber-700 text-lg">
                  <Latex math="P(\text{accept}) = \frac{\pi}{4} \approx 78.5\%" />
                </div>
                <div className="text-amber-600 text-sm mt-1">Expected: 1.27 attempts per accepted pair</div>
              </div>
    
              {/* Comparison */}
              <div className="bg-blue-50 rounded-xl p-3 border-2 border-blue-200">
                <div className="font-bold text-blue-800 text-base mb-2">Box-Muller vs Polar</div>
                <div className="grid grid-cols-2 gap-4 text-base">
                  <div>
                    <div className="font-semibold text-blue-700">Box-Muller</div>
                    <div className="text-blue-600 text-sm">1 log, 1 sqrt, 2 trig</div>
                    <div className="text-blue-600 text-sm">1.00 uniforms/normal</div>
                  </div>
                  <div>
                    <div className="font-semibold text-purple-700">Polar</div>
                    <div className="text-purple-600 text-sm">1 log, 1 sqrt, 1 div</div>
                    <div className="text-purple-600 text-sm">1.27 uniforms/normal</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                           SLIDE 46: ZIGGURAT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide46_Ziggurat() {
  return (
    <div className="p-4 flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">The Ziggurat Algorithm</h1>
          <div className="text-gray-600 text-sm mb-2">The library-standard method for normal generation</div>
    
          {/* Textbook figure */}
          <div className="bg-white rounded-lg border-2 border-blue-200 p-2 mb-2">
            <img 
              src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_4_fig04_ziggurat_concept.png"
              alt="Ziggurat algorithm: rectangles cover the density with equal areas"
              className="w-full max-h-110 object-contain"
            />
            <div className="text-center text-xs text-gray-500 mt-1">
              Fig. 2.33: Layered rectangles cover density; most samples accepted without density evaluation
            </div>
          </div>
    
          <div className="grid grid-cols-2 gap-3 flex-grow">
            {/* Left: Algorithm */}
            <div className="space-y-2">
              <div className="bg-gray-50 rounded-lg p-2 border border-gray-200">
                <div className="font-bold text-gray-800 text-xs mb-1">Algorithm Sketch</div>
                <div className="text-xs space-y-0.5">
                  <div><span className="text-blue-600 font-mono">1.</span> Pick rectangle <Latex math="i" /> uniformly</div>
                  <div><span className="text-blue-600 font-mono">2.</span> <Latex math="U \sim \text{Unif}(0,1)" />, <Latex math="x = U \cdot x_i" /></div>
                  <div><span className="text-blue-600 font-mono">3.</span> If <Latex math="x < x_{i-1}" />: <span className="text-green-600 font-semibold">accept!</span></div>
                  <div><span className="text-blue-600 font-mono">4.</span> Else: edge/tail check (rare)</div>
                </div>
              </div>
    
              <div className="bg-emerald-50 rounded-lg p-2 border border-emerald-200">
                <div className="font-bold text-emerald-800 text-xs mb-1">Why So Fast?</div>
                <div className="text-xs text-emerald-700">
                  <div>99%+ fast path: 1 int + 1 float + 1 compare</div>
                  <div>No log, sqrt, or trig on fast path!</div>
                </div>
              </div>
            </div>
    
            {/* Right: Comparison + Warning */}
            <div className="space-y-2">
              <div className="bg-blue-50 rounded-lg p-2 border border-blue-200">
                <div className="font-bold text-blue-800 text-xs mb-1">Expected Ops per Sample</div>
                <div className="grid grid-cols-3 gap-1 text-xs text-center">
                  <div className="bg-white rounded p-1">
                    <div className="text-gray-600">Box-Muller</div>
                    <div className="text-blue-700 font-mono">~4</div>
                  </div>
                  <div className="bg-white rounded p-1">
                    <div className="text-gray-600">Polar</div>
                    <div className="text-blue-700 font-mono">~3</div>
                  </div>
                  <div className="bg-emerald-100 rounded p-1">
                    <div className="text-emerald-700 font-bold">Ziggurat</div>
                    <div className="text-emerald-800 font-mono">~1</div>
                  </div>
                </div>
              </div>
    
              <div className="bg-rose-100 rounded-lg p-2 border-2 border-rose-300">
                <div className="font-bold text-rose-800 text-xs">Don't Implement Your Own!</div>
                <div className="text-rose-700 text-xs">
                  Complex precomputation, subtle tail handling. Use <code className="bg-rose-200 px-1 rounded text-xs">rng.standard_normal()</code>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                     SLIDE 47: DERIVED DISTRIBUTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide47_DerivedDistributions() {
  return (
    <div className="p-6 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-2">Distributions Derived from Normal</h1>
          <div className="text-gray-600 text-base mb-4">Box-Muller unlocks an entire statistical ecosystem</div>
    
          {/* Main content: 3 columns */}
          <div className="grid grid-cols-3 gap-4 flex-grow">
            
            {/* Chi-Squared */}
            <div className="bg-rose-50 rounded-xl p-4 border-2 border-rose-400 flex flex-col">
              <div className="font-bold text-rose-800 text-xl mb-2">Chi-Squared <Latex math="\chi^2_\nu" /></div>
              
              <div className="bg-white rounded-lg p-3 mb-3 text-center">
                <div className="text-lg"><Latex math="\chi^2_\nu = Z_1^2 + Z_2^2 + \cdots + Z_\nu^2" /></div>
                <div className="text-rose-600 text-sm mt-1">Sum of <Latex math="\nu" /> squared <Latex math="\mathcal{N}(0,1)" /></div>
              </div>
    
              <div className="bg-white rounded-lg p-3 mb-3 flex-grow">
                <div className="font-semibold text-rose-800 text-base mb-2">Properties:</div>
                <div className="space-y-1 text-rose-700">
                  <div className="flex justify-between text-base">
                    <span>Mean:</span>
                    <Latex math="\mathbb{E}[\chi^2_\nu] = \nu" />
                  </div>
                  <div className="flex justify-between text-base">
                    <span>Variance:</span>
                    <Latex math="\text{Var} = 2\nu" />
                  </div>
                  <div className="flex justify-between text-base">
                    <span>Additive:</span>
                    <Latex math="\chi^2_{\nu_1} + \chi^2_{\nu_2} = \chi^2_{\nu_1+\nu_2}" />
                  </div>
                </div>
              </div>
    
              <div className="bg-gray-800 rounded-lg p-2">
                <code className="text-green-400 text-sm">np.sum(rng.standard_normal(df)**2)</code>
              </div>
            </div>
    
            {/* Student's t */}
            <div className="bg-blue-50 rounded-xl p-4 border-2 border-blue-400 flex flex-col">
              <div className="font-bold text-blue-800 text-xl mb-2">Student's t <Latex math="t_\nu" /></div>
              
              <div className="bg-white rounded-lg p-3 mb-3 text-center">
                <div className="text-lg"><Latex math="t_\nu = \frac{Z}{\sqrt{V/\nu}}" /></div>
                <div className="text-blue-600 text-sm mt-1"><Latex math="Z \sim \mathcal{N}(0,1)" />, <Latex math="V \sim \chi^2_\nu" /> indep.</div>
              </div>
    
              <div className="bg-white rounded-lg p-3 mb-3 flex-grow">
                <div className="font-semibold text-blue-800 text-base mb-2">Properties:</div>
                <div className="space-y-1 text-blue-700">
                  <div className="flex justify-between text-base">
                    <span>Mean:</span>
                    <span><Latex math="0" /> (<Latex math="\nu > 1" />)</span>
                  </div>
                  <div className="flex justify-between text-base">
                    <span>Variance:</span>
                    <span><Latex math="\frac{\nu}{\nu-2}" /> (<Latex math="\nu > 2" />)</span>
                  </div>
                  <div className="text-base text-blue-600 mt-2">
                    Heavier tails than normal; <Latex math="t_\nu \to \mathcal{N}(0,1)" /> as <Latex math="\nu \to \infty" />
                  </div>
                </div>
              </div>
    
              <div className="bg-gray-800 rounded-lg p-2">
                <code className="text-green-400 text-sm">Z / np.sqrt(chi_sq(df) / df)</code>
              </div>
            </div>
    
            {/* F Distribution */}
            <div className="bg-green-50 rounded-xl p-4 border-2 border-green-400 flex flex-col">
              <div className="font-bold text-green-800 text-xl mb-2">F Distribution <Latex math="F_{\nu_1, \nu_2}" /></div>
              
              <div className="bg-white rounded-lg p-3 mb-3 text-center">
                <div className="text-lg"><Latex math="F_{\nu_1, \nu_2} = \frac{V_1/\nu_1}{V_2/\nu_2}" /></div>
                <div className="text-green-600 text-sm mt-1"><Latex math="V_1 \sim \chi^2_{\nu_1}" />, <Latex math="V_2 \sim \chi^2_{\nu_2}" /> indep.</div>
              </div>
    
              <div className="bg-white rounded-lg p-3 mb-3 flex-grow">
                <div className="font-semibold text-green-800 text-base mb-2">Properties:</div>
                <div className="space-y-1 text-green-700">
                  <div className="flex justify-between text-base">
                    <span>Mean:</span>
                    <span><Latex math="\frac{\nu_2}{\nu_2 - 2}" /> (<Latex math="\nu_2 > 2" />)</span>
                  </div>
                  <div className="text-base text-green-600 mt-2">
                    Ratio of variance estimates; powers ANOVA
                  </div>
                </div>
              </div>
    
              <div className="bg-gray-800 rounded-lg p-2">
                <code className="text-green-400 text-sm">(V1/df1) / (V2/df2)</code>
              </div>
            </div>
          </div>
    
          {/* Key relationship */}
          <div className="bg-purple-100 rounded-xl p-4 mt-4 border-2 border-purple-400">
            <div className="flex items-center justify-center gap-6">
              <div className="font-bold text-purple-800 text-lg">Key Relationship:</div>
              <div className="text-purple-700 text-lg">
                If <Latex math="T \sim t_\nu" />, then <Latex math="T^2 \sim F_{1, \nu}" />
              </div>
              <div className="text-purple-600 text-base">
                (Proof: <Latex math="T^2 = Z^2/(V/\nu) = (\chi^2_1/1)/(\chi^2_\nu/\nu)" />)
              </div>
            </div>
          </div>
    
          {/* Applications row */}
          <div className="grid grid-cols-4 gap-3 mt-4">
            <div className="bg-amber-50 rounded-lg p-3 border border-amber-300 text-center">
              <div className="font-semibold text-amber-700 text-base">Variance Est.</div>
              <div className="text-amber-600 text-sm"><Latex math="(n-1)s^2/\sigma^2 \sim \chi^2_{n-1}" /></div>
            </div>
            <div className="bg-cyan-50 rounded-lg p-3 border border-cyan-300 text-center">
              <div className="font-semibold text-cyan-700 text-base">Unknown <Latex math="\sigma" /></div>
              <div className="text-cyan-600 text-sm"><Latex math="(\bar{X}-\mu)/(s/\sqrt{n}) \sim t_{n-1}" /></div>
            </div>
            <div className="bg-pink-50 rounded-lg p-3 border border-pink-300 text-center">
              <div className="font-semibold text-pink-700 text-base">Variance Ratio</div>
              <div className="text-pink-600 text-sm"><Latex math="s_1^2/s_2^2 \sim F" /> under <Latex math="H_0" /></div>
            </div>
            <div className="bg-teal-50 rounded-lg p-3 border border-teal-300 text-center">
              <div className="font-semibold text-teal-700 text-base">ANOVA</div>
              <div className="text-teal-600 text-sm">MS(B)/MS(W) <Latex math="\sim F" /></div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                          SLIDE 48: MVN THEORY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide48_MVNTheory() {
  return (
    <div className="p-4 flex flex-col h-full -mt-2">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Multivariate Normal: Theory</h1>
    
          {/* Fundamental transformation */}
          <div className="bg-blue-50 rounded-lg p-2 mb-2 border-2 border-blue-300">
            <div className="font-bold text-blue-800 text-sm mb-1">Fundamental Transformation</div>
            <div className="text-center">
              <Latex math="\mathbf{X} = \boldsymbol{\mu} + \mathbf{A}\mathbf{Z} \sim \mathcal{N}(\boldsymbol{\mu}, \boldsymbol{\Sigma}) \quad \text{when } \mathbf{AA}^T = \boldsymbol{\Sigma}" display={true} />
            </div>
            <div className="text-center text-blue-600 text-xs">
              where <Latex math="\mathbf{Z} \sim \mathcal{N}(\mathbf{0}, \mathbf{I}_d)" /> (independent standard normals)
            </div>
          </div>
    
          {/* Textbook figure */}
          <div className="bg-white rounded-lg border-2 border-blue-200 p-2 mb-2">
            <img 
              src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_4_fig06_mvn_generation.png"
              alt="MVN generation: standard normal Z transforms via Cholesky L to correlated X"
              className="w-full max-h-110 object-contain"
            />
            <div className="text-center text-xs text-gray-500 mt-1">
              Fig. 2.35: Spherical <Latex math="\mathbf{Z}" /> cloud transforms to elliptical <Latex math="\mathbf{X}" /> via Cholesky
            </div>
          </div>
    
          <div className="grid grid-cols-2 gap-2 flex-grow">
            {/* Left: Two methods */}
            <div className="space-y-2">
              <div className="bg-green-50 rounded-lg p-2 border border-green-200">
                <div className="font-bold text-green-800 text-xs mb-1">Matrix Square Root Methods</div>
                <div className="text-xs space-y-1">
                  <div className="flex justify-between text-green-700">
                    <span><strong>Cholesky:</strong> <Latex math="\boldsymbol{\Sigma} = \mathbf{LL}^T" /></span>
                    <span className="text-green-500"><Latex math="O(d^3/3)" /></span>
                  </div>
                  <div className="flex justify-between text-green-700">
                    <span><strong>Eigen:</strong> <Latex math="\mathbf{A} = \mathbf{Q}\boldsymbol{\Lambda}^{1/2}" /></span>
                    <span className="text-green-500"><Latex math="O(d^3)" /></span>
                  </div>
                </div>
              </div>
    
              <div className="bg-purple-50 rounded-lg p-2 border border-purple-200">
                <div className="font-bold text-purple-800 text-xs mb-1">Covariance Check</div>
                <div className="text-xs text-purple-700">
                  <Latex math="\text{Cov}(\mathbf{X}) = \mathbf{A}\mathbb{E}[\mathbf{ZZ}^T]\mathbf{A}^T = \mathbf{AA}^T = \boldsymbol{\Sigma}" />
                </div>
              </div>
            </div>
    
            {/* Right: Comparison */}
            <div className="space-y-2">
              <div className="bg-blue-100 rounded-lg p-2 border border-blue-300">
                <div className="font-bold text-blue-800 text-xs">Cholesky (Preferred)</div>
                <div className="text-xs text-blue-700">
                  <div>L lower-triangular, fastest</div>
                  <div className="text-blue-500">Requires strict PD</div>
                </div>
              </div>
              <div className="bg-amber-100 rounded-lg p-2 border border-amber-300">
                <div className="font-bold text-amber-800 text-xs">Eigendecomposition</div>
                <div className="text-xs text-amber-700">
                  <div>Handles near-singular cases</div>
                  <div className="text-amber-500">Gives principal components</div>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 49: MVN CHOLESKY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide49_MVNCholesky() {
  return (
    <div className="p-6 flex flex-col h-full">
          {/* Title */}
          <h1 className="text-3xl font-bold text-gray-900 mb-4">MVN: Matrix Decomposition Methods</h1>
    
          {/* Goal box - centered and large */}
          <div className="bg-gradient-to-r from-blue-100 via-purple-100 to-amber-100 rounded-xl p-5 mb-5 border-2 border-blue-400 shadow-sm">
            <div className="text-center">
              <div className="text-2xl font-bold text-gray-800 mb-2">
                Goal: Find <Latex math="\mathbf{A}" /> such that <Latex math="\mathbf{AA}^T = \boldsymbol{\Sigma}" />
              </div>
              <div className="text-lg text-gray-700">
                Then sample: <Latex math="\mathbf{X} = \boldsymbol{\mu} + \mathbf{AZ}" /> where <Latex math="\mathbf{Z} \sim \mathcal{N}(\mathbf{0}, \mathbf{I}_d)" />
              </div>
            </div>
          </div>
    
          {/* Three methods */}
          <div className="grid grid-cols-3 gap-4 flex-grow">
            {/* Cholesky */}
            <div className="bg-blue-50 rounded-xl p-4 border-2 border-blue-400 flex flex-col">
              <div className="font-bold text-blue-800 text-xl mb-2">Cholesky: <Latex math="\boldsymbol{\Sigma} = \mathbf{LL}^T" /></div>
              
              <div className="bg-white rounded-lg p-3 mb-3">
                <div className="font-semibold text-blue-800 text-base mb-1">Construction (match entries):</div>
                <div className="text-blue-700 text-base space-y-1">
                  <div>Expand: <Latex math="(\mathbf{LL}^T)_{ij} = \sum_{k=1}^{\min(i,j)} L_{ik}L_{jk}" /></div>
                  <div>Diagonal: <Latex math="L_{jj} = \sqrt{\Sigma_{jj} - \sum_{k=1}^{j-1} L_{jk}^2}" /></div>
                  <div>Off-diag: <Latex math="L_{ij} = \frac{\Sigma_{ij} - \sum_{k=1}^{j-1} L_{ik}L_{jk}}{L_{jj}}" /></div>
                </div>
              </div>
    
              <div className="bg-white rounded-lg p-3 mb-3 flex-grow">
                <div className="font-semibold text-blue-800 text-base mb-1">Why PD is required:</div>
                <div className="text-blue-700 text-base">
                  <div>Each diagonal needs <Latex math="\Sigma_{jj} - \sum L_{jk}^2 > 0" /></div>
                  <div className="mt-1">PD <Latex math="\Leftrightarrow" /> all leading submatrices have positive determinant <Latex math="\Leftrightarrow" /> all these quantities are positive</div>
                </div>
              </div>
    
              <div className="bg-gray-800 rounded-lg p-2 mb-3">
                <code className="text-green-400 text-sm">L = scipy.linalg.cholesky(Sigma, lower=True)</code>
              </div>
    
              <div className="text-base">
                <div className="text-red-600"><strong>Requires:</strong> Strict PD</div>
                <div className="text-green-700"><strong>Benefits:</strong> <Latex math="O(d^3)" />, unique, fastest</div>
              </div>
            </div>
    
            {/* Eigendecomposition */}
            <div className="bg-purple-50 rounded-xl p-4 border-2 border-purple-400 flex flex-col">
              <div className="font-bold text-purple-800 text-xl mb-2">Spectral: <Latex math="\boldsymbol{\Sigma} = \mathbf{Q\Lambda Q}^T" /></div>
              
              <div className="bg-white rounded-lg p-3 mb-3">
                <div className="font-semibold text-purple-800 text-base mb-1">Construction (eigenvalue problem):</div>
                <div className="text-purple-700 text-base space-y-1">
                  <div>Solve <Latex math="\boldsymbol{\Sigma}\mathbf{q}_i = \lambda_i \mathbf{q}_i" /> for each <Latex math="i" /></div>
                  <div><Latex math="\mathbf{Q} = [\mathbf{q}_1 | \cdots | \mathbf{q}_d]" /> orthonormal cols</div>
                  <div><Latex math="\boldsymbol{\Lambda} = \text{diag}(\lambda_1, \ldots, \lambda_d)" /></div>
                </div>
              </div>
    
              <div className="bg-white rounded-lg p-3 mb-3 flex-grow">
                <div className="font-semibold text-purple-800 text-base mb-1">Why symmetric matrices work:</div>
                <div className="text-purple-700 text-base">
                  <div><Latex math="\lambda_i \in \mathbb{R}" />: <Latex math="\lambda\|\mathbf{v}\|^2 = \bar{\lambda}\|\mathbf{v}\|^2" /></div>
                  <div><Latex math="\mathbf{q}_i \perp \mathbf{q}_j" />: <Latex math="\lambda_i(\mathbf{q}_i \cdot \mathbf{q}_j) = \lambda_j(\mathbf{q}_i \cdot \mathbf{q}_j)" /></div>
                  <div className="mt-1">Set <Latex math="\mathbf{A} = \mathbf{Q}\boldsymbol{\Lambda}^{1/2}" />, then <Latex math="\mathbf{AA}^T = \boldsymbol{\Sigma}" /></div>
                </div>
              </div>
    
              <div className="bg-gray-800 rounded-lg p-2 mb-3">
                <code className="text-green-400 text-sm">eigenvalues, Q = np.linalg.eigh(Sigma)</code>
              </div>
    
              <div className="text-base">
                <div className="text-red-600"><strong>Requires:</strong> <Latex math="\lambda_i \geq 0" /> (PSD ok)</div>
                <div className="text-green-700"><strong>Benefits:</strong> Handles PSD, geometry</div>
              </div>
            </div>
    
            {/* QR */}
            <div className="bg-amber-50 rounded-xl p-4 border-2 border-amber-400 flex flex-col">
              <div className="font-bold text-amber-800 text-xl mb-2">QR: <Latex math="\mathbf{A} = \mathbf{QR}" /></div>
              
              <div className="bg-white rounded-lg p-3 mb-3">
                <div className="font-semibold text-amber-800 text-base mb-1">Construction (Gram-Schmidt):</div>
                <div className="text-amber-700 text-base space-y-1">
                  <div><Latex math="\mathbf{q}_1 = \mathbf{a}_1 / \|\mathbf{a}_1\|" /></div>
                  <div><Latex math="\mathbf{u}_j = \mathbf{a}_j - \sum_{i<j}(\mathbf{q}_i^T \mathbf{a}_j)\mathbf{q}_i" /></div>
                  <div><Latex math="\mathbf{q}_j = \mathbf{u}_j / \|\mathbf{u}_j\|" />, then <Latex math="R_{ij} = \mathbf{q}_i^T \mathbf{a}_j" /></div>
                </div>
              </div>
    
              <div className="bg-white rounded-lg p-3 mb-3 flex-grow">
                <div className="font-semibold text-amber-800 text-base mb-1">Connection to Cholesky:</div>
                <div className="text-amber-700 text-base">
                  <div>If <Latex math="\mathbf{A} = \mathbf{QR}" />, then:</div>
                  <div><Latex math="\mathbf{A}^T\mathbf{A} = \mathbf{R}^T\mathbf{Q}^T\mathbf{QR} = \mathbf{R}^T\mathbf{R}" /></div>
                  <div className="mt-1 text-amber-600 font-medium">QR of data gives Cholesky of cov!</div>
                </div>
              </div>
    
              <div className="bg-gray-800 rounded-lg p-2 mb-3">
                <code className="text-green-400 text-sm">Q, R = np.linalg.qr(A)</code>
              </div>
    
              <div className="text-base">
                <div className="text-red-600"><strong>Requires:</strong> Full column rank</div>
                <div className="text-green-700"><strong>Benefits:</strong> Avoids <Latex math="\mathbf{A}^T\mathbf{A}" />, stable</div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 50: TRANSFORM SUMMARY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide50_TransformSummary() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">Section 2.4 Summary</h1>
          <p className="text-gray-600 text-lg mb-3">Transformation Methods: From Uniform to Any Distribution</p>
    
          {/* Main content: 2 columns */}
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left column */}
            <div className="flex flex-col gap-3">
              {/* Normal generation methods */}
              <div className="bg-blue-50 rounded-xl p-4 border-2 border-blue-300">
                <div className="font-bold text-blue-800 text-lg mb-2">Normal Generation Methods</div>
                <div className="space-y-2">
                  <div className="flex items-center gap-3">
                    <div className="bg-blue-200 rounded-lg px-2 py-1 text-blue-800 font-semibold text-sm">Box-Muller</div>
                    <span className="text-blue-700 text-base"><Latex math="Z = \sqrt{-2\ln U_1}\cos(2\pi U_2)" /></span>
                  </div>
                  <div className="flex items-center gap-3">
                    <div className="bg-purple-200 rounded-lg px-2 py-1 text-purple-800 font-semibold text-sm">Polar</div>
                    <span className="text-purple-700 text-base"><Latex math="Z = V\sqrt{-2\ln S / S}" /></span>
                  </div>
                  <div className="flex items-center gap-3">
                    <div className="bg-emerald-200 rounded-lg px-2 py-1 text-emerald-800 font-semibold text-sm">Ziggurat</div>
                    <span className="text-emerald-700 text-base">Production standard (3-4x faster)</span>
                  </div>
                </div>
              </div>
    
              {/* Key insights */}
              <div className="bg-amber-50 rounded-xl p-4 border-2 border-amber-300 flex-grow">
                <div className="font-bold text-amber-800 text-lg mb-2">Key Insights</div>
                <div className="space-y-3 text-base">
                  <div className="flex items-start gap-2">
                    <span className="text-amber-600 font-bold">1.</span>
                    <span className="text-amber-700"><strong>Radial symmetry</strong> of bivariate normal <Latex math="\Rightarrow R \perp \Theta" /></span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-amber-600 font-bold">2.</span>
                    <span className="text-amber-700"><strong>Jacobian factors:</strong> <Latex math="\underbrace{Re^{-R^2/2}}_{\text{Rayleigh}} \cdot \underbrace{\frac{1}{2\pi}}_{\text{Uniform}}" /></span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-amber-600 font-bold">3.</span>
                    <span className="text-amber-700"><strong>Two-for-One:</strong> Always use BOTH <Latex math="Z_1, Z_2" /></span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-amber-600 font-bold">4.</span>
                    <span className="text-amber-700"><strong>Polar acceptance:</strong> <Latex math="\pi/4 \approx 78.5\%" /></span>
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right column */}
            <div className="flex flex-col gap-3">
              {/* Distribution hierarchy */}
              <div className="bg-purple-50 rounded-xl p-4 border-2 border-purple-300">
                <div className="font-bold text-purple-800 text-lg mb-2">Distribution Hierarchy</div>
                <div className="space-y-2 text-base">
                  <div className="grid grid-cols-2 gap-2">
                    <div className="text-purple-700"><strong>Chi-squared:</strong></div>
                    <div className="text-purple-700"><Latex math="\chi^2_k = \sum_{i=1}^k Z_i^2" /></div>
                  </div>
                  <div className="grid grid-cols-2 gap-2">
                    <div className="text-purple-700"><strong>Student's t:</strong></div>
                    <div className="text-purple-700"><Latex math="t_\nu = \frac{Z}{\sqrt{V/\nu}}" /></div>
                  </div>
                  <div className="grid grid-cols-2 gap-2">
                    <div className="text-purple-700"><strong>F:</strong></div>
                    <div className="text-purple-700"><Latex math="F = \frac{V_1/\nu_1}{V_2/\nu_2}" /></div>
                  </div>
                </div>
              </div>
    
              {/* MVN */}
              <div className="bg-emerald-50 rounded-xl p-4 border-2 border-emerald-300 flex-grow">
                <div className="font-bold text-emerald-800 text-lg mb-2">Multivariate Normal</div>
                <div className="text-center mb-2">
                  <Latex math="\mathbf{X} = \boldsymbol{\mu} + \mathbf{A}\mathbf{Z}" display={true} />
                </div>
                <div className="text-emerald-700 text-sm text-center mb-2">
                  where <Latex math="\mathbf{A}\mathbf{A}^T = \boldsymbol{\Sigma}" />
                </div>
                <div className="space-y-1 text-sm">
                  <div className="flex items-start gap-2 bg-emerald-100 rounded p-1.5">
                    <span className="font-bold text-emerald-800">Cholesky:</span>
                    <span className="text-emerald-700">Default, fastest <Latex math="O(d^3/3)" /></span>
                  </div>
                  <div className="flex items-start gap-2 bg-blue-100 rounded p-1.5">
                    <span className="font-bold text-blue-800">Eigen:</span>
                    <span className="text-blue-700">Have PCA / need truncation</span>
                  </div>
                  <div className="flex items-start gap-2 bg-purple-100 rounded p-1.5">
                    <span className="font-bold text-purple-800">QR:</span>
                    <span className="text-purple-700">Have data matrix <Latex math="\mathbf{A}" /></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom: Preview of rejection + Next section */}
          <div className="bg-gradient-to-r from-rose-100 to-pink-100 rounded-xl p-3 mt-3 border-2 border-rose-300">
            <div className="flex items-center justify-between">
              <div className="flex-grow">
                <div className="text-rose-800 font-bold text-base mb-1">Sneak Preview: We Already Used Rejection Sampling!</div>
                <div className="flex gap-4 text-sm text-rose-700">
                  <div><strong>Polar:</strong> Reject points outside unit disk (<Latex math="\pi/4" /> acceptance)</div>
                  <div><strong>Ziggurat:</strong> Reject points outside density layers (~97% acceptance)</div>
                </div>
              </div>
              <div className="flex items-center gap-2 pl-4 border-l-2 border-rose-300">
                <span className="text-rose-600 text-xl"><Latex math="\rightarrow" /></span>
                <span className="text-rose-800 font-bold text-lg">Section 2.5</span>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                        SLIDE 51: REJECTION HERO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide51_RejectionHero() {
  return (
    <div className="p-8 flex flex-col items-center justify-center h-full bg-gradient-to-b from-rose-50 to-white">
          {/* Section number */}
          <div className="text-6xl font-bold text-rose-300 mb-2">2.5</div>
          
          {/* Title */}
          <h1 className="text-4xl font-bold text-gray-900 mb-2 text-center">Rejection Sampling</h1>
          <p className="text-xl text-gray-600 mb-6 text-center">The Universal Method</p>
    
          {/* Central concept */}
          <div className="bg-gradient-to-r from-rose-100 via-pink-100 to-purple-100 rounded-2xl p-6 mb-6 border-2 border-rose-300 max-w-3xl">
            <div className="text-center text-lg text-rose-800">
              Sample from <strong>any density</strong> you can evaluate â€” no inverse CDF, 
              no transformation required
            </div>
          </div>
    
          {/* Key equation */}
          <div className="bg-white rounded-xl p-5 mb-6 shadow-lg border-2 border-gray-200">
            <div className="text-center mb-2 text-gray-700">The Accept/Reject Criterion</div>
            <div className="text-center text-2xl">
              <Latex math="U \leq \frac{f(X)}{M \cdot g(X)} \quad \Rightarrow \quad \text{Accept } X" display={true} />
            </div>
          </div>
    
          {/* Method comparison flow */}
          <div className="flex items-center gap-3 mb-6">
            <div className="bg-blue-100 rounded-xl px-4 py-3 border-2 border-blue-300 opacity-60">
              <div className="text-blue-800 font-bold text-center text-sm">Inverse CDF</div>
              <div className="text-blue-600 text-xs text-center">Needs <Latex math="F^{-1}" /></div>
            </div>
            
            <div className="bg-purple-100 rounded-xl px-4 py-3 border-2 border-purple-300 opacity-60">
              <div className="text-purple-800 font-bold text-center text-sm">Transform</div>
              <div className="text-purple-600 text-xs text-center">Needs structure</div>
            </div>
            
            <div className="text-3xl text-gray-400">vs.</div>
            
            <div className="bg-gradient-to-b from-rose-200 to-pink-200 rounded-xl px-5 py-3 border-2 border-rose-400 shadow-md">
              <div className="text-rose-900 font-bold text-center">Rejection</div>
              <div className="text-rose-700 text-sm text-center">Just evaluate <Latex math="f(x)" /></div>
            </div>
          </div>
    
          {/* Key properties */}
          <div className="grid grid-cols-3 gap-4 max-w-2xl">
            <div className="bg-emerald-50 rounded-lg p-3 border border-emerald-200 text-center">
              <div className="font-bold text-emerald-800">Universal</div>
              <div className="text-sm text-emerald-600">Any evaluable density</div>
            </div>
            <div className="bg-amber-50 rounded-lg p-3 border border-amber-200 text-center">
              <div className="font-bold text-amber-800">Exact</div>
              <div className="text-sm text-amber-600">No approximation</div>
            </div>
            <div className="bg-cyan-50 rounded-lg p-3 border border-cyan-200 text-center">
              <div className="font-bold text-cyan-800">Cost</div>
              <div className="text-sm text-cyan-600"><Latex math="P(\text{accept}) = 1/M" /></div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                      SLIDE 52: WHEN ALL ELSE FAILS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide52_WhenAllElseFails() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">When All Else Fails</h1>
          <p className="text-gray-600 text-lg mb-3">The Sampling Problem: No Inverse, No Transform</p>
    
          {/* Main content: 2 columns */}
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left column: Method recap */}
            <div className="flex flex-col gap-3">
              {/* Method comparison table */}
              <div className="bg-gray-50 rounded-xl p-4 border-2 border-gray-200">
                <div className="font-bold text-gray-800 text-lg mb-3">What We've Learned</div>
                <div className="space-y-2">
                  <div className="flex items-center gap-3 bg-blue-50 rounded-lg p-2">
                    <div className="bg-blue-200 rounded px-2 py-1 text-blue-800 font-semibold text-sm w-24">Inverse CDF</div>
                    <div className="flex-grow text-sm text-blue-700">Need <Latex math="F^{-1}(u)" /> in closed form</div>
                    <span className="text-blue-400 text-xs">Rare</span>
                  </div>
                  <div className="flex items-center gap-3 bg-purple-50 rounded-lg p-2">
                    <div className="bg-purple-200 rounded px-2 py-1 text-purple-800 font-semibold text-sm w-24">Transform</div>
                    <div className="flex-grow text-sm text-purple-700">Need mathematical structure</div>
                    <span className="text-purple-400 text-xs">Special</span>
                  </div>
                  <div className="flex items-center gap-3 bg-rose-100 rounded-lg p-2 border-2 border-rose-300">
                    <div className="bg-rose-300 rounded px-2 py-1 text-rose-900 font-bold text-sm w-24">Rejection</div>
                    <div className="flex-grow text-sm text-rose-800 font-medium">Only evaluate <Latex math="f(x)" /></div>
                    <span className="text-rose-600 text-xs font-bold">Universal!</span>
                  </div>
                </div>
              </div>
    
              {/* Distributions that need rejection */}
              <div className="bg-amber-50 rounded-xl p-4 border-2 border-amber-200 flex-grow">
                <div className="font-bold text-amber-800 text-base mb-2">Distributions Without Nice Properties</div>
                <div className="space-y-2 text-sm">
                  <div className="flex items-start gap-2">
                    <span className="text-amber-600">â€¢</span>
                    <span className="text-amber-700"><strong>Beta(<Latex math="\alpha, \beta" />)</strong> â€” no closed-form <Latex math="F^{-1}" /></span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-amber-600">â€¢</span>
                    <span className="text-amber-700"><strong>Truncated distributions</strong> â€” modified support</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-amber-600">â€¢</span>
                    <span className="text-amber-700"><strong>Bayesian posteriors</strong> â€” unknown normalizer</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-amber-600">â€¢</span>
                    <span className="text-amber-700"><strong>Custom densities</strong> â€” domain-specific models</span>
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right column: The problem */}
            <div className="flex flex-col gap-3">
              {/* Unnormalized density problem */}
              <div className="bg-rose-50 rounded-xl p-4 border-2 border-rose-300">
                <div className="font-bold text-rose-800 text-lg mb-2">The Normalizing Constant Problem</div>
                <div className="bg-white rounded-lg p-3 mb-3">
                  <Latex math="f(x) = \frac{1}{Z} \tilde{f}(x)" display={true} />
                </div>
                <div className="space-y-2 text-sm text-rose-700">
                  <div className="flex items-center gap-2">
                    <span className="font-mono bg-rose-100 px-1 rounded"><Latex math="\tilde{f}(x)" /></span>
                    <span>= unnormalized kernel (easy to evaluate)</span>
                  </div>
                  <div className="flex items-center gap-2">
                    <span className="font-mono bg-rose-100 px-1 rounded"><Latex math="Z" /></span>
                    <span>= <Latex math="\int \tilde{f}(x) dx" /> (often intractable!)</span>
                  </div>
                </div>
              </div>
    
              {/* Bayesian example */}
              <div className="bg-indigo-50 rounded-xl p-4 border-2 border-indigo-200 flex-grow">
                <div className="font-bold text-indigo-800 text-base mb-2">Bayesian Posteriors</div>
                <div className="bg-white rounded-lg p-2 mb-2">
                  <Latex math="\pi(\theta | y) = \frac{L(y|\theta) \cdot \pi(\theta)}{\int L(y|\theta') \pi(\theta') d\theta'}" display={true} />
                </div>
                <div className="text-sm text-indigo-700 mb-2">
                  The denominator (marginal likelihood) is the normalizing constant â€” often a high-dimensional integral!
                </div>
                <div className="bg-green-100 rounded-lg p-2 border border-green-300">
                  <div className="text-green-800 text-sm font-semibold">Rejection Sampling's Superpower:</div>
                  <div className="text-green-700 text-sm">Z cancels in the accept/reject ratio!</div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom: Key insight */}
          <div className="bg-gradient-to-r from-emerald-100 to-teal-100 rounded-xl p-3 mt-3 border-2 border-emerald-300">
            <div className="flex items-center justify-center gap-4">
              <div className="text-emerald-800 font-bold text-base">Key Insight:</div>
              <div className="text-emerald-700">
                If we can <strong>evaluate</strong> <Latex math="f(x)" /> pointwise (even up to a constant), we can <strong>sample</strong> from it
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                      SLIDE 53: FUNDAMENTAL THEOREM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Helper component: RegionSampler
function RegionSampler() {
  const canvasRef = useRef(null);
  const [points, setPoints] = useState([]);
  const [isRunning, setIsRunning] = useState(false);

  // Beta(2.5, 5) density (normalized) - nice smooth unimodal shape
  const betaPdf = (x) => {
    if (x <= 0 || x >= 1) return 0;
    const a = 2.5, b = 5;
    const B = 0.0128; // B(2.5, 5)
    return Math.pow(x, a - 1) * Math.pow(1 - x, b - 1) / B;
  };

  const maxDensity = 3.2; // Extended to give more headroom above curve peak (~2.5)

  // Listen for sync messages from other windows via BroadcastChannel
  useEffect(() => {
    const channel = new BroadcastChannel('slide53-sampler');
    
    channel.onmessage = (event) => {
      if (event.data?.type === 'REGION_SAMPLER_SYNC') {
        setPoints(event.data.points);
        setIsRunning(event.data.isRunning);
      }
      if (event.data?.type === 'REGION_SAMPLER_RESET') {
        setPoints([]);
        setIsRunning(false);
      }
    };
    
    // Also listen for postMessage (backup)
    const handleMessage = (event) => {
      if (event.data?.type === 'REGION_SAMPLER_SYNC') {
        setPoints(event.data.points);
        setIsRunning(event.data.isRunning);
      }
      if (event.data?.type === 'REGION_SAMPLER_RESET') {
        setPoints([]);
        setIsRunning(false);
      }
    };
    
    window.addEventListener('message', handleMessage);
    
    return () => {
      channel.close();
      window.removeEventListener('message', handleMessage);
    };
  }, []);

  // Broadcast state to other windows
  const broadcastState = (newPoints, running) => {
    const message = { type: 'REGION_SAMPLER_SYNC', points: newPoints, isRunning: running };
    
    // Primary: BroadcastChannel (works across tabs/windows same origin)
    const channel = new BroadcastChannel('slide53-sampler');
    channel.postMessage(message);
    channel.close();
    
    // Backup: postMessage for opener/child windows
    if (window.opener) {
      window.opener.postMessage(message, '*');
    }
    if (window.frames) {
      for (let i = 0; i < window.frames.length; i++) {
        try {
          window.frames[i].postMessage(message, '*');
        } catch (e) {
          // Ignore cross-origin errors
        }
      }
    }
  };

  const broadcastReset = () => {
    const message = { type: 'REGION_SAMPLER_RESET' };
    
    const channel = new BroadcastChannel('slide53-sampler');
    channel.postMessage(message);
    channel.close();
    
    if (window.opener) window.opener.postMessage(message, '*');
    if (window.frames) {
      for (let i = 0; i < window.frames.length; i++) {
        try {
          window.frames[i].postMessage(message, '*');
        } catch (e) {}
      }
    }
  };

  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    const w = canvas.width;
    const h = canvas.height;
    const padL = 35, padR = 8, padT = 12, padB = 24;
    const plotW = w - padL - padR;
    const plotH = h - padT - padB;

    // Clear
    ctx.fillStyle = '#f8fafc';
    ctx.fillRect(0, 0, w, h);

    const toCanvasX = (x) => padL + x * plotW;
    const toCanvasY = (y) => padT + plotH - (y / maxDensity) * plotH;

    // Draw region R (shaded)
    ctx.beginPath();
    ctx.moveTo(toCanvasX(0), toCanvasY(0));
    for (let i = 0; i <= 100; i++) {
      const x = i / 100;
      ctx.lineTo(toCanvasX(x), toCanvasY(betaPdf(x)));
    }
    ctx.lineTo(toCanvasX(1), toCanvasY(0));
    ctx.closePath();
    ctx.fillStyle = 'rgba(59, 130, 246, 0.15)';
    ctx.fill();

    // Draw density curve f(x)
    ctx.beginPath();
    ctx.moveTo(toCanvasX(0.001), toCanvasY(betaPdf(0.001)));
    for (let i = 1; i <= 100; i++) {
      const x = i / 100;
      ctx.lineTo(toCanvasX(x), toCanvasY(betaPdf(x)));
    }
    ctx.strokeStyle = '#2563eb';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Draw sampled points
    points.forEach(({ x, u }) => {
      ctx.beginPath();
      ctx.arc(toCanvasX(x), toCanvasY(u), 3.5, 0, 2 * Math.PI);
      ctx.fillStyle = '#10b981';
      ctx.fill();
      ctx.strokeStyle = '#065f46';
      ctx.lineWidth = 1;
      ctx.stroke();
    });

    // Axes
    ctx.strokeStyle = '#374151';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(padL, padT + plotH);
    ctx.lineTo(padL + plotW, padT + plotH);
    ctx.moveTo(padL, padT + plotH);
    ctx.lineTo(padL, padT);
    ctx.stroke();

    // Axis labels - clear, non-rotated
    ctx.fillStyle = '#374151';
    ctx.font = 'italic 14px Georgia, serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText('x', padL + plotW / 2, h - 18);
    
    // u label - positioned to the left of axis, not rotated
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    ctx.fillText('u', padL - 8, padT + plotH / 2);

    // f(x) label - positioned to the right of peak, inside the curve
    ctx.fillStyle = '#2563eb';
    ctx.font = 'italic 13px Georgia, serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('f(x)', toCanvasX(0.55), toCanvasY(1.6));

    // R label
    ctx.fillStyle = '#1e40af';
    ctx.font = 'bold italic 16px Georgia, serif';
    ctx.fillText('R', toCanvasX(0.42), toCanvasY(0.85));

  }, [points]);

  const samplePoints = () => {
    if (isRunning) return;
    setIsRunning(true);
    
    let newPoints = [...points];
    let count = 0;
    
    const interval = setInterval(() => {
      if (count >= 80) {
        clearInterval(interval);
        setIsRunning(false);
        broadcastState(newPoints, false);
        return;
      }
      
      // Rejection sample to get uniform point in R
      let x, u;
      do {
        x = Math.random();
        u = Math.random() * 2.5; // Sample up to actual max, not extended axis
      } while (u > betaPdf(x));
      
      newPoints.push({ x, u });
      setPoints([...newPoints]);
      broadcastState([...newPoints], true);
      count++;
    }, 40);
  };

  const reset = () => {
    setPoints([]);
    setIsRunning(false);
    broadcastReset();
  };

  return (
    <div className="flex flex-col items-center flex-grow w-full h-full">
      <canvas 
        ref={canvasRef} 
        width={320} 
        height={240}
        className="border border-gray-200 rounded w-full"
        style={{ maxHeight: '240px' }}
      />
      <div className="flex gap-2 mt-1">
        <button 
          onClick={samplePoints}
          disabled={isRunning}
          className="px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 disabled:opacity-50 font-medium"
        >
          Sample Uniform on R
        </button>
        <button 
          onClick={reset}
          className="px-2 py-1 bg-gray-400 text-white text-xs rounded hover:bg-gray-500 font-medium"
        >
          Reset
        </button>
      </div>
      <div className="text-xs text-gray-500">
        n = {points.length} points uniform in region R
      </div>
    </div>
  );
}

function Slide53_FundamentalTheorem() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">The Fundamental Theorem of Simulation</h1>
          <p className="text-gray-600 text-lg mb-3">Uniform Points in a Region Yield Samples from Its Boundary</p>
    
          {/* Main content: 3 columns */}
          <div className="grid grid-cols-3 gap-3 flex-grow">
            
            {/* Left column: Define R */}
            <div className="flex flex-col gap-3">
              {/* Define Region R */}
              <div className="bg-gradient-to-br from-amber-50 to-yellow-50 rounded-xl p-4 border-2 border-amber-300 flex-grow">
                <div className="font-bold text-amber-800 text-base mb-2">Define Region <Latex math="\mathcal{R}" /></div>
                <div className="bg-white rounded-lg p-3 mb-3">
                  <Latex math="\mathcal{R} = \{(x, u) : 0 \leq u \leq f(x)\}" display={true} />
                </div>
                <div className="text-amber-700 text-sm space-y-2">
                  <div><Latex math="x" />: horizontal axis (support of <Latex math="f" />)</div>
                  <div><Latex math="u" />: vertical axis from 0 to <Latex math="f(x)" /></div>
                  <div className="mt-2 font-medium">Area<Latex math="(\mathcal{R}) = \int f(x)\,dx = 1" /></div>
                </div>
              </div>
            </div>
    
            {/* Middle column: Theorem + Why It Works */}
            <div className="flex flex-col gap-3">
              {/* Theorem */}
              <div className="bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl p-4 border-2 border-purple-300">
                <div className="font-bold text-purple-800 text-base mb-2">Theorem</div>
                <div className="text-purple-700 text-sm mb-2">
                  If <Latex math="(X, U) \sim \text{Uniform}(\mathcal{R})" />, then <Latex math="X \sim f" />
                </div>
                <div className="bg-white rounded-lg p-3">
                  <div className="text-sm text-gray-500 mb-1">Proof: Compute marginal of X</div>
                  <Latex math="f_X(x) = \int_0^{f(x)} \frac{1}{\text{Area}(\mathcal{R})} \, du = \frac{f(x)}{1} = f(x)" display={true} />
                </div>
              </div>
    
              {/* Why It Works */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 border-2 border-green-300 flex-grow">
                <div className="font-bold text-green-800 text-base mb-2">Why It Works</div>
                <div className="space-y-2 text-sm text-green-700">
                  <div className="flex items-start gap-2">
                    <span className="bg-green-400 text-white rounded-full w-5 h-5 flex items-center justify-center font-bold text-xs flex-shrink-0">1</span>
                    <span>Where <Latex math="f(x)" /> is <strong>large</strong>: more vertical space in <Latex math="\mathcal{R}" />, more points land there</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="bg-green-400 text-white rounded-full w-5 h-5 flex items-center justify-center font-bold text-xs flex-shrink-0">2</span>
                    <span>Where <Latex math="f(x)" /> is <strong>small</strong>: less vertical space, fewer points</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="bg-green-400 text-white rounded-full w-5 h-5 flex items-center justify-center font-bold text-xs flex-shrink-0">3</span>
                    <span><Latex math="P(X \in [a,b])" /> = area of <Latex math="\mathcal{R}" /> over <Latex math="[a,b]" /> = <Latex math="\int_a^b f(x)\,dx" /></span>
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right column: Visualization */}
            <div className="flex flex-col">
              <div className="font-bold text-gray-700 text-sm mb-1 text-center">
                Uniform on <Latex math="\mathcal{R}" /> <Latex math="\Rightarrow" /> Marginal is <Latex math="f" />
              </div>
              <div className="bg-white rounded-xl border-2 border-gray-300 p-1 flex-grow flex flex-col">
                <RegionSampler />
              </div>
            </div>
          </div>
    
          {/* Bottom: The Challenge */}
          <div className="bg-gradient-to-r from-rose-100 to-pink-100 rounded-xl p-3 mt-3 border-2 border-rose-300">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-2">
                <span className="text-rose-800 font-bold text-sm">The Challenge:</span>
                <span className="text-rose-700 text-sm">
                  Sampling uniformly from <Latex math="\mathcal{R}" /> requires generating points under an arbitrary curve â€” 
                  <strong> the very problem we're trying to solve!</strong>
                </span>
              </div>
              <div className="text-rose-600 font-bold text-sm whitespace-nowrap">
                Solution: Envelope <Latex math="\to" />
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 54: ENVELOPE STRATEGY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const ENVELOPE_IMAGE_URL_slide54 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_5_fig01_envelope_concept.png";
function Slide54_EnvelopeStrategy() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">The Envelope Strategy</h1>
          <p className="text-gray-600 text-lg mb-3">Covering the Target with a Simpler Distribution</p>
    
          {/* Main content */}
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: Requirements and Math */}
            <div className="flex flex-col gap-3">
              {/* The domination condition */}
              <div className="bg-gradient-to-r from-rose-100 to-red-100 rounded-xl p-4 border-2 border-rose-300">
                <div className="font-bold text-rose-800 text-lg mb-2">The Envelope Condition</div>
                <div className="bg-white rounded-lg p-3 mb-2">
                  <Latex math="f(x) \leq M \cdot g(x) \quad \forall x \in \text{supp}(f)" display={true} />
                </div>
                <div className="text-rose-700 text-sm mb-2">
                  Optimal bound: <Latex math="M^* = \sup_x \frac{f(x)}{g(x)}" />
                </div>
                <div className="text-rose-600 text-xs">
                  Smaller <Latex math="M" /> = higher acceptance rate = more efficient sampling
                </div>
              </div>
    
              {/* Three requirements */}
              <div className="bg-blue-50 rounded-xl p-4 border-2 border-blue-200 flex-grow">
                <div className="font-bold text-blue-800 text-base mb-2">Requirements for Proposal <Latex math="g(x)" /></div>
                <div className="space-y-2">
                  <div className="flex items-start gap-2 bg-white rounded-lg p-2">
                    <span className="bg-blue-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0">1</span>
                    <div className="text-sm">
                      <span className="font-semibold text-blue-800">Easy to sample:</span>
                      <span className="text-blue-700 ml-1">Uniform, Normal, Exponential, Gamma</span>
                    </div>
                  </div>
                  <div className="flex items-start gap-2 bg-white rounded-lg p-2">
                    <span className="bg-blue-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0">2</span>
                    <div className="text-sm">
                      <span className="font-semibold text-blue-800">Support coverage:</span>
                      <span className="text-blue-700 ml-1"><Latex math="f(x) > 0 \Rightarrow g(x) > 0" /></span>
                    </div>
                  </div>
                  <div className="flex items-start gap-2 bg-white rounded-lg p-2">
                    <span className="bg-blue-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0">3</span>
                    <div className="text-sm">
                      <span className="font-semibold text-blue-800">Tail matching:</span>
                      <span className="text-blue-700 ml-1"><Latex math="g" /> tails <Latex math="\geq" /> <Latex math="f" /> tails (ensures finite <Latex math="M" />)</span>
                    </div>
                  </div>
                </div>
              </div>
    
              {/* The acceptance ratio */}
              <div className="bg-emerald-50 rounded-xl p-3 border-2 border-emerald-300">
                <div className="font-bold text-emerald-800 text-sm mb-1">The Acceptance Ratio</div>
                <div className="bg-white rounded-lg p-2 mb-1">
                  <Latex math="\alpha(x) = \frac{f(x)}{M \cdot g(x)} \in [0, 1]" display={true} />
                </div>
                <div className="text-emerald-700 text-xs">
                  Probability of accepting a proposal at point <Latex math="x" />
                </div>
              </div>
            </div>
    
            {/* Right: Visualization and key insight */}
            <div className="flex flex-col gap-3">
              {/* Envelope visualization - actual figure */}
              <div className="bg-white rounded-xl border-2 border-gray-200 overflow-hidden flex-grow">
                <img 
                  src={ENVELOPE_IMAGE_URL_slide54} 
                  alt="The envelope concept: target density f(x) enclosed by scaled proposal Mg(x), with accept-reject process visualization showing accepted (green) and rejected (red) points"
                  className="w-full h-full object-contain"
                />
              </div>
    
              {/* Overall acceptance probability */}
              <div className="bg-gradient-to-r from-violet-100 to-purple-100 rounded-xl p-3 border-2 border-violet-300">
                <div className="font-bold text-violet-800 text-sm mb-1">Overall Acceptance Probability</div>
                <div className="bg-white rounded-lg p-2">
                  <Latex math="P(\text{Accept}) = \int \alpha(x) g(x)\, dx = \frac{1}{M} \int f(x)\, dx = \frac{1}{M}" display={true} />
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom: Important note */}
          <div className="bg-gradient-to-r from-amber-100 to-yellow-100 rounded-xl p-3 mt-3 border-2 border-amber-300">
            <div className="flex items-start gap-3">
              <div className="text-amber-800 font-bold text-sm whitespace-nowrap">{"âš ï¸ Key Point:"}</div>
              <div className="text-amber-700 text-sm">
                Sample from <Latex math="g(x)" />, <strong>not</strong> <Latex math="M \cdot g(x)" />! 
                The envelope <Latex math="\int M g(x)\,dx = M \neq 1" /> {"â€”"} {"it's not a density."} 
                It defines the <em>geometric region</em> for accept/reject, not what we sample.
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                    SLIDE 55: ACCEPT REJECT ALGORITHM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide55_AcceptRejectAlgorithm() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">The Accept-Reject Algorithm</h1>
          <p className="text-gray-600 text-lg mb-3">The Complete Sampling Procedure</p>
    
          {/* Main content */}
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: Algorithm box */}
            <div className="flex flex-col gap-3">
              {/* Main algorithm */}
              <div className="bg-gradient-to-b from-slate-800 to-slate-900 rounded-xl p-5 text-white flex-grow">
                <div className="font-bold text-blue-300 text-xl mb-3 font-mono">Algorithm: Rejection Sampling</div>
                
                <div className="space-y-2 font-mono text-base">
                  <div className="text-gray-300">
                    <span className="text-purple-300 font-semibold">Input:</span> Target <span className="text-cyan-300">f(x)</span>, proposal <span className="text-green-300">g(x)</span>, bound <span className="text-yellow-300">M</span>
                  </div>
                  <div className="text-gray-300">
                    <span className="text-purple-300 font-semibold">Output:</span> Sample <span className="text-white font-bold">X</span> ~ f
                  </div>
                  
                  <div className="h-3"></div>
                  
                  <div className="text-yellow-400 font-bold text-lg">repeat:</div>
                  <div className="pl-5 space-y-2">
                    <div>
                      <span className="text-green-400 font-semibold">1.</span>
                      <span className="text-white font-bold ml-2">X</span>
                      <span className="text-gray-400 ml-2">~</span>
                      <span className="text-green-300 ml-2">g(x)</span>
                    </div>
                    <div>
                      <span className="text-green-400 font-semibold">2.</span>
                      <span className="text-white font-bold ml-2">U</span>
                      <span className="text-gray-400 ml-2">~</span>
                      <span className="text-blue-300 ml-2">Uniform(0, 1)</span>
                    </div>
                    <div className="mt-2">
                      <span className="text-green-400 font-semibold">3.</span>
                      <span className="text-yellow-400 ml-2 font-bold">if</span>
                      <span className="text-white ml-2">U</span>
                      <span className="text-gray-400 ml-1"><Latex math="\leq" /></span>
                      <span className="text-cyan-300 ml-1">f(X)</span>
                      <span className="text-gray-400 mx-1">/</span>
                      <span className="text-gray-400">(</span>
                      <span className="text-yellow-300">M</span>
                      <span className="text-gray-400">Â·</span>
                      <span className="text-green-300">g(X)</span>
                      <span className="text-gray-400">)</span>
                      <span className="text-yellow-400 ml-1">:</span>
                    </div>
                    <div className="pl-6">
                      <span className="text-yellow-400 font-bold">return</span>
                      <span className="text-emerald-400 font-bold ml-2">X</span>
                      <span className="text-gray-500 ml-3">{"// Accept!"}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right: Insights */}
            <div className="flex flex-col gap-3">
              {/* Acceptance ratio explanation */}
              <div className="bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl p-4 border-2 border-purple-300">
                <div className="font-bold text-purple-800 text-lg mb-2">The Acceptance Ratio</div>
                <div className="bg-white rounded-lg p-3 mb-2">
                  <Latex math="\alpha(X) = \frac{f(X)}{M \cdot g(X)}" display={true} />
                </div>
                <div className="text-purple-700 text-sm space-y-1">
                  <div><Latex math="\bullet" /> Always in <Latex math="[0, 1]" /> by envelope condition</div>
                  <div><Latex math="\bullet" /> Probability of accepting proposal at <Latex math="X" /></div>
                  <div><Latex math="\bullet" /> Higher where <Latex math="f \approx Mg" />, lower where <Latex math="f \ll Mg" /></div>
                </div>
              </div>
    
              {/* Key properties */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border-2 border-blue-200 flex-grow">
                <div className="font-bold text-blue-800 text-lg mb-2">Key Properties</div>
                <div className="space-y-2 text-sm">
                  <div className="bg-white rounded-lg p-2 flex items-center gap-2">
                    <span className="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">1</span>
                    <span className="text-blue-700">Each iteration: <strong>O(1)</strong> density evaluations</span>
                  </div>
                  <div className="bg-white rounded-lg p-2 flex items-center gap-2">
                    <span className="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">2</span>
                    <span className="text-blue-700">Iterations ~ <strong>Geometric(1/M)</strong></span>
                  </div>
                  <div className="bg-white rounded-lg p-2 flex items-center gap-2">
                    <span className="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">3</span>
                    <span className="text-blue-700">Works for <strong>unnormalized</strong> targets <Latex math="\tilde{f}" /></span>
                  </div>
                  <div className="bg-white rounded-lg p-2 flex items-center gap-2">
                    <span className="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">4</span>
                    <span className="text-blue-700">Samples are <strong>independent</strong> (unlike MCMC)</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom: Complexity */}
          <div className="bg-gradient-to-r from-emerald-100 to-teal-100 rounded-xl p-4 mt-3 border-2 border-emerald-300">
            <div className="flex items-center justify-around">
              <div className="text-center">
                <div className="text-emerald-800 font-bold text-sm">Expected Iterations</div>
                <div className="text-emerald-700 text-lg">
                  <Latex math="\mathbb{E}[\text{iterations}] = M" />
                </div>
              </div>
              <div className="h-10 w-px bg-emerald-300"></div>
              <div className="text-center">
                <div className="text-emerald-800 font-bold text-sm">Cost Per Sample</div>
                <div className="text-emerald-700 text-lg">
                  <Latex math="O(M)" /> density evaluations
                </div>
              </div>
              <div className="h-10 w-px bg-emerald-300"></div>
              <div className="text-center">
                <div className="text-emerald-800 font-bold text-sm">Acceptance Rate</div>
                <div className="text-emerald-700 text-lg">
                  <Latex math="P(\text{accept}) = 1/M" />
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 56: CORRECTNESS PROOF
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide56_CorrectnessProof() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">Why It Works: Correctness Proof</h1>
          <p className="text-gray-600 text-lg mb-2">Accepted Samples Follow the Target Distribution Exactly</p>
    
          {/* Theorem and setup box */}
          <div className="bg-indigo-100 rounded-xl p-3 mb-3 border-2 border-indigo-400">
            <div className="flex items-start gap-4">
              <div>
                <div className="font-bold text-indigo-900 text-base">Theorem:</div>
                <div className="text-indigo-800">
                  If <Latex math="X" /> is accepted by rejection sampling, then <Latex math="X \sim f" />.
                </div>
              </div>
              <div className="border-l-2 border-indigo-300 pl-4">
                <div className="font-bold text-indigo-900 text-sm">Notation:</div>
                <div className="text-indigo-700 text-sm">
                  <Latex math="A" /> : acceptance event
                </div>
              </div>
            </div>
          </div>
    
          {/* Main content: Proof steps */}
          <div className="grid grid-cols-2 gap-3 flex-grow">
            {/* Left column: Steps 1-2 */}
            <div className="flex flex-col gap-2">
              {/* Step 1 */}
              <div className="bg-purple-50 rounded-lg p-3 border border-purple-200">
                <div className="flex items-center gap-2 mb-1">
                  <span className="bg-purple-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">1</span>
                  <span className="font-semibold text-purple-800">Conditional acceptance probability</span>
                </div>
                <div className="bg-white rounded p-2">
                  <Latex math="P(A \mid X=x) = P\!\left(U \leq \frac{f(x)}{Mg(x)}\right) = \frac{f(x)}{Mg(x)}" display={true} />
                </div>
              </div>
    
              {/* Step 2 */}
              <div className="bg-emerald-50 rounded-lg p-3 border border-emerald-200 flex-grow">
                <div className="flex items-center gap-2 mb-1">
                  <span className="bg-emerald-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">2</span>
                  <span className="font-semibold text-emerald-800">Marginal acceptance probability</span>
                </div>
                <div className="bg-white rounded p-2 mb-2">
                  <Latex math="P(A) = \int P(A \mid X\!=\!x)\, g(x)\, dx = \int \frac{f(x)}{M\,\cancel{g(x)}} \cdot \cancel{g(x)} \, dx" display={true} />
                </div>
                <div className="bg-white rounded p-2">
                  <Latex math="= \frac{1}{M} \int f(x)\,dx = \frac{1}{M}" display={true} />
                </div>
                <div className="text-emerald-700 text-xs font-semibold text-center mt-2">
                  The <Latex math="g(x)" /> cancels in the integrand!
                </div>
              </div>
            </div>
    
            {/* Right column: Step 3 + Insights */}
            <div className="flex flex-col gap-2">
              {/* Step 3 - Bayes */}
              <div className="bg-amber-50 rounded-lg p-3 border-2 border-amber-400">
                <div className="flex items-center gap-2 mb-1">
                  <span className="bg-amber-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">3</span>
                  <span className="font-semibold text-amber-800">Apply Bayes theorem</span>
                </div>
                <div className="bg-white rounded p-2 mb-2">
                  <Latex math="f(x \mid A) = \frac{P(A \mid X\!=\!x) \cdot g(x)}{P(A)} = \frac{\frac{f(x)}{Mg(x)} \cdot g(x)}{\frac{1}{M}}" display={true} />
                </div>
                <div className="bg-white rounded p-2">
                  <Latex math="= \frac{\frac{f(x)}{\cancel{M}\cancel{g(x)}} \cdot \cancel{g(x)}}{\frac{1}{\cancel{M}}} = f(x)" display={true} />
                </div>
                <div className="text-amber-700 text-sm mt-2 font-semibold text-center">
                  <Latex math="\checkmark" /> Accepted <Latex math="X" /> has density <Latex math="f(x)" />
                </div>
              </div>
    
              {/* Key insight box */}
              <div className="bg-gradient-to-r from-indigo-100 to-purple-100 rounded-lg p-3 border-2 border-indigo-300 flex-grow">
                <div className="font-bold text-indigo-800 text-sm mb-2">Key Insights</div>
                <div className="space-y-1 text-sm text-indigo-700">
                  <div className="flex items-start gap-2">
                    <span className="text-indigo-500 font-bold">â€¢</span>
                    <span>Proposal <Latex math="g" /> cancels â€” only <Latex math="f" /> remains</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-indigo-500 font-bold">â€¢</span>
                    <span>Works for unnormalized <Latex math="\tilde{f}" /> (<Latex math="C" /> cancels too)</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-indigo-500 font-bold">â€¢</span>
                    <span>Acceptance rate <Latex math="= 1/M" /> (efficiency metric)</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-indigo-500 font-bold">â€¢</span>
                    <span>Optimal: <Latex math="M^* = \sup_x \frac{f(x)}{g(x)}" /></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom: QED */}
          <div className="bg-gradient-to-r from-slate-100 to-gray-100 rounded-xl p-2 mt-2 border border-slate-300 text-center">
            <span className="text-slate-700 font-semibold">Accepted samples are </span>
            <span className="text-slate-900 font-bold">exact draws</span>
            <span className="text-slate-700 font-semibold"> from </span>
            <Latex math="f" />
            <span className="text-slate-700 font-semibold"> â€” no approximation, no asymptotic bias</span>
            <span className="ml-2 text-slate-600"><Latex math="\square" /></span>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                    SLIDE 57: ACCEPTANCE PROBABILITY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const AREA_RATIO_IMAGE_URL_slide57 = "https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_5_fig07_area_ratio.png";
function Slide57_AcceptanceProbability() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">Acceptance Probability and Efficiency</h1>
          <p className="text-gray-600 text-lg mb-2">The Cost of Rejection</p>
    
          {/* Top: Large image spanning full width */}
          <div className="bg-white rounded-xl border-2 border-gray-200 overflow-hidden mb-3">
            <img 
              src={AREA_RATIO_IMAGE_URL_slide57} 
              alt="Acceptance probability equals area ratio 1/M, showing envelope decomposition and efficiency by M value"
              className="w-full h-auto max-h-114 object-contain"
            />
          </div>
    
          {/* Middle: Clarification */}
          <div className="bg-rose-50 rounded-xl p-2 mb-3 border-2 border-rose-300">
            <div className="flex items-start gap-2">
              <span className="text-rose-600 font-bold text-lg">{"âš ï¸"}</span>
              <div className="text-rose-700 text-sm">
                <strong>Key point:</strong> The right panel shows different <em>proposals</em> achieving different <Latex math="M" /> values. 
                For a fixed <Latex math="g" />, the minimum valid <Latex math="M^* = \sup_x \frac{f(x)}{g(x)}" /> is determined â€” 
                to get smaller <Latex math="M" />, you need a <strong>better-matched proposal</strong>.
              </div>
            </div>
          </div>
    
          {/* Bottom: Two columns with key formulas */}
          <div className="grid grid-cols-2 gap-4">
            {/* Left: Key results */}
            <div className="bg-gradient-to-r from-blue-100 to-indigo-100 rounded-xl p-3 border-2 border-blue-300">
              <div className="font-bold text-blue-800 text-base mb-2">Key Results</div>
              <div className="flex gap-3">
                <div className="bg-white rounded-lg p-2 flex-1">
                  <div className="text-xs text-gray-600 mb-1">Acceptance probability:</div>
                  <Latex math="P(\text{accept}) = \frac{1}{M}" display={true} />
                </div>
                <div className="bg-white rounded-lg p-2 flex-1">
                  <div className="text-xs text-gray-600 mb-1">Expected iterations:</div>
                  <Latex math="\mathbb{E}[\text{proposals}] = M" display={true} />
                </div>
              </div>
            </div>
    
            {/* Right: Optimization goal */}
            <div className="bg-emerald-50 rounded-xl p-3 border-2 border-emerald-300">
              <div className="font-bold text-emerald-800 text-base mb-2">The Optimization Goal</div>
              <div className="bg-white rounded-lg p-2 mb-2">
                <div className="text-xs text-gray-600 mb-1">Optimal envelope constant:</div>
                <Latex math="M^* = \sup_x \frac{f(x)}{g(x)}" display={true} />
              </div>
              <div className="text-emerald-700 text-sm">
                <Latex math="M > M^*" />: Valid but wasteful | 
                <span className="text-red-600 font-bold"><Latex math="M < M^*" />: WRONG!</span>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 58: CHOOSING PROPOSAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide58_ChoosingProposal() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">Choosing the Proposal Distribution</h1>
          <p className="text-gray-600 text-lg mb-3">The Art of Proposal Design</p>
    
          {/* Main content */}
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: Design principles */}
            <div className="flex flex-col gap-3">
              {/* Fundamental requirement */}
              <div className="bg-gradient-to-r from-rose-100 to-red-100 rounded-xl p-4 border-2 border-rose-400">
                <div className="font-bold text-rose-800 text-lg mb-2">The Fundamental Requirement</div>
                <div className="bg-white rounded-lg p-3 mb-2">
                  <Latex math="\sup_x \frac{f(x)}{g(x)} < \infty" display={true} />
                </div>
                <div className="text-rose-700 text-sm">
                  The ratio must be bounded everywhere on the support
                </div>
              </div>
    
              {/* Four principles */}
              <div className="bg-blue-50 rounded-xl p-4 border-2 border-blue-200 flex-grow">
                <div className="font-bold text-blue-800 text-lg mb-2">Design Principles</div>
                <div className="space-y-2">
                  <div className="bg-white rounded-lg p-2">
                    <div className="flex items-center gap-2 mb-1">
                      <span className="bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">1</span>
                      <span className="font-semibold text-red-800">Support Coverage</span>
                      <span className="text-red-600 text-xs font-bold">(CRITICAL)</span>
                    </div>
                    <div className="text-sm text-gray-700 ml-8">
                      <Latex math="f(x) > 0 \Rightarrow g(x) > 0" /> â€” violate = WRONG samples
                    </div>
                  </div>
    
                  <div className="bg-white rounded-lg p-2">
                    <div className="flex items-center gap-2 mb-1">
                      <span className="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">2</span>
                      <span className="font-semibold text-orange-800">Tail Behavior</span>
                    </div>
                    <div className="text-sm text-gray-700 ml-8">
                      <Latex math="g" /> tails must decay <Latex math="\leq" /> as slow as <Latex math="f" /> tails
                    </div>
                  </div>
    
                  <div className="bg-white rounded-lg p-2">
                    <div className="flex items-center gap-2 mb-1">
                      <span className="bg-amber-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">3</span>
                      <span className="font-semibold text-amber-800">Match Singularities</span>
                    </div>
                    <div className="text-sm text-gray-700 ml-8">
                      If <Latex math="f(x) \to \infty" /> at some point, <Latex math="g" /> must match
                    </div>
                  </div>
    
                  <div className="bg-white rounded-lg p-2">
                    <div className="flex items-center gap-2 mb-1">
                      <span className="bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">4</span>
                      <span className="font-semibold text-green-800">Shape Matching</span>
                    </div>
                    <div className="text-sm text-gray-700 ml-8">
                      Closer <Latex math="g \approx f" /> shape gives smaller <Latex math="M" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right: Common choices and failure cases */}
            <div className="flex flex-col gap-3">
              {/* Common proposal choices */}
              <div className="bg-purple-50 rounded-xl p-4 border-2 border-purple-200">
                <div className="font-bold text-purple-800 text-lg mb-2">Common Proposal Choices</div>
                <table className="w-full text-sm">
                  <thead>
                    <tr className="border-b border-purple-200">
                      <th className="text-left py-1 text-purple-700">Target Type</th>
                      <th className="text-left py-1 text-purple-700">Proposal</th>
                    </tr>
                  </thead>
                  <tbody className="text-purple-600">
                    <tr className="border-b border-purple-100">
                      <td className="py-1">Bounded support</td>
                      <td className="py-1">Uniform, Beta</td>
                    </tr>
                    <tr className="border-b border-purple-100">
                      <td className="py-1">Light tails</td>
                      <td className="py-1">Normal</td>
                    </tr>
                    <tr className="border-b border-purple-100">
                      <td className="py-1">Heavy tails</td>
                      <td className="py-1">t, Cauchy</td>
                    </tr>
                    <tr>
                      <td className="py-1">Positive support</td>
                      <td className="py-1">Gamma, Exponential</td>
                    </tr>
                  </tbody>
                </table>
              </div>
    
              {/* Failure cases */}
              <div className="bg-red-50 rounded-xl p-4 border-2 border-red-300 flex-grow">
                <div className="font-bold text-red-800 text-lg mb-2">When It Fails: <Latex math="M = \infty" /></div>
                <div className="space-y-2">
                  <div className="bg-white rounded-lg p-2">
                    <div className="flex items-center gap-2 mb-1">
                      <span className="text-red-600 text-xl font-bold">âœ—</span>
                      <span className="font-semibold text-red-800">Heavy target, light proposal</span>
                    </div>
                    <div className="text-sm text-gray-700 ml-7">
                      <div><Latex math="f" />: Cauchy <Latex math="\sim 1/x^2" /> | <Latex math="g" />: Normal <Latex math="\sim e^{-x^2}" /></div>
                      <div className="text-red-600"><Latex math="f(x)/g(x) \to \infty" /> as <Latex math="|x| \to \infty" /></div>
                    </div>
                  </div>
                  <div className="bg-white rounded-lg p-2">
                    <div className="flex items-center gap-2 mb-1">
                      <span className="text-red-600 text-xl font-bold">âœ—</span>
                      <span className="font-semibold text-red-800">Unbounded target, bounded proposal</span>
                    </div>
                    <div className="text-sm text-gray-700 ml-7">
                      <div><Latex math="f" />: Beta(0.5, 2) <Latex math="\sim x^{-0.5}" /> | <Latex math="g" />: Uniform</div>
                      <div className="text-red-600"><Latex math="f(x)/g(x) \to \infty" /> as <Latex math="x \to 0" /></div>
                    </div>
                  </div>
                  <div className="bg-white rounded-lg p-2">
                    <div className="flex items-center gap-2 mb-1">
                      <span className="text-red-600 text-xl font-bold">âœ—</span>
                      <span className="font-semibold text-red-800">Support mismatch</span>
                    </div>
                    <div className="text-sm text-gray-700 ml-7">
                      <div><Latex math="f" />: support <Latex math="[0, 2]" /> | <Latex math="g" />: Uniform<Latex math="(0,1)" /></div>
                      <div className="text-red-600">Misses <Latex math="x \in (1, 2]" /> entirely</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom: Practical advice */}
          <div className="bg-gradient-to-r from-emerald-100 to-teal-100 rounded-xl p-4 mt-3 border-2 border-emerald-300">
            <div className="font-bold text-emerald-800 text-lg mb-2 text-center">Practical Workflow</div>
            <div className="flex items-center justify-center gap-4 text-emerald-700">
              <div className="flex items-center gap-2">
                <span className="bg-emerald-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold">1</span>
                <span className="text-base">Start simple</span>
              </div>
              <span className="text-emerald-400 text-xl">{"â†’"}</span>
              <div className="flex items-center gap-2">
                <span className="bg-emerald-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold">2</span>
                <span className="text-base">Verify support + tails</span>
              </div>
              <span className="text-emerald-400 text-xl">{"â†’"}</span>
              <div className="flex items-center gap-2">
                <span className="bg-emerald-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold">3</span>
                <span className="text-base">Compute <Latex math="M^*" /></span>
              </div>
              <span className="text-emerald-400 text-xl">{"â†’"}</span>
              <div className="flex items-center gap-2">
                <span className="bg-emerald-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold">4</span>
                <span className="text-base">If <Latex math="M^* > 10" />, improve</span>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                           SLIDE 59: FINDING M
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide59_FindingM() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">Finding the Optimal M</h1>
          <p className="text-gray-600 text-lg mb-3">Computing the Envelope Constant</p>
    
          {/* Main content */}
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: Mathematical approach */}
            <div className="flex flex-col gap-3">
              {/* Definition */}
              <div className="bg-gradient-to-r from-blue-100 to-indigo-100 rounded-xl p-4 border-2 border-blue-300">
                <div className="font-bold text-blue-800 text-lg mb-2">The Optimal Bound</div>
                <div className="bg-white rounded-lg p-3 mb-2">
                  <Latex math="M^* = \sup_x \frac{f(x)}{g(x)}" display={true} />
                </div>
                <div className="text-blue-700 text-sm">
                  Achieved where the ratio <Latex math="f(x)/g(x)" /> is maximized
                </div>
              </div>
    
              {/* Calculus approach */}
              <div className="bg-purple-50 rounded-xl p-4 border-2 border-purple-200 flex-grow">
                <div className="font-bold text-purple-800 text-lg mb-2">Finding M by Calculus</div>
                <div className="space-y-2">
                  <div className="bg-white rounded-lg p-2">
                    <span className="font-semibold text-purple-700">Define:</span>
                    <span className="text-purple-600 ml-2"><Latex math="h(x) = f(x)/g(x)" /></span>
                  </div>
                  <div className="bg-white rounded-lg p-2">
                    <span className="font-semibold text-purple-700">Solve:</span>
                    <span className="text-purple-600 ml-2"><Latex math="h'(x) = 0" /></span>
                  </div>
                  <div className="bg-white rounded-lg p-2">
                    <div className="font-semibold text-purple-700 mb-1">Critical point condition:</div>
                    <div className="text-purple-600 text-center">
                      <Latex math="\frac{f(x)}{f'(x)} = \frac{g(x)}{g'(x)}" display={true} />
                    </div>
                  </div>
                  <div className="bg-white rounded-lg p-2">
                    <span className="font-semibold text-purple-700">Evaluate:</span>
                    <span className="text-purple-600 ml-2"><Latex math="M^* = h(x^*)" /></span>
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right: Example and numerical */}
            <div className="flex flex-col gap-3">
              {/* Worked example - compact */}
              <div className="bg-amber-50 rounded-xl p-3 border-2 border-amber-300">
                <div className="font-bold text-amber-800 text-base mb-2">Example: <Latex math="f" />: Beta(2.5, 6), <Latex math="g" />: Uniform</div>
                <div className="grid grid-cols-2 gap-2 text-sm">
                  <div className="bg-white rounded-lg p-2">
                    <span className="font-semibold text-amber-700">Target:</span>
                    <span className="text-amber-600 ml-1"><Latex math="f \propto x^{1.5}(1-x)^{5}" /></span>
                  </div>
                  <div className="bg-white rounded-lg p-2">
                    <span className="font-semibold text-amber-700">Mode:</span>
                    <span className="text-amber-600 ml-1"><Latex math="x^* = \frac{3}{13}" /></span>
                  </div>
                  <div className="bg-white rounded-lg p-2">
                    <span className="font-semibold text-amber-700">Optimal M:</span>
                    <span className="text-amber-600 ml-1"><Latex math="M^* \approx 2.527" /></span>
                  </div>
                  <div className="bg-white rounded-lg p-2">
                    <span className="font-semibold text-amber-700">Acceptance:</span>
                    <span className="text-amber-600 ml-1"><Latex math="1/M^* \approx 39.6\%" /></span>
                  </div>
                </div>
              </div>
    
              {/* Numerical methods - larger font, flex-grow */}
              <div className="bg-emerald-50 rounded-xl p-4 border-2 border-emerald-200 flex-grow">
                <div className="font-bold text-emerald-800 text-lg mb-3">Numerical Approach</div>
                <div className="bg-white rounded-lg p-4">
                  <div className="text-emerald-700 font-mono text-base leading-loose">
                    <div className="text-emerald-500 mb-2"># scipy optimization</div>
                    <div>from scipy.optimize import minimize_scalar</div>
                    <div className="mt-3">result = minimize_scalar(</div>
                    <div className="ml-6">lambda x: -f(x)/g(x),</div>
                    <div className="ml-6">bounds=(0, 1), method='bounded'</div>
                    <div>)</div>
                    <div className="mt-3">M = -result.fun * 1.01 <span className="text-emerald-500"># round up!</span></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom: Warning */}
          <div className="bg-gradient-to-r from-red-100 to-rose-100 rounded-xl p-3 mt-3 border-2 border-red-300">
            <div className="flex items-center gap-3">
              <span className="text-2xl">{"âš ï¸"}</span>
              <div className="text-sm">
                <span className="text-red-800 font-bold">For numerical/transcendental results:</span>
                <span className="text-red-700 ml-2">
                  Always <strong>round M up</strong> (e.g., <Latex math="2.527 \to 2.53" />). 
                  Using <Latex math="M < M^*" /> produces biased samples â€” a silent error!
                </span>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 60: TRUNCATED NORMAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide60_TruncatedNormal() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Truncated Normal Distribution</h1>
          <p className="text-gray-600 mb-2">A common target where rejection sampling excels</p>
    
          <div className="grid grid-cols-2 gap-3">
            {/* Left column - Distribution definition + Strategy 1 */}
            <div className="flex flex-col gap-2">
              {/* PDF and normalizing constant side by side */}
              <div className="bg-blue-50 rounded-xl p-3 border-2 border-blue-300">
                <div className="font-bold text-blue-800 text-base mb-2">Truncated Normal: <Latex math="X \sim \mathcal{N}(\mu, \sigma^2)" /> on <Latex math="[a, b]" /></div>
                <div className="grid grid-cols-2 gap-2">
                  <div className="bg-white rounded-lg p-2">
                    <div className="text-xs text-blue-600 mb-1 font-semibold">PDF:</div>
                    <Latex math="f(x) = \begin{cases} \dfrac{\phi\bigl(\frac{x-\mu}{\sigma}\bigr)}{\sigma \cdot C} & x \in [a,b] \\[6pt] 0 & \text{else} \end{cases}" display={true} />
                  </div>
                  <div className="bg-white rounded-lg p-2">
                    <div className="text-xs text-blue-600 mb-1 font-semibold">Normalizing constant:</div>
                    <Latex math="C = \Phi\!\left(\frac{b-\mu}{\sigma}\right) - \Phi\!\left(\frac{a-\mu}{\sigma}\right)" display={true} />
                    <div className="text-blue-600 text-xs mt-2">
                      <Latex math="= P(a \leq X \leq b)" /> for untruncated <Latex math="X" />
                    </div>
                  </div>
                </div>
              </div>
    
              {/* Mean and Variance - compact */}
              <div className="bg-purple-50 rounded-xl p-3 border-2 border-purple-200">
                <div className="font-bold text-purple-800 text-base mb-2">Moments</div>
                <div className="text-purple-600 text-sm mb-2">
                  Let <Latex math="\alpha = \frac{a-\mu}{\sigma}" />, <Latex math="\beta = \frac{b-\mu}{\sigma}" />
                </div>
                <div className="space-y-2">
                  <div className="bg-white rounded-lg p-2">
                    <span className="font-semibold text-purple-700 text-sm">Mean:</span>
                    <span className="text-purple-600 ml-2"><Latex math="\mu + \sigma \cdot \frac{\phi(\alpha) - \phi(\beta)}{C}" /></span>
                  </div>
                  <div className="bg-white rounded-lg p-2">
                    <span className="font-semibold text-purple-700 text-sm">Var:</span>
                    <span className="text-purple-600 ml-2"><Latex math="\sigma^2\!\left[1 + \frac{\alpha\phi(\alpha) - \beta\phi(\beta)}{C} - \left(\frac{\phi(\alpha) - \phi(\beta)}{C}\right)^{\!2}\right]" /></span>
                  </div>
                </div>
              </div>
    
              {/* Strategy 1 */}
              <div className="bg-emerald-50 rounded-xl p-3 border-2 border-emerald-300">
                <div className="font-bold text-emerald-800 text-base mb-2">Strategy 1: Simple Rejection</div>
                <div className="text-emerald-700 text-sm mb-2">
                  Sample <Latex math="X \sim \mathcal{N}(\mu, \sigma^2)" />, accept if <Latex math="X \in [a, b]" />
                </div>
                <div className="bg-emerald-100 rounded p-2 text-center text-sm">
                  <span className="text-emerald-800 font-semibold">Acceptance: </span>
                  <Latex math="P = C = \Phi(\beta) - \Phi(\alpha)" />
                </div>
                <div className="text-emerald-600 text-xs mt-2">
                  Best when <Latex math="[a,b]" /> captures most of the mass
                </div>
                {/* Mini acceptance table */}
                <table className="w-full text-xs mt-2">
                  <tbody className="text-gray-700">
                    <tr className="border-b border-emerald-200">
                      <td className="py-0.5"><Latex math="[-2, 2]" /></td>
                      <td className="text-right font-mono">95.4%</td>
                      <td className="text-right text-emerald-600">Excellent</td>
                    </tr>
                    <tr className="border-b border-emerald-200">
                      <td className="py-0.5"><Latex math="[0, \infty)" /></td>
                      <td className="text-right font-mono">50%</td>
                      <td className="text-right text-emerald-600">Good</td>
                    </tr>
                    <tr className="border-b border-emerald-200">
                      <td className="py-0.5"><Latex math="[2, \infty)" /></td>
                      <td className="text-right font-mono">2.3%</td>
                      <td className="text-right text-amber-600">Poor</td>
                    </tr>
                    <tr>
                      <td className="py-0.5"><Latex math="[4, \infty)" /></td>
                      <td className="text-right font-mono">0.003%</td>
                      <td className="text-right text-rose-600 font-bold">Use S3!</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
    
            {/* Right column - Strategies 2 & 3 */}
            <div className="flex flex-col gap-2">
              {/* Strategy 2 */}
              <div className="bg-amber-50 rounded-xl p-3 border-2 border-amber-300">
                <div className="font-bold text-amber-800 text-base mb-2">Strategy 2: Uniform Envelope</div>
                <div className="text-amber-700 text-sm mb-2">
                  For narrow intervals: proposal <Latex math="g(x) = \frac{1}{b-a}" /> on <Latex math="[a, b]" />
                </div>
                <div className="bg-amber-100 rounded p-2 text-center text-sm">
                  <Latex math="M = (b-a) \cdot \max_{x \in [a,b]} f(x)" />
                </div>
                <div className="text-amber-600 text-xs mt-2">
                  Best when interval width <Latex math="\ll \sigma" />
                </div>
              </div>
    
              {/* Strategy 3 */}
              <div className="bg-rose-50 rounded-xl p-3 border-2 border-rose-400">
                <div className="font-bold text-rose-800 text-base mb-2">Strategy 3: Robert's Method</div>
                <div className="text-rose-700 text-sm mb-2">
                  For extreme lower truncation <Latex math="X > a" /> where <Latex math="a \gg 0" />
                </div>
                <div className="bg-white rounded p-2 border border-rose-200 text-center text-sm mb-2">
                  Shifted exponential: <Latex math="g(x) = a \cdot e^{-a(x-a)}" /> for <Latex math="x \geq a" />
                </div>
                <div className="bg-rose-100 rounded p-2 text-center text-sm">
                  <span className="text-rose-700">Optimal </span>
                  <Latex math="\lambda^* = a" />
                  <span className="text-rose-700"> gives </span>
                  <span className="font-bold text-rose-800">~40% acceptance</span>
                </div>
                <div className="text-rose-600 text-xs mt-2">
                  Works even for extreme <Latex math="a" /> where Strategy 1 fails catastrophically!
                </div>
                <div className="bg-white rounded p-2 mt-2 border border-rose-200">
                  <div className="text-rose-700 text-xs font-semibold mb-1">Why it works:</div>
                  <div className="text-rose-600 text-xs">
                    The exponential tangent to <Latex math="\phi(x)" /> at <Latex math="x = a" /> provides an optimal envelope. 
                    Rate <Latex math="\lambda = a" /> minimizes <Latex math="M" />.
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-gradient-to-r from-indigo-100 to-purple-100 rounded-xl p-2 mt-2 border-2 border-indigo-300">
            <div className="flex items-center justify-between">
              <div className="text-indigo-800 text-sm">
                <span className="font-bold">In practice:</span> Use <code className="bg-white px-1 rounded">scipy.stats.truncnorm(a, b)</code> â€” handles all edge cases
              </div>
              <div className="text-indigo-700 text-xs">
                (Parameterized by standardized bounds)
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                      SLIDE 61: EFFICIENCY ANALYSIS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide61_EfficiencyAnalysis() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Efficiency Analysis</h1>
          <p className="text-gray-600 mb-2">Comparing proposal strategies for a custom density</p>
    
          <div className="grid grid-cols-2 gap-3">
            {/* Left column - Cost formula and comparison table */}
            <div className="flex flex-col gap-3">
              {/* Target density */}
              <div className="bg-blue-50 rounded-xl p-3 border-2 border-blue-300">
                <div className="font-bold text-blue-800 text-base mb-2">Target: Custom Density (no direct sampler)</div>
                <div className="bg-white rounded-lg p-2 text-center border border-blue-200">
                  <Latex math="f(x) \propto x^{1.5}(1-x)^2\bigl(1 + 0.5\sin(4\pi x)\bigr)" display={true} />
                </div>
                <div className="text-blue-600 text-xs mt-2 text-center">
                  Sinusoidal wiggle makes this non-standard â€” rejection sampling needed
                </div>
              </div>
    
              {/* Cost formula */}
              <div className="bg-gradient-to-r from-purple-100 to-indigo-100 rounded-xl p-3 border-2 border-purple-300">
                <div className="font-bold text-purple-800 text-base mb-2 text-center">Total Sampling Cost</div>
                <div className="bg-white rounded-lg p-2 text-center border border-purple-200">
                  <Latex math="\text{Cost} = M \times \text{(proposals needed)} = M \times n" display={true} />
                </div>
              </div>
    
              {/* Comparison table */}
              <div className="bg-white rounded-xl p-3 border-2 border-gray-300">
                <div className="font-bold text-gray-800 text-base mb-2">Proposal Comparison</div>
                <table className="w-full text-sm">
                  <thead>
                    <tr className="border-b-2 border-gray-400">
                      <th className="text-left py-1 text-gray-600">Proposal <Latex math="g(x)" /></th>
                      <th className="text-center py-1 text-gray-600"><Latex math="M^*" /></th>
                      <th className="text-center py-1 text-gray-600">P(acc)</th>
                    </tr>
                  </thead>
                  <tbody className="text-gray-700">
                    <tr className="border-b border-gray-200 bg-rose-50">
                      <td className="py-2">Uniform(0,1)</td>
                      <td className="text-center font-mono">2.18</td>
                      <td className="text-center font-mono">45.9%</td>
                    </tr>
                    <tr className="border-b border-gray-200 bg-amber-50">
                      <td className="py-2">Triangular(0.35)</td>
                      <td className="text-center font-mono">1.78</td>
                      <td className="text-center font-mono">56.2%</td>
                    </tr>
                    <tr className="bg-emerald-50">
                      <td className="py-2">Piecewise linear</td>
                      <td className="text-center font-mono">1.53</td>
                      <td className="text-center font-mono">65.3%</td>
                    </tr>
                  </tbody>
                </table>
                <div className="text-xs text-gray-500 mt-2 text-center">
                  Piecewise achieves <span className="font-bold text-emerald-600">1.4x</span> speedup over Uniform
                </div>
              </div>
    
              {/* Key insight box */}
              <div className="bg-purple-50 rounded-xl p-3 border-2 border-purple-300">
                <div className="font-bold text-purple-800 text-base mb-1">Key Insight</div>
                <div className="text-purple-700">
                  You don't need a perfect parametric match. A rough shape match 
                  often cuts <Latex math="M" /> in half with minimal extra code.
                </div>
              </div>
            </div>
    
            {/* Right column - Visual and guidelines */}
            <div className="flex flex-col gap-3">
              {/* Envelope visualization - actual figure */}
              <div className="bg-white rounded-xl p-2 border-2 border-gray-300">
                <img 
                  src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/efficiency_analysis.png"
                  alt="Efficiency analysis: target density vs proposals, envelopes, sample distributions, and metrics comparison"
                  className="w-full h-100 object-contain rounded"
                />
              </div>
    
              {/* Practical guidelines - LARGER */}
              <div className="bg-emerald-50 rounded-xl p-4 border-2 border-emerald-300">
                <div className="font-bold text-emerald-800 text-lg mb-3">When to Optimize Proposal</div>
                <div className="space-y-3">
                  <div className="flex items-start gap-3">
                    <div className="w-7 h-7 rounded-full bg-gray-200 flex items-center justify-center text-sm font-bold text-gray-600 flex-shrink-0">1</div>
                    <div className="text-emerald-700">
                      <span className="font-semibold">Development:</span> Use simple proposal first, verify correctness
                    </div>
                  </div>
                  <div className="flex items-start gap-3">
                    <div className="w-7 h-7 rounded-full bg-amber-200 flex items-center justify-center text-sm font-bold text-amber-700 flex-shrink-0">2</div>
                    <div className="text-emerald-700">
                      <span className="font-semibold">Moderate use:</span> Accept rate {">"} 20% is usually fine
                    </div>
                  </div>
                  <div className="flex items-start gap-3">
                    <div className="w-7 h-7 rounded-full bg-emerald-300 flex items-center justify-center text-sm font-bold text-emerald-800 flex-shrink-0">3</div>
                    <div className="text-emerald-700">
                      <span className="font-semibold">Heavy use:</span> Optimize if millions of samples needed
                    </div>
                  </div>
                  <div className="flex items-start gap-3">
                    <div className="w-7 h-7 rounded-full bg-blue-300 flex items-center justify-center text-sm font-bold text-blue-800 flex-shrink-0">4</div>
                    <div className="text-emerald-700">
                      <span className="font-semibold">Production:</span> Standard dists use library (scipy)
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom summary */}
          <div className="bg-gradient-to-r from-indigo-100 to-purple-100 rounded-xl p-3 mt-3 border-2 border-indigo-300">
            <div className="flex items-center justify-between">
              <div>
                <span className="text-indigo-900 font-bold">Principle: </span>
                <span className="text-indigo-800">Match proposal shape to minimize <Latex math="M^* = \sup_x f(x)/g(x)" /></span>
              </div>
              <div className="flex gap-4 items-center">
                <div className="text-center">
                  <div className="text-rose-600 font-bold text-lg">46%</div>
                  <div className="text-xs text-gray-600">Uniform</div>
                </div>
                <div className="text-xl text-gray-400"><Latex math="\rightarrow" /></div>
                <div className="text-center">
                  <div className="text-emerald-600 font-bold text-lg">65%</div>
                  <div className="text-xs text-gray-600">Matched</div>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                   SLIDE 62: HIGH DIMENSIONAL FAILURE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide62_HighDimensionalFailure() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">High-Dimensional Catastrophe</h1>
          <p className="text-gray-600 mb-2">The Curse of Dimensionality</p>
    
          <div className="grid grid-cols-2 gap-3 flex-grow">
            {/* Left column: Problem setup and table */}
            <div className="flex flex-col gap-2">
              {/* Problem Setup */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-3 border-2 border-blue-300">
                <h3 className="text-base font-bold text-blue-800 mb-2">A Realistic Problem</h3>
                <p className="text-sm text-gray-700 mb-2">
                  <strong>Target:</strong> Product of <Latex math="d" /> independent Beta(2, 5) posteriors
                </p>
                <p className="text-sm text-gray-700 mb-2">
                  <strong>Proposal:</strong> Uniform<Latex math="([0,1]^d)" />
                </p>
                <div className="bg-white rounded-lg p-2 border border-blue-200">
                  <Latex math="M^* = \left(\max_x f_{\text{Beta}}(x)\right)^d = 2.46^d" display={true} />
                </div>
              </div>
    
              {/* Table of values */}
              <div className="bg-white rounded-xl p-3 border-2 border-gray-300">
                <h3 className="text-sm font-bold text-gray-800 mb-2">Exponential Blowup</h3>
                <table className="w-full text-sm">
                  <thead>
                    <tr className="border-b-2 border-gray-400">
                      <th className="text-left py-1 text-gray-600">Dim</th>
                      <th className="text-right py-1 text-gray-600"><Latex math="M^*" /></th>
                      <th className="text-right py-1 text-gray-600">Accept</th>
                      <th className="text-right py-1 text-gray-600">Props/Sample</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr className="bg-green-50 border-b border-gray-200">
                      <td className="py-1 font-medium">1</td>
                      <td className="text-right">2.5</td>
                      <td className="text-right text-green-700">40.7%</td>
                      <td className="text-right">2</td>
                    </tr>
                    <tr className="bg-green-50 border-b border-gray-200">
                      <td className="py-1 font-medium">2</td>
                      <td className="text-right">6.0</td>
                      <td className="text-right text-green-700">16.6%</td>
                      <td className="text-right">6</td>
                    </tr>
                    <tr className="bg-yellow-50 border-b border-gray-200">
                      <td className="py-1 font-medium">5</td>
                      <td className="text-right">90</td>
                      <td className="text-right text-yellow-700">1.1%</td>
                      <td className="text-right">90</td>
                    </tr>
                    <tr className="bg-orange-50 border-b border-gray-200">
                      <td className="py-1 font-medium">10</td>
                      <td className="text-right">8,037</td>
                      <td className="text-right text-orange-700">0.01%</td>
                      <td className="text-right">8,037</td>
                    </tr>
                    <tr className="bg-red-50 border-b border-gray-200">
                      <td className="py-1 font-medium">20</td>
                      <td className="text-right"><Latex math="6.5 \times 10^7" /></td>
                      <td className="text-right text-red-700"><Latex math="\approx 0" /></td>
                      <td className="text-right">65M</td>
                    </tr>
                    <tr className="bg-red-100">
                      <td className="py-1 font-medium">30</td>
                      <td className="text-right"><Latex math="5.2 \times 10^{11}" /></td>
                      <td className="text-right text-red-800"><Latex math="\approx 0" /></td>
                      <td className="text-right">520B</td>
                    </tr>
                  </tbody>
                </table>
              </div>
    
              {/* Key insight */}
              <div className="bg-red-50 rounded-xl p-3 border-2 border-red-300">
                <div className="font-bold text-red-800 text-sm mb-1">The Fundamental Problem</div>
                <p className="text-sm text-red-700">
                  Even with <strong>40.7% acceptance in 1D</strong>, the curse of dimensionality 
                  makes rejection sampling catastrophically inefficient at <Latex math="d > 10" />.
                </p>
              </div>
            </div>
    
            {/* Right column: Figure */}
            <div className="flex flex-col gap-2">
              <div className="bg-white rounded-xl p-2 border-2 border-gray-300 flex-grow">
                <img 
                  src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/high_dimensional_failure.png"
                  alt="High-dimensional failure: 1D looks fine but M grows exponentially, acceptance collapses, and distributions concentrate in different regions"
                  className="w-full h-full object-contain rounded"
                />
              </div>
            </div>
          </div>
    
          {/* Bottom: When to use what */}
          <div className="bg-gray-800 text-white rounded-xl p-3 mt-2">
            <div className="flex items-center gap-4">
              <div className="font-bold text-base">Practical Rule:</div>
              <div className="grid grid-cols-3 gap-3 text-sm flex-grow">
                <div className="bg-green-900 rounded-lg p-2">
                  <div className="font-semibold text-green-300"><Latex math="d \leq 5" /></div>
                  <div className="text-green-100 text-xs">Rejection works</div>
                </div>
                <div className="bg-yellow-900 rounded-lg p-2">
                  <div className="font-semibold text-yellow-300"><Latex math="5 < d \leq 10" /></div>
                  <div className="text-yellow-100 text-xs">Careful proposal design</div>
                </div>
                <div className="bg-red-900 rounded-lg p-2">
                  <div className="font-semibold text-red-300"><Latex math="d > 10" /></div>
                  <div className="text-red-100 text-xs">Use MCMC (Chapter 5)</div>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 63: REJECTION SUMMARY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide63_RejectionSummary() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-2xl font-bold text-gray-900">Rejection Sampling: Key Takeaways</h1>
          <p className="text-gray-600 mb-2">When to use it, how to optimize it, and when to move on</p>
    
          {/* Decision Flowchart - Clean layout with Yes up, No right */}
          <div className="bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-3 border border-blue-200 mb-2">
            <h3 className="text-base font-bold text-blue-800 mb-2">Decision Flowchart: Choosing Your Sampling Method</h3>
            
            <svg viewBox="0 0 820 130" className="w-full h-32">
              {/* Arrow marker definitions */}
              <defs>
                <marker id="arrowGray" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
                  <polygon points="0 0, 10 5, 0 10" fill="#6b7280"/>
                </marker>
                <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
                  <polygon points="0 0, 10 5, 0 10" fill="#16a34a"/>
                </marker>
                <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
                  <polygon points="0 0, 10 5, 0 10" fill="#ef4444"/>
                </marker>
              </defs>
              
              {/* Row 1: Results (Yes paths) - at top */}
              {/* Inverse CDF result */}
              <rect x="148" y="2" width="104" height="28" rx="5" fill="#22c55e"/>
              <text x="200" y="21" textAnchor="middle" fill="white" fontSize="12" fontWeight="bold">Inverse CDF</text>
              
              {/* Transform result */}
              <rect x="355" y="2" width="90" height="28" rx="5" fill="#22c55e"/>
              <text x="400" y="21" textAnchor="middle" fill="white" fontSize="12" fontWeight="bold">Transform</text>
              
              {/* Rejection result */}
              <rect x="640" y="2" width="80" height="28" rx="5" fill="#8b5cf6"/>
              <text x="680" y="21" textAnchor="middle" fill="white" fontSize="12" fontWeight="bold">Rejection</text>
              
              {/* Row 2: Main flow (decisions) */}
              {/* Start node */}
              <ellipse cx="55" cy="85" rx="50" ry="22" fill="#3b82f6"/>
              <text x="55" y="90" textAnchor="middle" fill="white" fontSize="12" fontWeight="bold">Sample f(x)?</text>
              
              {/* Arrow to Decision 1 */}
              <line x1="105" y1="85" x2="143" y2="85" stroke="#6b7280" strokeWidth="2.5" markerEnd="url(#arrowGray)"/>
              
              {/* Decision 1: Closed-form inverse CDF exists? */}
              <rect x="148" y="60" width="104" height="50" rx="6" fill="#fef3c7" stroke="#f59e0b" strokeWidth="2"/>
              <text x="200" y="77" textAnchor="middle" fill="#92400e" fontSize="9" fontWeight="600">Closed-form</text>
              <text x="200" y="90" textAnchor="middle" fill="#92400e" fontSize="9" fontWeight="600">F&#8315;&#185; exists?</text>
              
              {/* Yes arrow UP to Inverse CDF - EXTENDED */}
              <line x1="200" y1="60" x2="200" y2="35" stroke="#16a34a" strokeWidth="2.5" markerEnd="url(#arrowGreen)"/>
              <text x="215" y="50" fill="#16a34a" fontSize="11" fontWeight="bold">Yes</text>
              
              {/* No arrow RIGHT to Decision 2 */}
              <line x1="252" y1="85" x2="350" y2="85" stroke="#ef4444" strokeWidth="2.5" markerEnd="url(#arrowRed)"/>
              <text x="301" y="78" textAnchor="middle" fill="#ef4444" fontSize="11" fontWeight="bold">No</text>
              
              {/* Decision 2: Known transform? */}
              <rect x="355" y="60" width="90" height="50" rx="6" fill="#fef3c7" stroke="#f59e0b" strokeWidth="2"/>
              <text x="400" y="80" textAnchor="middle" fill="#92400e" fontSize="10" fontWeight="600">Known</text>
              <text x="400" y="93" textAnchor="middle" fill="#92400e" fontSize="10" fontWeight="600">transform?</text>
              
              {/* Yes arrow UP to Transform - EXTENDED */}
              <line x1="400" y1="60" x2="400" y2="35" stroke="#16a34a" strokeWidth="2.5" markerEnd="url(#arrowGreen)"/>
              <text x="415" y="50" fill="#16a34a" fontSize="11" fontWeight="bold">Yes</text>
              
              {/* No arrow RIGHT to Decision 3 */}
              <line x1="445" y1="85" x2="540" y2="85" stroke="#ef4444" strokeWidth="2.5" markerEnd="url(#arrowRed)"/>
              <text x="492" y="78" textAnchor="middle" fill="#ef4444" fontSize="11" fontWeight="bold">No</text>
              
              {/* Decision 3: d < 5? */}
              <rect x="545" y="60" width="70" height="50" rx="6" fill="#fef3c7" stroke="#f59e0b" strokeWidth="2"/>
              <text x="580" y="90" textAnchor="middle" fill="#92400e" fontSize="13" fontWeight="600">d &lt; 5?</text>
              
              {/* Yes arrow UP to Rejection - EXTENDED with bend */}
              <line x1="580" y1="60" x2="580" y2="20" stroke="#16a34a" strokeWidth="2.5"/>
              <line x1="580" y1="20" x2="635" y2="20" stroke="#16a34a" strokeWidth="2.5" markerEnd="url(#arrowGreen)"/>
              <text x="600" y="42" fill="#16a34a" fontSize="11" fontWeight="bold">Yes</text>
              
              {/* No arrow RIGHT to MCMC */}
              <line x1="615" y1="85" x2="720" y2="85" stroke="#ef4444" strokeWidth="2.5" markerEnd="url(#arrowRed)"/>
              <text x="667" y="78" textAnchor="middle" fill="#ef4444" fontSize="11" fontWeight="bold">No</text>
              
              {/* MCMC result */}
              <rect x="725" y="70" width="80" height="30" rx="5" fill="#ec4899"/>
              <text x="765" y="90" textAnchor="middle" fill="white" fontSize="12" fontWeight="bold">MCMC</text>
            </svg>
          </div>
    
          {/* Two-column: Properties and Methods */}
          <div className="grid grid-cols-2 gap-3 mb-2 flex-grow">
            {/* Key Properties */}
            <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-3 border-l-4 border-green-500">
              <h3 className="text-base font-bold text-green-800 mb-2">Key Properties</h3>
              
              <div className="space-y-2">
                <div className="bg-white rounded-lg p-2 border border-green-200 flex items-center gap-2">
                  <span className="text-green-600 font-bold text-lg">&#10003;</span>
                  <span className="text-sm"><strong className="text-green-800">Universal</strong> â€” any <Latex math="f(x)" /> up to constant</span>
                </div>
                
                <div className="bg-white rounded-lg p-2 border border-green-200 flex items-center gap-2">
                  <span className="text-green-600 font-bold text-lg">&#10003;</span>
                  <span className="text-sm"><strong className="text-green-800">Exact</strong> â€” no approximation error</span>
                </div>
                
                <div className="bg-white rounded-lg p-2 border border-green-200 flex items-center gap-2">
                  <span className="text-green-600 font-bold text-lg">&#10003;</span>
                  <span className="text-sm"><strong className="text-green-800">Independent</strong> â€” uncorrelated samples</span>
                </div>
                
                <div className="bg-white rounded-lg p-2 border border-amber-200 flex items-center gap-2">
                  <span className="text-amber-600 font-bold text-lg">!</span>
                  <span className="text-sm"><strong className="text-amber-800">Cost = M</strong> proposals per sample</span>
                </div>
              </div>
            </div>
    
            {/* Methods We've Seen */}
            <div className="bg-gradient-to-br from-purple-50 to-indigo-100 rounded-xl p-3 border-l-4 border-purple-500">
              <h3 className="text-base font-bold text-purple-800 mb-2">Rejection in Disguise</h3>
              
              <div className="space-y-2">
                <div className="bg-white rounded-lg p-2 border border-purple-200 flex justify-between items-center">
                  <span className="font-semibold text-purple-800">Polar Method</span>
                  <span className="text-sm bg-purple-100 px-2 py-1 rounded text-purple-700">
                    <Latex math="\pi/4 \approx 78.5\%" />
                  </span>
                </div>
                
                <div className="bg-white rounded-lg p-2 border border-purple-200 flex justify-between items-center">
                  <span className="font-semibold text-purple-800">Ziggurat</span>
                  <span className="text-sm bg-green-100 px-2 py-1 rounded text-green-700">
                    <Latex math="\approx 97\%" />
                  </span>
                </div>
                
                <div className="bg-white rounded-lg p-2 border border-purple-200 flex justify-between items-center">
                  <span className="font-semibold text-purple-800">scipy.stats.beta/gamma</span>
                  <span className="text-sm bg-blue-100 px-2 py-1 rounded text-blue-700">Optimized</span>
                </div>
              </div>
              
              <div className="mt-2 bg-purple-100 rounded-lg p-2">
                <p className="text-sm text-purple-800">
                  <strong>Insight:</strong> scipy is fast = decades of envelope optimization
                </p>
              </div>
            </div>
          </div>
    
          {/* Design Principles */}
          <div className="bg-gray-100 rounded-xl p-3 mb-2">
            <h3 className="text-base font-bold text-gray-800 mb-2">The Three Envelope Design Principles</h3>
            
            <div className="grid grid-cols-3 gap-3">
              <div className="bg-white rounded-lg p-2 border-t-4 border-blue-500">
                <h4 className="font-bold text-blue-800 text-sm mb-1">1. Support Coverage</h4>
                <p className="text-sm text-gray-600"><Latex math="\text{supp}(f) \subseteq \text{supp}(g)" /></p>
              </div>
              
              <div className="bg-white rounded-lg p-2 border-t-4 border-purple-500">
                <h4 className="font-bold text-purple-800 text-sm mb-1">2. Tail Matching</h4>
                <p className="text-sm text-gray-600">Heavy target <Latex math="\Rightarrow" /> heavier g</p>
              </div>
              
              <div className="bg-white rounded-lg p-2 border-t-4 border-green-500">
                <h4 className="font-bold text-green-800 text-sm mb-1">3. Shape Matching</h4>
                <p className="text-sm text-gray-600">Minimize <Latex math="M = \sup f/g" /></p>
              </div>
            </div>
          </div>
    
          {/* What's Next */}
          <div className="bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl p-3">
            <div className="flex items-center justify-between">
              <div>
                <h3 className="text-base font-bold mb-1">Coming Up: Variance Reduction (Section 2.6)</h3>
                <p className="text-sm text-indigo-100">
                  Rejection: "how to sample?" â€” Next: "how to estimate <Latex math="\mathbb{E}[h(X)]" /> accurately?"
                </p>
              </div>
              <div className="bg-white/10 rounded-lg p-2 ml-3">
                <ul className="text-sm text-indigo-100">
                  <li>â€¢ Importance sampling</li>
                  <li>â€¢ Control variates</li>
                  <li>â€¢ Antithetic variates</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                    SLIDE 64: VARIANCE REDUCTION HERO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide64_VarianceReductionHero() {
  return (
    <div className="p-6 flex flex-col h-full bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-900 text-white">
          {/* Section Label */}
          <div className="text-indigo-300 text-lg font-semibold mb-2">Section 2.6</div>
          
          {/* Main Title */}
          <h1 className="text-5xl font-bold mb-2">Variance Reduction Methods</h1>
          
          {/* Subtitle */}
          <p className="text-xl text-indigo-200 mb-4">Reducing <Latex math="\sigma^2" />, not changing the rate</p>
          
          {/* Recall the Goal Box */}
          <div className="bg-blue-500/20 backdrop-blur rounded-xl p-4 mb-4 border border-blue-400/30">
            <div className="text-blue-300 text-sm font-semibold mb-2">Recall the Goal</div>
            <div className="grid grid-cols-3 gap-4 text-center">
              <div>
                <div className="text-xs text-blue-200 mb-1">We want to estimate</div>
                <Latex math="I = \mathbb{E}_f[h(X)] = \int h(x)f(x)\,dx" />
              </div>
              <div>
                <div className="text-xs text-blue-200 mb-1">MC estimator</div>
                <Latex math="\hat{I}_n = \frac{1}{n}\sum_{i=1}^n h(X_i)" />
              </div>
              <div>
                <div className="text-xs text-blue-200 mb-1">Variance</div>
                <Latex math="\text{Var}(\hat{I}_n) = \frac{\sigma^2}{n}" />
              </div>
            </div>
          </div>
          
          {/* Central Equation - The Choice */}
          <div className="bg-white/10 backdrop-blur rounded-2xl p-4 mb-4 border border-white/20">
            <div className="text-center text-sm text-gray-300 mb-2">
              Rate <Latex math="O(n^{-1/2})" /> is fixed. To improve precision, we can either:
            </div>
            <div className="grid grid-cols-2 gap-6 text-center">
              <div className="bg-red-500/20 rounded-xl p-3 border border-red-400/30">
                <div className="text-red-300 text-sm mb-1">Brute Force</div>
                <div className="text-xl font-bold">Increase <Latex math="n" /></div>
                <div className="text-red-200 text-sm mt-1">4x samples for 2x precision</div>
              </div>
              <div className="bg-green-500/20 rounded-xl p-3 border border-green-400/30">
                <div className="text-green-300 text-sm mb-1">Smart Sampling</div>
                <div className="text-xl font-bold">Decrease <Latex math="\sigma^2" /></div>
                <div className="text-green-200 text-sm mt-1">Same precision, fewer samples</div>
              </div>
            </div>
          </div>
          
          {/* Five Methods Preview */}
          <div className="grid grid-cols-5 gap-3 flex-grow">
            <div className="bg-gradient-to-b from-blue-500/30 to-blue-600/30 rounded-xl p-3 border border-blue-400/30 flex flex-col">
              <div className="text-blue-300 text-xs font-semibold mb-1">01</div>
              <div className="font-bold text-sm mb-1">Importance Sampling</div>
              <div className="text-blue-200 text-xs flex-grow">Sample where integrand matters</div>
            </div>
            
            <div className="bg-gradient-to-b from-purple-500/30 to-purple-600/30 rounded-xl p-3 border border-purple-400/30 flex flex-col">
              <div className="text-purple-300 text-xs font-semibold mb-1">02</div>
              <div className="font-bold text-sm mb-1">Control Variates</div>
              <div className="text-purple-200 text-xs flex-grow">Subtract correlated known-mean</div>
            </div>
            
            <div className="bg-gradient-to-b from-pink-500/30 to-pink-600/30 rounded-xl p-3 border border-pink-400/30 flex flex-col">
              <div className="text-pink-300 text-xs font-semibold mb-1">03</div>
              <div className="font-bold text-sm mb-1">Antithetic Variates</div>
              <div className="text-pink-200 text-xs flex-grow">Negative correlation pairs</div>
            </div>
            
            <div className="bg-gradient-to-b from-amber-500/30 to-amber-600/30 rounded-xl p-3 border border-amber-400/30 flex flex-col">
              <div className="text-amber-300 text-xs font-semibold mb-1">04</div>
              <div className="font-bold text-sm mb-1">Stratified Sampling</div>
              <div className="text-amber-200 text-xs flex-grow">Balanced domain coverage</div>
            </div>
            
            <div className="bg-gradient-to-b from-emerald-500/30 to-emerald-600/30 rounded-xl p-3 border border-emerald-400/30 flex flex-col">
              <div className="text-emerald-300 text-xs font-semibold mb-1">05</div>
              <div className="font-bold text-sm mb-1">Common Random #s</div>
              <div className="text-emerald-200 text-xs flex-grow">Synchronized comparisons</div>
            </div>
          </div>
          
          {/* Bottom tagline */}
          <div className="text-center mt-3 text-indigo-300 text-lg italic">
            "Exploit structure to reduce randomness"
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 65: VARIANCE PROBLEM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide65_VarianceProblem() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">The Variance Problem</h1>
          <p className="text-gray-600 mb-2">Why brute force fails and what we can do about it</p>
    
          {/* Recall the setup */}
          <div className="bg-blue-50 rounded-lg p-2 mb-3 border border-blue-200">
            <div className="grid grid-cols-3 gap-3 text-sm text-center">
              <div>
                <span className="text-blue-600 font-semibold">Naive approach:</span>{' '}
                <Latex math="Y_i = h(X_i)" /> where <Latex math="X_i \sim f" />
              </div>
              <div>
                <span className="text-blue-600 font-semibold">Estimator:</span>{' '}
                <Latex math="\hat{I}_n = \frac{1}{n}\sum_{i=1}^n Y_i" />
              </div>
              <div>
                <span className="text-blue-600 font-semibold">Variance:</span>{' '}
                <Latex math="\text{Var}(\hat{I}_n) = \frac{\sigma^2}{n}" /> where <Latex math="\sigma^2 = \text{Var}(h(X))" />
              </div>
            </div>
          </div>
    
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: The Problem */}
            <div className="flex flex-col gap-2">
              {/* Fundamental equation */}
              <div className="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-3 border border-gray-200">
                <h3 className="text-sm font-bold text-gray-800 mb-2">The Fundamental Tradeoff</h3>
                <div className="bg-white rounded-lg p-2 text-center border border-gray-200">
                  <Latex math="\text{SE}(\hat{I}_n) = \frac{\sigma}{\sqrt{n}}" display={true} />
                </div>
                <p className="text-xs text-gray-600 mt-2">
                  Rate <Latex math="O(n^{-1/2})" /> is <strong>immutable</strong> (CLT). But we control both <Latex math="\sigma" /> and <Latex math="n" />!
                </p>
              </div>
    
              {/* Cost table */}
              <div className="bg-gradient-to-br from-red-50 to-orange-100 rounded-xl p-3 border border-red-200 flex-grow">
                <h3 className="text-sm font-bold text-red-800 mb-2">The Curse of <Latex math="\sqrt{n}" /></h3>
                <table className="w-full text-xs">
                  <thead>
                    <tr className="border-b-2 border-red-300">
                      <th className="text-left py-1 text-red-800">Precision Goal</th>
                      <th className="text-right py-1 text-red-800">Samples Needed</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr className="border-b border-red-200">
                      <td className="py-1">Baseline SE</td>
                      <td className="text-right font-mono">n</td>
                    </tr>
                    <tr className="border-b border-red-200 bg-red-50">
                      <td className="py-1">Halve SE (2x precision)</td>
                      <td className="text-right font-mono text-red-700 font-bold">4n</td>
                    </tr>
                    <tr className="border-b border-red-200">
                      <td className="py-1">Quarter SE (4x precision)</td>
                      <td className="text-right font-mono text-red-700 font-bold">16n</td>
                    </tr>
                    <tr className="bg-red-100">
                      <td className="py-1">+1 decimal (10x precision)</td>
                      <td className="text-right font-mono text-red-800 font-bold">100n</td>
                    </tr>
                  </tbody>
                </table>
                <p className="text-xs text-red-700 mt-2 italic">
                  For expensive simulations, this becomes prohibitive!
                </p>
              </div>
            </div>
    
            {/* Right: The Solution */}
            <div className="flex flex-col gap-2">
              {/* The strategy - clarified */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-3 border border-green-200">
                <h3 className="text-sm font-bold text-green-800 mb-2">The VR Strategy</h3>
                <p className="text-xs text-gray-700 mb-2">
                  Replace naive <Latex math="Y_i = h(X_i)" /> with clever <Latex math="\tilde{Y}_i" />:
                </p>
                <div className="bg-white rounded-lg p-2 border border-green-200 space-y-1 text-xs">
                  <div className="flex items-center gap-2">
                    <span className="text-green-600 font-bold">&#10003;</span>
                    <span>Still unbiased: <Latex math="\mathbb{E}[\tilde{Y}] = I" /></span>
                  </div>
                  <div className="flex items-center gap-2">
                    <span className="text-green-600 font-bold">&#10003;</span>
                    <span>Less variable: <Latex math="\text{Var}(\tilde{Y}) < \text{Var}(h(X))" /></span>
                  </div>
                </div>
                <div className="mt-2 bg-green-100 rounded p-2 text-xs text-center">
                  New estimator: <Latex math="\hat{I}_n^{\text{VR}} = \frac{1}{n}\sum_{i=1}^n \tilde{Y}_i" />
                  <div className="text-green-700 mt-1">Same n, smaller variance per term!</div>
                </div>
              </div>
    
              {/* What Y_tilde looks like - preview */}
              <div className="bg-gradient-to-br from-purple-50 to-indigo-100 rounded-xl p-3 border border-purple-200">
                <h3 className="text-sm font-bold text-purple-800 mb-2">What is <Latex math="\tilde{Y}" />? (Preview)</h3>
                <div className="space-y-1.5 text-xs">
                  <div className="bg-white rounded p-1.5 border border-purple-200">
                    <span className="font-semibold text-blue-700">IS:</span>{' '}
                    <Latex math="\tilde{Y} = h(X)\frac{f(X)}{g(X)}" />, <Latex math="X \sim g" />
                  </div>
                  <div className="bg-white rounded p-1.5 border border-purple-200">
                    <span className="font-semibold text-purple-700">CV:</span>{' '}
                    <Latex math="\tilde{Y} = h(X) - \beta(C - \mathbb{E}[C])" />
                  </div>
                  <div className="bg-white rounded p-1.5 border border-purple-200">
                    <span className="font-semibold text-pink-700">AV:</span>{' '}
                    <Latex math="\tilde{Y} = \tfrac{1}{2}[h(X) + h(X')]" />, <Latex math="X, X'" /> neg. corr.
                  </div>
                </div>
              </div>
    
              {/* VRF definition */}
              <div className="bg-gray-800 text-white rounded-xl p-3 flex-grow">
                <h3 className="text-sm font-bold text-green-400 mb-2">Variance Reduction Factor</h3>
                <div className="bg-white/10 rounded-lg p-2 text-center mb-2">
                  <Latex math="\text{VRF} = \frac{\text{Var}(h(X))}{\text{Var}(\tilde{Y})} = \frac{\sigma^2_{\text{naive}}}{\sigma^2_{\text{reduced}}}" display={true} />
                </div>
                <div className="text-xs space-y-1">
                  <p><strong className="text-green-400">VRF = 10</strong> means:</p>
                  <ul className="text-gray-300 text-xs space-y-0.5 ml-3">
                    <li>Same precision with 1/10 the samples</li>
                    <li>OR 10x better precision, same cost</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 66: METHODS OVERVIEW
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide66_MethodsOverview() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Variance Reduction Methods at a Glance</h1>
          <p className="text-gray-600 mb-2">Five techniques, each exploiting different problem structure</p>
    
          {/* Main comparison table */}
          <div className="bg-white rounded-xl border-2 border-gray-300 overflow-hidden flex-grow">
            <table className="w-full h-full">
              <thead>
                <tr className="bg-gray-800 text-white">
                  <th className="px-3 py-2.5 text-left text-base w-1/5">Method</th>
                  <th className="px-3 py-2.5 text-left text-base w-1/4">Mechanism</th>
                  <th className="px-3 py-2.5 text-left text-base w-1/4">Key Requirement</th>
                  <th className="px-3 py-2.5 text-left text-base w-1/4">Best Use Case</th>
                </tr>
              </thead>
              <tbody className="text-base">
                <tr className="border-b border-gray-200 bg-blue-50">
                  <td className="px-3 py-3">
                    <div className="font-bold text-blue-800 text-base">Importance Sampling</div>
                  </td>
                  <td className="px-3 py-3 text-gray-700">
                    Sample from <Latex math="g" />, reweight by <Latex math="f/g" />
                  </td>
                  <td className="px-3 py-3 text-gray-700">
                    <Latex math="g(x) > 0" /> where <Latex math="hf \neq 0" />
                  </td>
                  <td className="px-3 py-3">
                    <span className="bg-blue-200 text-blue-800 px-2 py-1 rounded font-semibold">Rare events</span>
                  </td>
                </tr>
                
                <tr className="border-b border-gray-200 bg-purple-50">
                  <td className="px-3 py-3">
                    <div className="font-bold text-purple-800 text-base">Control Variates</div>
                  </td>
                  <td className="px-3 py-3 text-gray-700">
                    Subtract correlated <Latex math="C" /> with known <Latex math="\mathbb{E}[C]" />
                  </td>
                  <td className="px-3 py-3 text-gray-700">
                    High <Latex math="|\rho|" />, exact <Latex math="\mathbb{E}[C]" />
                  </td>
                  <td className="px-3 py-3">
                    <span className="bg-purple-200 text-purple-800 px-2 py-1 rounded font-semibold">Auxiliary info</span>
                  </td>
                </tr>
                
                <tr className="border-b border-gray-200 bg-pink-50">
                  <td className="px-3 py-3">
                    <div className="font-bold text-pink-800 text-base">Antithetic Variates</div>
                  </td>
                  <td className="px-3 py-3 text-gray-700">
                    Pair <Latex math="U" /> with <Latex math="1-U" /> (neg. correlation)
                  </td>
                  <td className="px-3 py-3 text-gray-700">
                    Monotonic integrand
                  </td>
                  <td className="px-3 py-3">
                    <span className="bg-pink-200 text-pink-800 px-2 py-1 rounded font-semibold">Cost-neutral boost</span>
                  </td>
                </tr>
                
                <tr className="border-b border-gray-200 bg-amber-50">
                  <td className="px-3 py-3">
                    <div className="font-bold text-amber-800 text-base">Stratified / LHS</div>
                  </td>
                  <td className="px-3 py-3 text-gray-700">
                    Force balanced coverage across strata
                  </td>
                  <td className="px-3 py-3 text-gray-700">
                    Partitionable domain
                  </td>
                  <td className="px-3 py-3">
                    <span className="bg-amber-200 text-amber-800 px-2 py-1 rounded font-semibold">Fill gaps</span>
                  </td>
                </tr>
                
                <tr className="bg-emerald-50">
                  <td className="px-3 py-3">
                    <div className="font-bold text-emerald-800 text-base">Common Random #s</div>
                  </td>
                  <td className="px-3 py-3 text-gray-700">
                    Share <Latex math="U" /> stream across comparisons
                  </td>
                  <td className="px-3 py-3 text-gray-700">
                    Comparing systems
                  </td>
                  <td className="px-3 py-3">
                    <span className="bg-emerald-200 text-emerald-800 px-2 py-1 rounded font-semibold">A/B tests</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
    
          {/* Key insight */}
          <div className="bg-gray-800 text-white rounded-xl p-3 mt-2">
            <div className="flex items-center justify-between">
              <div className="text-base">
                <span className="font-bold text-green-400">Key Insight:</span>
                <span className="ml-2">Methods often combine approximately multiplicatively â€” verify VRF empirically</span>
              </div>
              <div className="text-gray-400">
                <Latex math="\text{VRF}_{\text{total}} \approx \text{VRF}_1 \times \text{VRF}_2" />
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 67: IS CORE IDEA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide67_ISCoreIdea() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Importance Sampling: The Core Idea</h1>
          <p className="text-gray-600 mb-2">Sample where the integrand contributes most, then reweight</p>
    
          <div className="grid grid-cols-2 gap-3 flex-grow">
            {/* Left: Motivation */}
            <div className="flex flex-col gap-2">
              {/* The problem */}
              <div className="bg-gradient-to-br from-red-50 to-orange-100 rounded-xl p-3 border border-red-200">
                <h3 className="text-sm font-bold text-red-800 mb-2">The Problem with Naive MC</h3>
                <p className="text-sm text-gray-700 mb-2">
                  We want <Latex math="I = \int h(x) f(x) \, dx" />
                </p>
                <div className="bg-white rounded-lg p-2 border border-red-200 text-sm">
                  <p className="text-red-800 font-semibold">Naive MC samples according to f</p>
                  <p className="text-gray-600 text-xs mt-1">
                    But f may put little mass where the product <Latex math="h(x)f(x)" /> contributes most to I!
                  </p>
                </div>
                <p className="text-xs text-red-700 mt-2 italic">
                  Example: <Latex math="P(X > 4)" /> for <Latex math="X \sim N(0,1)" /> â€” 
                  99.997% of samples contribute nothing.
                </p>
              </div>
    
              {/* The insight */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-3 border border-green-200 flex-grow">
                <h3 className="text-sm font-bold text-green-800 mb-2">The Insight</h3>
                <p className="text-sm text-gray-700 mb-2">
                  Sample from <strong>proposal</strong> <Latex math="g" /> that concentrates mass where 
                  the integrand <Latex math="|h(x)f(x)|" /> contributes significantly to I.
                </p>
                <p className="text-sm text-gray-700 mb-2">
                  Then <strong>reweight</strong> to correct for using g instead of f:
                </p>
                <div className="bg-white rounded-lg p-2 border border-green-200">
                  <div className="text-center">
                    <Latex math="w(x) = \frac{f(x)}{g(x)}" display={true} />
                  </div>
                  <p className="text-xs text-gray-600 text-center mt-1">
                    The <strong>importance weight</strong>
                  </p>
                </div>
              </div>
            </div>
    
            {/* Right: The Math */}
            <div className="flex flex-col gap-2">
              {/* Derivation */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-3 border border-blue-200 flex-grow">
                <h3 className="text-sm font-bold text-blue-800 mb-2">The Reweighting Identity</h3>
                <div className="bg-white rounded-lg p-2 border border-blue-200 space-y-1.5 text-sm">
                  <div className="flex items-center gap-2">
                    <span className="text-blue-600 font-mono text-xs w-5">1.</span>
                    <Latex math="I = \int h(x) f(x) \, dx" />
                  </div>
                  <div className="flex items-center gap-2">
                    <span className="text-blue-600 font-mono text-xs w-5">2.</span>
                    <Latex math="= \int h(x) \frac{f(x)}{g(x)} g(x) \, dx" />
                  </div>
                  <div className="flex items-center gap-2">
                    <span className="text-blue-600 font-mono text-xs w-5">3.</span>
                    <Latex math="= \int h(x) \cdot w(x) \cdot g(x) \, dx" />
                  </div>
                  <div className="flex items-center gap-2 bg-blue-100 rounded p-1">
                    <span className="text-blue-600 font-mono text-xs w-5">4.</span>
                    <Latex math="= \mathbb{E}_g[h(X) \cdot w(X)]" />
                  </div>
                </div>
                <p className="text-xs text-blue-700 mt-2">
                  <strong>Key:</strong> Same integral, but now sample from g instead of f!
                </p>
              </div>
    
              {/* Requirements on g */}
              <div className="bg-gradient-to-br from-amber-50 to-yellow-100 rounded-xl p-3 border border-amber-200">
                <h3 className="text-sm font-bold text-amber-800 mb-2">Requirements on Proposal g</h3>
                <div className="bg-white rounded-lg p-2 border border-amber-300 space-y-1 text-xs">
                  <div className="flex items-start gap-2">
                    <span className="text-amber-600 font-bold">1.</span>
                    <span><strong>Valid PDF:</strong> <Latex math="g(x) \geq 0" /> and <Latex math="\int g(x)\,dx = 1" /></span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-amber-600 font-bold">2.</span>
                    <span><strong>Support:</strong> <Latex math="g(x) > 0" /> wherever <Latex math="h(x)f(x) \neq 0" /></span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-amber-600 font-bold">3.</span>
                    <span><strong>Sampleable:</strong> Can draw <Latex math="X \sim g" /></span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-amber-600 font-bold">4.</span>
                    <span><strong>Evaluable:</strong> Can compute <Latex math="g(x)" /> to form weights</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Weight intuition - expanded with WHY */}
          <div className="bg-gray-100 rounded-xl p-3 mt-2">
            <h3 className="text-sm font-bold text-gray-800 mb-2">Weight Intuition: Correcting for Sampling Mismatch</h3>
            <div className="grid grid-cols-3 gap-3">
              <div className="bg-white rounded-lg p-2 border border-blue-200">
                <div className="text-base font-bold text-blue-600 text-center"><Latex math="g(x) > f(x)" /></div>
                <div className="text-xs text-gray-700 mt-1">
                  g puts <strong>more</strong> mass at x than f does. We see x too often when sampling from g.
                </div>
                <div className="text-sm font-semibold text-blue-800 text-center mt-1">
                  <Latex math="w < 1" /> downweight
                </div>
                <div className="text-xs text-gray-500 text-center">to avoid over-counting</div>
              </div>
              <div className="bg-white rounded-lg p-2 border border-green-200">
                <div className="text-base font-bold text-green-600 text-center"><Latex math="g(x) = f(x)" /></div>
                <div className="text-xs text-gray-700 mt-1">
                  Perfect match â€” see x exactly as often as f would.
                </div>
                <div className="text-sm font-semibold text-green-800 text-center mt-1">
                  <Latex math="w = 1" /> no change
                </div>
                <div className="text-xs text-gray-500 text-center">no correction needed</div>
              </div>
              <div className="bg-white rounded-lg p-2 border border-red-200">
                <div className="text-base font-bold text-red-600 text-center"><Latex math="g(x) < f(x)" /></div>
                <div className="text-xs text-gray-700 mt-1">
                  g puts <strong>less</strong> mass at x than f does. We see x too rarely.
                </div>
                <div className="text-sm font-semibold text-red-800 text-center mt-1">
                  <Latex math="w > 1" /> upweight
                </div>
                <div className="text-xs text-gray-500 text-center">each sample "counts more"</div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 68: IS ESTIMATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide68_ISEstimator() {
  return (
    <div className="p-5 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">The Importance Sampling Estimator</h1>
          <p className="text-lg text-gray-600 mb-3">Sample from g, reweight to estimate expectation under f</p>
    
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: Formula and Properties */}
            <div className="flex flex-col gap-3">
              {/* Main estimator */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-4 border border-blue-200">
                <h3 className="text-lg font-bold text-blue-800 mb-2">The Estimator</h3>
                <div className="bg-white rounded-lg p-3 border border-blue-300">
                  <Latex math="\hat{I}_{\text{IS}} = \frac{1}{n}\sum_{i=1}^n h(X_i) \frac{f(X_i)}{g(X_i)}" display={true} />
                </div>
                <p className="text-base text-blue-700 mt-2">
                  where <Latex math="X_1, \ldots, X_n \stackrel{\text{iid}}{\sim} g" /> (sample from proposal)
                </p>
              </div>
    
              {/* Unbiasedness */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-4 border border-green-200">
                <h3 className="text-lg font-bold text-green-800 mb-2">Unbiased</h3>
                <div className="bg-white rounded-lg p-3 border border-green-200">
                  <Latex math="\mathbb{E}_g[\hat{I}_{\text{IS}}] = \mathbb{E}_g[h(X)w(X)] = I \;\checkmark" display={true} />
                </div>
              </div>
    
              {/* Variance derivation */}
              <div className="bg-gradient-to-br from-purple-50 to-indigo-100 rounded-xl p-4 border border-purple-200 flex-grow">
                <h3 className="text-lg font-bold text-purple-800 mb-2">Variance</h3>
                <div className="bg-white rounded-lg p-3 border border-purple-200 space-y-2">
                  <div className="text-base text-gray-700">
                    <Latex math="X_i \stackrel{\text{iid}}{\sim} g" />, define <Latex math="Y_i = h(X_i)w(X_i)" />
                  </div>
                  <div className="text-sm text-gray-600 italic">
                    <Latex math="Y_i" /> iid (functions of iid RVs), so:
                  </div>
                  <div className="bg-purple-100 rounded p-2 text-center">
                    <Latex math="\text{Var}(\hat{I}_{\text{IS}}) = \frac{1}{n}\left[\mathbb{E}_g[h^2 w^2] - I^2\right]" display={true} />
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right: Comparison and Figure */}
            <div className="flex flex-col gap-3">
              {/* Side-by-side comparison */}
              <div className="bg-gradient-to-br from-amber-50 to-yellow-100 rounded-xl p-4 border border-amber-200">
                <h3 className="text-lg font-bold text-amber-800 mb-2">Naive MC vs IS Variance</h3>
                <div className="grid grid-cols-2 gap-3">
                  <div className="bg-white rounded-lg p-2 border border-gray-300">
                    <div className="text-sm text-gray-600 mb-1">Naive (sample f):</div>
                    <Latex math="\frac{\mathbb{E}_f[h^2] - I^2}{n}" />
                  </div>
                  <div className="bg-white rounded-lg p-2 border border-blue-300">
                    <div className="text-sm text-blue-600 mb-1">IS (sample g):</div>
                    <Latex math="\frac{\mathbb{E}_g[h^2 w^2] - I^2}{n}" />
                  </div>
                </div>
                <p className="text-sm text-amber-700 mt-2">
                  IS wins if <Latex math="\mathbb{E}_g[h^2 w^2] < \mathbb{E}_f[h^2]" />. Depends on g!
                </p>
              </div>
    
              {/* Good vs Bad */}
              <div className="grid grid-cols-2 gap-3">
                <div className="bg-green-100 rounded-xl p-3 border border-green-300">
                  <div className="font-bold text-green-800 text-base mb-1">Good g</div>
                  <div className="text-sm text-green-700">Concentrates where <Latex math="|h|f" /> is large</div>
                  <div className="text-sm text-green-600 mt-1 font-semibold">VRF can be 10-1000x</div>
                </div>
                <div className="bg-red-100 rounded-xl p-3 border border-red-300">
                  <div className="font-bold text-red-800 text-base mb-1">Bad g</div>
                  <div className="text-sm text-red-700">Lighter tails than f, or misses modes</div>
                  <div className="text-sm text-red-600 mt-1 font-semibold">Can be worse than naive!</div>
                </div>
              </div>
    
              {/* Figure */}
              <div className="bg-white rounded-xl border border-gray-300 overflow-hidden flex-grow">
                <img 
                  src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_6_fig01_importance_sampling_concept.png"
                  alt="Importance sampling concept showing target, proposal, weights, and weighted samples"
                  className="w-full h-full object-contain"
                />
              </div>
            </div>
          </div>
    
          {/* Bottom: Key insight */}
          <div className="bg-gray-800 text-white rounded-xl p-3 mt-3">
            <div className="flex items-center justify-between">
              <div className="text-base">
                <span className="font-bold text-amber-400">The Game:</span>
                <span className="ml-2">Choose g to minimize <Latex math="\mathbb{E}_g[h^2 w^2] = \int \frac{h(x)^2 f(x)^2}{g(x)}\,dx" /></span>
              </div>
              <div className="text-gray-400">
                Next: What's the optimal g?
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                          SLIDE 69: IS OPTIMAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide69_ISOptimal() {
  return (
    <div className="p-5 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">Optimal Proposal & Self-Normalized IS</h1>
          <p className="text-lg text-gray-600 mb-2">The zero-variance ideal and practical alternatives</p>
    
          <div className="grid grid-cols-2 gap-3 flex-grow">
            {/* Left: Optimal Proposal */}
            <div className="flex flex-col gap-3">
              {/* Optimal formula */}
              <div className="bg-gradient-to-br from-purple-50 to-indigo-100 rounded-xl p-3 border border-purple-200">
                <h3 className="text-base font-bold text-purple-800 mb-1">The Optimal Proposal</h3>
                <div className="bg-white rounded-lg p-2 border border-purple-300 text-center">
                  <Latex math="g^*(x) \propto |h(x)| f(x)" display={true} />
                </div>
                <p className="text-sm text-purple-700 mt-2">
                  For <Latex math="h \geq 0" />: every sample gives <Latex math="h(x)w(x) = c" /> â€” zero variance!
                </p>
              </div>
    
              {/* The catches - clearer about validity */}
              <div className="bg-gradient-to-br from-red-50 to-orange-100 rounded-xl p-3 border border-red-200 flex-grow">
                <h3 className="text-base font-bold text-red-800 mb-2">Why We Can't Use <Latex math="g^*" /> Directly</h3>
                <div className="text-sm text-red-700 space-y-2">
                  <div className="bg-white rounded p-2 border border-red-200">
                    <strong>May not be a valid PDF:</strong>
                    <ul className="ml-4 mt-1 text-xs space-y-0.5">
                      <li>â€¢ <Latex math="h(x)" /> changes sign â€” <Latex math="hf" /> negative somewhere</li>
                      <li>â€¢ <Latex math="h(x) = 0" /> on positive-measure set â€” holes in <Latex math="g^*" /></li>
                      <li>â€¢ <Latex math="\int |h|f = \infty" /> â€” not normalizable</li>
                    </ul>
                  </div>
                  <div>
                    <strong>Circular:</strong> normalizing requires <Latex math="\int |h|f" /> â€” what we're computing!
                  </div>
                  <div>
                    <strong>Intractable:</strong> even if valid, sampling from <Latex math="|h|f" /> is hard
                  </div>
                </div>
                <p className="text-sm text-red-800 mt-2 font-semibold bg-red-100 rounded p-1.5 text-center">
                  <Latex math="g^*" /> is a guide to the shape, not a usable recipe!
                </p>
              </div>
            </div>
    
            {/* Right: Self-Normalized and Practical */}
            <div className="flex flex-col gap-3">
              {/* Self-normalized */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-3 border border-blue-200">
                <h3 className="text-base font-bold text-blue-800 mb-1">Self-Normalized IS</h3>
                <p className="text-xs text-gray-600 mb-1">When f only known up to constant (e.g., Bayesian posteriors):</p>
                <div className="bg-white rounded-lg p-2 border border-blue-300 text-center">
                  <Latex math="\hat{I}_{\text{SN}} = \frac{\sum h(X_i) \tilde{w}_i}{\sum \tilde{w}_i}, \quad \tilde{w}_i = \tilde{f}(X_i)/g(X_i)" display={true} />
                </div>
                <div className="mt-2 grid grid-cols-2 gap-2 text-sm">
                  <div className="bg-amber-100 rounded p-1.5 text-center">
                    <span className="font-semibold text-amber-800">Biased:</span>
                    <span className="text-amber-700 ml-1">O(1/n)</span>
                  </div>
                  <div className="bg-green-100 rounded p-1.5 text-center">
                    <span className="font-semibold text-green-800">Consistent:</span>
                    <span className="text-green-700 ml-1"><Latex math="\hat{I} \to I" /></span>
                  </div>
                </div>
              </div>
    
              {/* Practical guidance - elaborated */}
              <div className="bg-gradient-to-br from-teal-50 to-cyan-100 rounded-xl p-3 border border-teal-200 flex-grow">
                <h3 className="text-base font-bold text-teal-800 mb-2">Practical Proposal Design</h3>
                <p className="text-xs text-gray-600 mb-2">Match shape of <Latex math="|h|f" /> with tractable g:</p>
                <div className="space-y-1.5 text-sm">
                  <div className="bg-white rounded p-2 border border-teal-200">
                    <span className="font-semibold text-teal-800">Tail probs <Latex math="P(X > a)" />:</span>
                    <span className="text-gray-700 text-xs ml-1"><Latex math="|h|f" /> concentrates near a â€” use <Latex math="g = N(a, \sigma^2)" /></span>
                  </div>
                  <div className="bg-white rounded p-2 border border-teal-200">
                    <span className="font-semibold text-teal-800">Heavy-tailed f:</span>
                    <span className="text-gray-700 text-xs ml-1">Use t-dist â€” lighter-tailed g causes weight explosion</span>
                  </div>
                  <div className="bg-white rounded p-2 border border-teal-200">
                    <span className="font-semibold text-teal-800">Multimodal f:</span>
                    <span className="text-gray-700 text-xs ml-1">Mixture <Latex math="g = \sum_k \pi_k g_k" /> covering each mode</span>
                  </div>
                  <div className="bg-white rounded p-2 border border-teal-200">
                    <span className="font-semibold text-teal-800">Unknown shape:</span>
                    <span className="text-gray-700 text-xs ml-1">Adaptive IS â€” pilot run, examine weights, refine</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom: Key insight */}
          <div className="bg-gray-800 text-white rounded-xl p-3 mt-2">
            <div className="grid grid-cols-2 gap-4 text-sm">
              <div>
                <span className="font-bold text-amber-400">Design principle:</span>
                <span className="ml-1">Put mass where <Latex math="|h|f" /> is large; g should have heavier tails than f</span>
              </div>
              <div>
                <span className="font-bold text-green-400">Self-normalize when:</span>
                <span className="ml-1">f unnormalized, or for more stable weight distributions</span>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                   SLIDE 70: IS EFFECTIVE SAMPLE SIZE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide70_ISEffectiveSampleSize() {
  return (
    <div className="p-5 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">ESS & Weight Diagnostics</h1>
          <p className="text-lg text-gray-600 mb-3">How many effective samples do you really have?</p>
    
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: ESS Theory */}
            <div className="flex flex-col gap-3">
              {/* ESS formula */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-4 border border-blue-200">
                <h3 className="text-base font-bold text-blue-800 mb-2">Effective Sample Size (ESS)</h3>
                <p className="text-sm text-gray-700 mb-2">
                  Not all samples equally informative. ESS = equivalent i.i.d. samples:
                </p>
                <div className="bg-white rounded-lg p-3 border border-blue-300 text-center">
                  <Latex math="n_{\text{eff}} = \frac{1}{\sum_{i=1}^n \bar{w}_i^2} = \frac{\left(\sum_i w_i\right)^2}{\sum_i w_i^2}" display={true} />
                </div>
                <div className="mt-2 flex justify-center gap-4 text-sm">
                  <div className="bg-red-100 rounded px-3 py-1.5 text-center">
                    <span className="font-mono text-red-800"><Latex math="n_{\text{eff}} = 1" /></span>
                    <span className="text-red-700 ml-2">one dominant</span>
                  </div>
                  <div className="bg-green-100 rounded px-3 py-1.5 text-center">
                    <span className="font-mono text-green-800"><Latex math="n_{\text{eff}} = n" /></span>
                    <span className="text-green-700 ml-2">all equal</span>
                  </div>
                </div>
              </div>
    
              {/* CV diagnostic - compact single line */}
              <div className="bg-gradient-to-br from-amber-50 to-yellow-100 rounded-xl p-3 border border-amber-200">
                <div className="flex items-center gap-3 mb-2">
                  <h3 className="text-base font-bold text-amber-800">Weight CV:</h3>
                  <span className="text-sm text-gray-600"><Latex math="\text{CV} = \text{SD}(w)/\text{Mean}(w)" /></span>
                </div>
                <div className="flex justify-between text-sm">
                  <div className="bg-green-200 text-green-800 rounded px-3 py-1.5 font-semibold text-center">
                    CV {"<"} 1: Good
                  </div>
                  <div className="bg-yellow-200 text-yellow-800 rounded px-3 py-1.5 font-semibold text-center">
                    CV 1-3: Caution
                  </div>
                  <div className="bg-red-200 text-red-800 rounded px-3 py-1.5 font-semibold text-center">
                    CV {">"} 5: Degenerate!
                  </div>
                </div>
              </div>
    
              {/* High-d warning */}
              <div className="bg-gradient-to-br from-red-50 to-orange-100 rounded-xl p-3 border border-red-200 flex-grow">
                <h3 className="text-base font-bold text-red-800 mb-2">High-Dimensional Curse</h3>
                <p className="text-sm text-gray-700 mb-2">
                  Bengtsson et al. (2008): required n grows <strong>exponentially</strong> with d:
                </p>
                <div className="bg-white rounded-lg p-2 border border-red-200 text-center">
                  <Latex math="n \sim \exp(d)" display={true} />
                </div>
                <p className="text-sm text-red-700 mt-2">
                  Naive IS collapses in high-d. Use adaptive IS, SMC, or MCMC instead.
                </p>
              </div>
            </div>
    
            {/* Right: Figure */}
            <div className="flex flex-col">
              <div className="bg-white rounded-xl border border-gray-300 overflow-hidden flex-grow">
                <img 
                  src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_6_fig03_effective_sample_size.png"
                  alt="Effective sample size visualization showing weight distributions and ESS for different proposals"
                  className="w-full h-full object-contain"
                />
              </div>
              <p className="text-sm text-gray-600 mt-2 text-center">
                ESS varies dramatically with proposal choice
              </p>
            </div>
          </div>
    
          {/* Bottom: Monitoring rules */}
          <div className="bg-gray-800 text-white rounded-xl p-3 mt-3">
            <div className="flex items-center gap-6">
              <span className="text-base font-bold text-green-400">Rules of Thumb:</span>
              <div className="flex gap-4 text-sm">
                <div className="bg-white/10 rounded px-3 py-1.5">
                  <span className="text-gray-400">ESS:</span>
                  <span className="font-bold ml-2"><Latex math="\geq 0.1n" /></span>
                </div>
                <div className="bg-white/10 rounded px-3 py-1.5">
                  <span className="text-gray-400">Max weight:</span>
                  <span className="font-bold ml-2"><Latex math="\bar{w}_{\max} < 0.1" /></span>
                </div>
                <div className="bg-white/10 rounded px-3 py-1.5">
                  <span className="text-gray-400">CV:</span>
                  <span className="font-bold ml-2"><Latex math="\leq 1" /></span>
                </div>
                <div className="bg-white/10 rounded px-3 py-1.5">
                  <span className="font-bold text-amber-400">Always plot weights!</span>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                  SLIDE 70: SLIDE70 B_IS FAILURE MODES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide70b_ISFailureModes() {
  return (
    <div className="p-5 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">IS Failure Modes: What Can Go Wrong</h1>
          <p className="text-lg text-gray-600 mb-3">Two ways importance sampling fails â€” silently and catastrophically</p>
    
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Failure Mode 1: Support Mismatch */}
            <div className="flex flex-col">
              <div className="bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 border-2 border-red-300 flex-grow">
                <div className="flex items-center gap-2 mb-3">
                  <span className="text-2xl">ğŸš«</span>
                  <h3 className="text-xl font-bold text-red-800">Support Mismatch</h3>
                </div>
                
                <div className="bg-white rounded-lg p-3 border border-red-200 mb-3">
                  <p className="text-sm text-gray-700 mb-2">
                    <strong>Problem:</strong> <Latex math="g(x) = 0" /> where <Latex math="h(x)f(x) \neq 0" />
                  </p>
                  <p className="text-base text-red-700 font-semibold">
                    Those points can never be sampled â€” <strong>biased estimate</strong>
                  </p>
                </div>
    
                <div className="bg-red-100 rounded-lg p-3 border border-red-200">
                  <p className="text-sm font-semibold text-red-800 mb-2">Concrete Example:</p>
                  <p className="text-sm text-gray-700">
                    Estimate <Latex math="P(X > 6)" /> for <Latex math="X \sim N(0,1)" />
                  </p>
                  <p className="text-sm text-gray-700 mt-1">
                    Using <Latex math="g = \text{Uniform}(0, 5)" />
                  </p>
                  <div className="mt-2 bg-red-200 rounded p-2 text-center">
                    <span className="text-red-800 font-bold text-base">Estimate = 0 always!</span>
                  </div>
                </div>
    
                <div className="mt-3 bg-white rounded p-2 border border-red-200">
                  <span className="text-sm text-red-800 font-semibold">Fix: </span>
                  <span className="text-sm text-red-700">Verify <Latex math="\text{supp}(hf) \subseteq \text{supp}(g)" /> before running</span>
                </div>
              </div>
            </div>
    
            {/* Failure Mode 2: Infinite Variance */}
            <div className="flex flex-col">
              <div className="bg-gradient-to-br from-orange-50 to-amber-100 rounded-xl p-4 border-2 border-orange-300 flex-grow">
                <div className="flex items-center gap-2 mb-3">
                  <span className="text-2xl">ğŸ’¥</span>
                  <h3 className="text-xl font-bold text-orange-800">Infinite Variance</h3>
                </div>
                
                <div className="bg-white rounded-lg p-3 border border-orange-200 mb-3">
                  <p className="text-sm text-gray-700 mb-2">
                    <strong>Problem:</strong> <Latex math="g" /> has lighter tails than <Latex math="f" />
                  </p>
                  <p className="text-base text-orange-700 font-semibold">
                    Weights <Latex math="w = f/g \to \infty" /> in tails â€” <strong>CLT fails</strong>
                  </p>
                </div>
    
                <div className="bg-orange-100 rounded-lg p-3 border border-orange-200">
                  <p className="text-sm font-semibold text-orange-800 mb-2">Concrete Example:</p>
                  <p className="text-sm text-gray-700">
                    Target: <Latex math="f = \text{Cauchy}(0,1)" /> (heavy tails)
                  </p>
                  <p className="text-sm text-gray-700 mt-1">
                    Proposal: <Latex math="g = N(0,1)" /> (light tails)
                  </p>
                  <div className="mt-2 bg-orange-200 rounded p-2 text-center">
                    <span className="text-orange-800 font-bold text-base">Rare massive weights dominate!</span>
                  </div>
                </div>
    
                <div className="mt-3 bg-white rounded p-2 border border-orange-200">
                  <span className="text-sm text-orange-800 font-semibold">Fix: </span>
                  <span className="text-sm text-orange-700">Use <Latex math="g" /> with tails at least as heavy as <Latex math="f" /></span>
                </div>
              </div>
            </div>
          </div>
    
          {/* Detection strategies */}
          <div className="bg-gray-800 text-white rounded-xl p-3 mt-3">
            <div className="flex items-center gap-6">
              <span className="text-base font-bold text-green-400">Detection:</span>
              <div className="flex gap-4 text-sm">
                <div className="bg-white/10 rounded px-3 py-1.5">
                  <span className="text-gray-400">ESS collapse:</span>
                  <span className="font-bold ml-2"><Latex math="n_{\text{eff}} \ll n" /></span>
                </div>
                <div className="bg-white/10 rounded px-3 py-1.5">
                  <span className="text-gray-400">Huge CV:</span>
                  <span className="font-bold ml-2"><Latex math="\text{CV}(w) > 5" /></span>
                </div>
                <div className="bg-white/10 rounded px-3 py-1.5">
                  <span className="text-gray-400">Dominant weight:</span>
                  <span className="font-bold ml-2"><Latex math="\bar{w}_{\max} > 0.5" /></span>
                </div>
                <div className="bg-white/10 rounded px-3 py-1.5">
                  <span className="font-bold text-amber-400">Run multiple times!</span>
                </div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                SLIDE 70: SLIDE70 C_IS PROPOSAL SELECTION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide70c_ISProposalSelection() {
  return (
    <div className="p-5 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">Choosing the Proposal Distribution</h1>
          <p className="text-lg text-gray-600 mb-3">Practical strategies guided by <Latex math="g^* \propto |h(x)|f(x)" /></p>
    
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left column */}
            <div className="flex flex-col gap-3">
              {/* Strategy 1: Shift the mean */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-4 border border-blue-200">
                <div className="flex items-center gap-2 mb-2">
                  <span className="bg-blue-600 text-white rounded-full w-7 h-7 flex items-center justify-center text-base font-bold">1</span>
                  <h3 className="text-base font-bold text-blue-800">Shift the Mean</h3>
                </div>
                <p className="text-sm text-gray-700 mb-2">
                  Move proposal center toward where <Latex math="|h|f" /> concentrates
                </p>
                <div className="bg-white rounded p-2 border border-blue-200 text-center">
                  <Latex math="f = N(0,1) \rightarrow g = N(\mu_{\text{target}}, 1)" />
                </div>
                <p className="text-sm text-blue-700 mt-2">
                  <strong>When:</strong> Tail probabilities <Latex math="P(X > a)" />, option pricing for deep out-of-money strikes, any unimodal target with important region away from f's center
                </p>
              </div>
    
              {/* Strategy 2: Exponential tilting */}
              <div className="bg-gradient-to-br from-purple-50 to-violet-100 rounded-xl p-4 border border-purple-200">
                <div className="flex items-center gap-2 mb-2">
                  <span className="bg-purple-600 text-white rounded-full w-7 h-7 flex items-center justify-center text-base font-bold">2</span>
                  <h3 className="text-base font-bold text-purple-800">Exponential Tilting</h3>
                </div>
                <p className="text-sm text-gray-700 mb-2">
                  Principled mean-shift preserving exponential family structure
                </p>
                <div className="bg-white rounded p-2 border border-purple-200 text-center">
                  <Latex math="g(x) \propto f(x) e^{\theta x}" />
                </div>
                <p className="text-sm text-purple-700 mt-2">
                  <strong>When:</strong> Large deviations problems, queueing overflow, insurance ruin, reliability analysis. For <Latex math="f = N(0,1)" />, tilting gives <Latex math="g = N(\theta, 1)" />
                </p>
              </div>
    
              {/* Strategy 3: Mixtures */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-4 border border-green-200 flex-grow">
                <div className="flex items-center gap-2 mb-2">
                  <span className="bg-green-600 text-white rounded-full w-7 h-7 flex items-center justify-center text-base font-bold">3</span>
                  <h3 className="text-base font-bold text-green-800">Defensive Mixtures</h3>
                </div>
                <p className="text-sm text-gray-700 mb-2">
                  Trade efficiency for robustness against poor proposal choice
                </p>
                <div className="bg-white rounded p-2 border border-green-200 text-center">
                  <Latex math="g = \alpha f + (1-\alpha) g_0" />
                </div>
                <p className="text-sm text-green-700 mt-2">
                  <strong>Key property:</strong> Weights bounded by <Latex math="w \leq 1/\alpha" /> since <Latex math="f/g \leq f/(\alpha f) = 1/\alpha" />. Even if <Latex math="g_0" /> is terrible, you can't get infinite variance!
                </p>
              </div>
            </div>
    
            {/* Right column */}
            <div className="flex flex-col gap-3">
              {/* Strategy 4: Match shape */}
              <div className="bg-gradient-to-br from-amber-50 to-yellow-100 rounded-xl p-4 border border-amber-200">
                <div className="flex items-center gap-2 mb-2">
                  <span className="bg-amber-600 text-white rounded-full w-7 h-7 flex items-center justify-center text-base font-bold">4</span>
                  <h3 className="text-base font-bold text-amber-800">Match Integrand Shape</h3>
                </div>
                <p className="text-sm text-gray-700 mb-2">
                  The optimal <Latex math="g^* \propto |h|f" /> tells us: mimic the integrand's geometry
                </p>
                <div className="bg-white rounded p-2 border border-amber-200 text-sm">
                  <ul className="space-y-1">
                    <li>â€¢ Bimodal <Latex math="|h|f" /> â€” use mixture <Latex math="g = \sum_k \pi_k g_k" /></li>
                    <li>â€¢ Heavy-tailed <Latex math="|h|f" /> â€” use t-distribution or Cauchy</li>
                    <li>â€¢ Skewed <Latex math="|h|f" /> â€” use log-normal or gamma</li>
                  </ul>
                </div>
                <p className="text-sm text-amber-700 mt-2">
                  <strong>First step:</strong> Always plot <Latex math="|h(x)|f(x)" /> before choosing g!
                </p>
              </div>
    
              {/* VRF note - expanded */}
              <div className="bg-gray-100 rounded-xl p-4 border border-gray-300 flex-grow">
                <h3 className="text-lg font-bold text-gray-800 mb-2">Comparing Methods: Integrand Evaluations</h3>
                <p className="text-sm text-gray-700 mb-2">
                  <strong>VRF</strong> = <Latex math="\text{Var}_{\text{naive}} / \text{Var}_{\text{method}}" /> compares at equal sample size n. But computational cost should be measured in <strong>integrand evaluations</strong>, not samples.
                </p>
                <div className="bg-white rounded p-2 border border-gray-200 text-sm text-gray-700">
                  <p className="mb-1"><strong>Example:</strong> Antithetic variates uses pairs <Latex math="(U, 1-U)" /></p>
                  <p>â€¢ n pairs = 2n evaluations of h()</p>
                  <p>â€¢ Fair comparison: same total h() calls, not same n</p>
                </div>
                <p className="text-sm text-gray-700 mt-2">
                  When h() is expensive (simulation, PDE solve), this distinction matters greatly.
                </p>
              </div>
            </div>
          </div>
    
          {/* Bottom: Key principle */}
          <div className="bg-blue-800 text-white rounded-xl p-3 mt-3">
            <div className="flex items-center justify-between">
              <div className="text-sm">
                <span className="font-bold text-blue-200">Guiding Principle:</span>
                <span className="ml-2">Put samples where <Latex math="|h(x)|f(x)" /> is large, ensure g has heavier tails than f</span>
              </div>
              <div className="text-blue-300 text-sm">
                <Latex math="g^* \propto |h(x)|f(x)" />
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 71: IS RARE EVENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide71_ISRareEvent() {
  return (
    <div className="p-5 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">IS Worked Example: Rare Event Estimation</h1>
          <p className="text-lg text-gray-600 mb-2">Estimating <Latex math="I = \mathbb{E}[\mathbf{1}(Z > 4)] = \int_{-\infty}^{\infty} \mathbf{1}(x > 4)\,\phi(x)\,dx" /> â€” about 1 in 31,500</p>
    
          <div className="grid grid-cols-5 gap-4 flex-grow">
            {/* Left: Problem & Solution */}
            <div className="col-span-2 flex flex-col gap-3">
              {/* Why this matters */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-3 border border-blue-200">
                <h3 className="text-base font-bold text-blue-800 mb-1">Why Tail Probabilities?</h3>
                <p className="text-sm text-gray-700">
                  Risk management, insurance pricing, reliability engineering â€” all need probabilities of rare but consequential events.
                </p>
              </div>
    
              {/* Problem */}
              <div className="bg-gradient-to-br from-red-50 to-orange-100 rounded-xl p-3 border border-red-200">
                <h3 className="text-base font-bold text-red-800 mb-1">The Challenge</h3>
                <div className="text-sm space-y-1">
                  <p><Latex math="I = \int \mathbf{1}(x>4)\phi(x)\,dx \approx 3.17 \times 10^{-5}" /></p>
                  <p className="text-red-700">With n = 10,000: expect ~0.3 samples above 4</p>
                  <p className="text-red-700 font-semibold">Most runs: estimate = 0!</p>
                </div>
              </div>
    
              {/* IS solution */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-3 border border-green-200 flex-grow">
                <h3 className="text-base font-bold text-green-800 mb-1">IS: Shift to the Tail</h3>
                <p className="text-sm text-gray-700 mb-1">With <Latex math="h(x) = \mathbf{1}(x>4)" />, use proposal <Latex math="g(x) = \phi(x-4)" /></p>
                <div className="bg-white rounded p-2 border border-green-200 text-xs space-y-1">
                  <div className="text-center"><Latex math="w(x) = \frac{\phi(x)}{\phi(x-4)} = \frac{e^{-x^2/2}}{e^{-(x-4)^2/2}}" /></div>
                  <div className="text-center text-gray-600">Expand <Latex math="(x-4)^2 = x^2 - 8x + 16" />:</div>
                  <div className="text-center"><Latex math="w(x) = e^{(-x^2 + x^2 - 8x + 16)/2} = e^{8-4x}" /></div>
                </div>
                <div className="mt-2 bg-green-200 rounded p-2 text-center">
                  <span className="font-bold text-green-800 text-lg">VRF â‰ˆ 6,730</span>
                </div>
              </div>
    
              {/* Why not truncated? */}
              <div className="bg-gradient-to-br from-purple-50 to-violet-100 rounded-xl p-3 border border-purple-200">
                <h3 className="text-base font-bold text-purple-800 mb-1">Why Not Truncated Normal?</h3>
                <p className="text-xs text-gray-700">
                  For <Latex math="h(x) = \mathbf{1}(x>4)" />, the optimal <Latex math="g^* \propto |h|f" /> is N(0,1) truncated to <Latex math="(4,\infty)" /> â€” zero variance! But sampling it requires <Latex math="\Phi(4)" />, the very thing we're estimating. Shifted normal works when f is complex.
                </p>
              </div>
            </div>
    
            {/* Right: Figure */}
            <div className="col-span-3 flex flex-col">
              <div className="bg-white rounded-xl border border-gray-300 overflow-hidden flex-grow">
                <img 
                  src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_6_fig02_rare_event_estimation.png"
                  alt="Rare event estimation comparing naive MC vs importance sampling for P(Z>4)"
                  className="w-full h-full object-contain"
                />
              </div>
            </div>
          </div>
    
          {/* Bottom: Key insight */}
          <div className="bg-gray-800 text-white rounded-xl p-3 mt-2">
            <div className="flex items-center justify-between">
              <div className="text-sm">
                <span className="font-bold text-amber-400">Applications:</span>
                <span className="ml-2">Credit risk, insurance pricing, reliability engineering, buffer overflow, extreme weather</span>
              </div>
              <div className="text-sm">
                <span className="text-gray-400">True value:</span>
                <span className="ml-2 font-mono"><Latex math="3.17 \times 10^{-5}" /></span>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                       SLIDE 72: CONTROL VARIATES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide72_ControlVariates() {
  return (
    <div className="p-5 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">Control Variates: The Idea</h1>
          <p className="text-lg text-gray-600 mb-2">Exploit correlation to subtract out shared noise</p>
    
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: Concept and Formula */}
            <div className="flex flex-col gap-3">
              {/* Setup */}
              <div className="bg-gradient-to-br from-gray-50 to-slate-100 rounded-xl p-3 border border-gray-300">
                <h3 className="text-base font-bold text-gray-800 mb-1">Setup</h3>
                <p className="text-sm text-gray-700">
                  Draw <Latex math="X_1, \ldots, X_n \sim f" />. From <strong>each</strong> <Latex math="X_i" />, compute:
                </p>
                <div className="bg-white rounded p-2 border border-gray-200 mt-1 text-sm space-y-1">
                  <p><Latex math="H_i = h(X_i)" /> (interest) with sample mean <Latex math="\bar{H} = \frac{1}{n}\sum_{i=1}^n H_i" /></p>
                  <p><Latex math="C_i = c(X_i)" /> (control) with sample mean <Latex math="\bar{C} = \frac{1}{n}\sum_{i=1}^n C_i" /></p>
                </div>
              </div>
    
              {/* Requirements */}
              <div className="bg-gradient-to-br from-amber-50 to-yellow-100 rounded-xl p-3 border border-amber-300">
                <h3 className="text-base font-bold text-amber-800 mb-1">Requirements</h3>
                <div className="text-sm space-y-1">
                  <p><strong>1.</strong> <Latex math="\text{Corr}(H_i, C_i) \neq 0" /> â€” H and C are correlated</p>
                  <p><strong>2.</strong> <Latex math="\mathbb{E}[C]" /> is <strong>known exactly</strong> (analytically)</p>
                </div>
              </div>
    
              {/* Insight */}
              <div className="bg-gradient-to-br from-purple-50 to-indigo-100 rounded-xl p-3 border border-purple-200">
                <h3 className="text-base font-bold text-purple-800 mb-1">The Insight</h3>
                <p className="text-sm text-purple-700">
                  When <Latex math="\bar{C}" /> deviates from <Latex math="\mathbb{E}[C]" />, we know <Latex math="\bar{H}" /> likely deviates too â€” <strong>in a predictable direction!</strong> We can compensate.
                </p>
              </div>
    
              {/* The estimator */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-3 border border-blue-200 flex-grow">
                <h3 className="text-base font-bold text-blue-800 mb-1">The CV Estimator</h3>
                <div className="bg-white rounded-lg p-2 border border-blue-300 text-center">
                  <Latex math="\hat{I}_{\text{CV}} = \bar{H} - \beta\left(\bar{C} - \mathbb{E}[C]\right)" display={true} />
                </div>
                <p className="text-xs text-gray-600 mt-2 text-center">
                  Since <Latex math="\mathbb{E}[\bar{C}] = \mathbb{E}[C]" />, the adjustment has mean zero â€” unbiased for any fixed <Latex math="\beta" />
                </p>
              </div>
            </div>
    
            {/* Right: Figure and What CV Provides */}
            <div className="flex flex-col gap-3">
              <div className="bg-white rounded-xl border border-gray-300 overflow-hidden flex-grow">
                <img 
                  src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_6_fig04_control_variates.png"
                  alt="Control variates concept showing correlation between H and C, and variance reduction"
                  className="w-full h-full object-contain"
                />
              </div>
    
              {/* What CV provides */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-3 border border-green-200">
                <h3 className="text-base font-bold text-green-800 mb-1">What CV Provides</h3>
                <div className="bg-white rounded p-2 border border-green-200 text-sm">
                  <p className="mb-1"><Latex math="\text{Var}(\hat{I}_{\text{CV}}) = \text{Var}(\bar{H})(1 - \rho^2)" /> at optimal <Latex math="\beta" /></p>
                  <p className="text-green-700 text-xs">Variance reduced by factor <Latex math="(1 - \rho^2)" />. If <Latex math="|\rho| = 0.9" />, that's 81% reduction!</p>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom: Analogy */}
          <div className="bg-gray-800 text-white rounded-xl p-3 mt-3">
            <div className="text-sm">
              <span className="font-bold text-amber-400">Analogy:</span>
              <span className="ml-2">Estimating crop yield (<Latex math="H_i" />) by sampling farms. Also measure rainfall (<Latex math="C_i" />) at each farm. If <Latex math="\bar{C} > \mathbb{E}[C]" /> (above-average rain) and Corr(yield, rain) {">"} 0, our <Latex math="\bar{H}" /> is probably inflated â€” subtract the excess to compensate.</span>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                          SLIDE 73: CV OPTIMAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide73_CVOptimal() {
  return (
    <div className="p-5 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">CV: Optimal Coefficient <Latex math="\beta^*" /></h1>
          <p className="text-lg text-gray-600 mb-2">For a given control variate C, find <Latex math="\beta" /> minimizing <Latex math="\text{Var}(\hat{I}_{\text{CV}})" /></p>
    
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: Derivation */}
            <div className="flex flex-col gap-3">
              {/* Variance expansion */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-3 border border-blue-200">
                <h3 className="text-base font-bold text-blue-800 mb-2">Step 1: Expand the Variance</h3>
                <div className="bg-white rounded-lg p-2 border border-blue-200 text-sm">
                  <Latex math="\text{Var}(\bar{H} - \beta\bar{C}) = \frac{1}{n}\left(\sigma_H^2 - 2\beta\sigma_{HC} + \beta^2\sigma_C^2\right)" />
                </div>
                <p className="text-sm text-blue-700 mt-2">
                  Quadratic in <Latex math="\beta" /> â€” the <Latex math="1/n" /> doesn't affect the minimum!
                </p>
              </div>
    
              {/* Calculus */}
              <div className="bg-gradient-to-br from-purple-50 to-indigo-100 rounded-xl p-3 border border-purple-200">
                <h3 className="text-base font-bold text-purple-800 mb-2">Step 2: Differentiate and Solve</h3>
                <div className="bg-white rounded-lg p-2 border border-purple-200 text-sm">
                  <Latex math="\frac{d}{d\beta}: \frac{1}{n}\left(-2\sigma_{HC} + 2\beta\sigma_C^2\right) = 0" />
                </div>
                <div className="mt-2 bg-purple-100 rounded-lg p-2 border border-purple-300 text-center">
                  <Latex math="\beta^* = \frac{\sigma_{HC}}{\sigma_C^2} = \frac{\text{Cov}(H, C)}{\text{Var}(C)}" display={true} />
                </div>
                <p className="text-sm text-purple-700 mt-1">
                  The <Latex math="1/n" /> cancels â€” <Latex math="\beta^*" /> is the regression slope of H on C!
                </p>
              </div>
    
              {/* Optimal variance */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-3 border border-green-200 flex-grow">
                <h3 className="text-base font-bold text-green-800 mb-2">Step 3: Substitute Back</h3>
                <div className="bg-white rounded-lg p-2 border border-green-200 text-xs space-y-1">
                  <div><Latex math="\text{Var}^* = \frac{1}{n}\left(\sigma_H^2 - 2\frac{\sigma_{HC}}{\sigma_C^2}\sigma_{HC} + \frac{\sigma_{HC}^2}{\sigma_C^4}\sigma_C^2\right)" /></div>
                  <div><Latex math="= \frac{1}{n}\left(\sigma_H^2 - \frac{\sigma_{HC}^2}{\sigma_C^2}\right) = \frac{\sigma_H^2}{n}\left(1 - \rho_{HC}^2\right)" /></div>
                </div>
                <div className="mt-2 bg-green-200 rounded-lg p-2">
                  <div className="text-center">
                    <Latex math="\text{Var}(\hat{I}_{\text{CV}}^*) = \text{Var}(\bar{H})(1 - \rho_{HC}^2)" />
                  </div>
                  <div className="text-center mt-1 text-green-800 font-semibold">
                    <Latex math="\text{VRF} = \frac{\text{Var}(\hat{I}_{\text{MC}})}{\text{Var}(\hat{I}_{\text{CV}}^*)} = \frac{1}{1 - \rho_{HC}^2}" />
                  </div>
                </div>
                <p className="text-xs text-green-700 mt-1 text-center">
                  <Latex math="\hat{I}_{\text{MC}} = \bar{H}" /> (naive MC), <Latex math="\rho_{HC} = \text{Corr}(H, C)" />
                </p>
              </div>
            </div>
    
            {/* Right: VRF table and interpretation */}
            <div className="flex flex-col gap-3">
              {/* VRF table */}
              <div className="bg-white rounded-xl border-2 border-gray-300 p-3 flex-grow">
                <h3 className="text-base font-bold text-gray-800 mb-2">VRF as Function of <Latex math="|\rho_{HC}|"/></h3>
                <table className="w-full">
                  <thead>
                    <tr className="border-b-2 border-gray-300 text-sm">
                      <th className="text-left py-2"><Latex math="|\rho_{HC}|"/></th>
                      <th className="text-right py-2"><Latex math="1 - \rho_{HC}^2" /></th>
                      <th className="text-right py-2">VRF</th>
                      <th className="text-right py-2">Quality</th>
                    </tr>
                  </thead>
                  <tbody className="text-sm">
                    <tr className="border-b border-gray-200">
                      <td className="py-1.5 font-mono">0.0</td>
                      <td className="text-right font-mono">1.000</td>
                      <td className="text-right font-mono">1.0</td>
                      <td className="text-right text-gray-500">None</td>
                    </tr>
                    <tr className="border-b border-gray-200">
                      <td className="py-1.5 font-mono">0.5</td>
                      <td className="text-right font-mono">0.750</td>
                      <td className="text-right font-mono">1.3</td>
                      <td className="text-right text-gray-500">Marginal</td>
                    </tr>
                    <tr className="border-b border-gray-200 bg-yellow-50">
                      <td className="py-1.5 font-mono">0.7</td>
                      <td className="text-right font-mono">0.510</td>
                      <td className="text-right font-mono text-amber-700 font-semibold">2.0</td>
                      <td className="text-right text-amber-700">Moderate</td>
                    </tr>
                    <tr className="border-b border-gray-200 bg-green-50">
                      <td className="py-1.5 font-mono">0.9</td>
                      <td className="text-right font-mono">0.190</td>
                      <td className="text-right font-mono text-green-700 font-bold">5.3</td>
                      <td className="text-right text-green-700">Good</td>
                    </tr>
                    <tr className="border-b border-gray-200 bg-green-100">
                      <td className="py-1.5 font-mono">0.95</td>
                      <td className="text-right font-mono">0.098</td>
                      <td className="text-right font-mono text-green-800 font-bold">10.3</td>
                      <td className="text-right text-green-800">Excellent</td>
                    </tr>
                    <tr className="bg-green-200">
                      <td className="py-1.5 font-mono">0.99</td>
                      <td className="text-right font-mono">0.020</td>
                      <td className="text-right font-mono text-green-900 font-bold">50.3</td>
                      <td className="text-right text-green-900">Superb</td>
                    </tr>
                  </tbody>
                </table>
              </div>
    
              {/* Key insight */}
              <div className="bg-gradient-to-br from-amber-50 to-yellow-100 rounded-xl p-3 border border-amber-200">
                <h3 className="text-base font-bold text-amber-800 mb-1">Key Insight</h3>
                <p className="text-sm text-gray-700">
                  Gains increase <strong>superlinearly</strong> with <Latex math="|\rho_{HC}|"/>. Need <Latex math="|\rho_{HC}|"/> {">"} 0.7 for VRF {">"} 2.
                </p>
              </div>
            </div>
          </div>
    
          {/* Bottom: Practical note */}
          <div className="bg-gray-800 text-white rounded-xl p-3 mt-3">
            <div className="text-sm">
              <span className="font-bold text-amber-400">In Practice:</span>
              <span className="ml-2">Estimate <Latex math="\hat{\beta} = \widehat{\text{Cov}}(H,C)/\widehat{\text{Var}}(C)" /> from sample.</span>
              <span className="text-gray-400 ml-2">
                Using <Latex math="\hat{\beta}" /> makes <Latex math="\hat{I}_{\text{CV}}" /> biased: <Latex math="\hat{\beta}" /> and <Latex math="\bar{C}" /> are correlated (same sample), so <Latex math="\mathbb{E}[\hat{\beta}(\bar{C} - \mathbb{E}[C])] \neq 0" />. Bias is <Latex math="O(1/n)" />.
              </span>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                          SLIDE 74: CV EXAMPLE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide74_CVExample() {
  return (
    <div className="p-5 flex flex-col h-full">
          <h1 className="text-3xl font-bold text-gray-900 mb-1">CV Worked Example: Capped Claims</h1>
          <p className="text-lg text-gray-600 mb-2"><Latex math="X \sim \text{Exp}(1)" />, estimate <Latex math="I = \mathbb{E}[\min(X, 3)]" /></p>
    
          <div className="grid grid-cols-2 gap-4 flex-grow">
            {/* Left: Analytical derivations */}
            <div className="flex flex-col gap-2">
              {/* Known quantities */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-3 border border-blue-200">
                <h3 className="text-base font-bold text-blue-800 mb-1">Setup</h3>
                <div className="grid grid-cols-2 gap-2 text-sm">
                  <div className="bg-white rounded p-2 border border-blue-200">
                    <div className="text-xs text-gray-500">Interest</div>
                    <Latex math="H = \min(X, 3)" />
                  </div>
                  <div className="bg-white rounded p-2 border border-blue-200">
                    <div className="text-xs text-gray-500">Control</div>
                    <Latex math="C = X" />
                  </div>
                </div>
                <p className="text-sm mt-2"><Latex math="\mathbb{E}[X] = 1" />, <Latex math="\text{Var}(X) = 1" /> (known)</p>
              </div>
    
              {/* Analytical derivation */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-3 border border-green-200">
                <h3 className="text-base font-bold text-green-800 mb-1">Analytical Results</h3>
                <div className="bg-white rounded p-2 border border-green-200 text-sm space-y-1">
                  <div className="flex justify-between">
                    <span><Latex math="\mathbb{E}[H] = 1 - e^{-3}" /></span>
                    <span className="font-mono text-green-700">â‰ˆ 0.9502</span>
                  </div>
                  <div className="flex justify-between">
                    <span><Latex math="\text{Cov}(H, X) = 1 - 4e^{-3}" /></span>
                    <span className="font-mono">â‰ˆ 0.801</span>
                  </div>
                  <div className="flex justify-between">
                    <span><Latex math="\text{Var}(H)" /></span>
                    <span className="font-mono">â‰ˆ 0.699</span>
                  </div>
                </div>
              </div>
    
              {/* Beta and rho */}
              <div className="bg-gradient-to-br from-purple-50 to-indigo-100 rounded-xl p-3 border border-purple-200 flex-grow">
                <h3 className="text-base font-bold text-purple-800 mb-1">Optimal CV Parameters</h3>
                <div className="bg-white rounded p-2 border border-purple-200 text-sm space-y-2">
                  <div className="flex justify-between items-center">
                    <span><Latex math="\beta^* = \frac{\text{Cov}(H,X)}{\text{Var}(X)}" /></span>
                    <span className="font-mono font-bold text-purple-700">= 0.801</span>
                  </div>
                  <div className="flex justify-between items-center">
                    <span><Latex math="\rho_{HC} = \frac{\text{Cov}(H,X)}{\sigma_H \sigma_X}" /></span>
                    <span className="font-mono font-bold text-purple-700">â‰ˆ 0.958</span>
                  </div>
                  <div className="flex justify-between items-center bg-purple-100 rounded p-1">
                    <span><Latex math="\text{VRF} = \frac{1}{1 - \rho_{HC}^2}" /></span>
                    <span className="font-mono font-bold text-purple-800">â‰ˆ 12.2</span>
                  </div>
                </div>
              </div>
            </div>
    
            {/* Right: Simulation verification */}
            <div className="flex flex-col gap-2">
              {/* Results table */}
              <div className="bg-white rounded-xl border-2 border-gray-300 p-3 flex-grow">
                <h3 className="text-base font-bold text-gray-800 mb-2">Simulation (n = 10,000)</h3>
                <table className="w-full text-sm">
                  <thead>
                    <tr className="border-b-2 border-gray-300">
                      <th className="text-left py-1">Method</th>
                      <th className="text-right py-1">Estimate</th>
                      <th className="text-right py-1">SE</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr className="border-b border-gray-200">
                      <td className="py-2">Naive MC</td>
                      <td className="text-right font-mono">0.9498</td>
                      <td className="text-right font-mono text-red-600">0.0084</td>
                    </tr>
                    <tr className="bg-green-50">
                      <td className="py-2 text-green-800 font-semibold">CV Estimator</td>
                      <td className="text-right font-mono">0.9503</td>
                      <td className="text-right font-mono text-green-700 font-bold">0.0024</td>
                    </tr>
                    <tr className="border-t-2 border-gray-300 bg-gray-50">
                      <td className="py-2 text-gray-600">True value</td>
                      <td className="text-right font-mono text-gray-600">0.9502</td>
                      <td className="text-right text-gray-400">â€”</td>
                    </tr>
                  </tbody>
                </table>
    
                <div className="mt-3 bg-gray-100 rounded-lg p-3">
                  <h4 className="text-sm font-bold text-gray-800 mb-2">Verification</h4>
                  <div className="grid grid-cols-2 gap-3 text-sm">
                    <div className="text-center">
                      <div className="text-xs text-gray-500">Observed VRF</div>
                      <div className="font-bold text-lg text-green-700">
                        <Latex math="\left(\frac{0.0084}{0.0024}\right)^2 \approx 12.3" />
                      </div>
                    </div>
                    <div className="text-center">
                      <div className="text-xs text-gray-500">Theory</div>
                      <div className="font-bold text-lg text-purple-700">
                        <Latex math="\frac{1}{1-0.958^2} \approx 12.2" />
                      </div>
                    </div>
                  </div>
                  <p className="text-xs text-green-700 text-center mt-2">âœ“ Theory matches simulation!</p>
                </div>
              </div>
    
              {/* Interpretation */}
              <div className="bg-gradient-to-br from-amber-50 to-yellow-100 rounded-xl p-3 border border-amber-200">
                <h3 className="text-base font-bold text-amber-800 mb-1">What We Verified</h3>
                <p className="text-sm text-gray-700">
                  VRF â‰ˆ 12 means same precision as <strong>120,000 naive samples</strong> with 10,000.
                </p>
              </div>
            </div>
          </div>
    
          {/* Bottom */}
          <div className="bg-gray-800 text-white rounded-xl p-3 mt-2">
            <div className="text-sm">
              <span className="font-bold text-amber-400">In practice:</span>
              <span className="ml-2">Real distributions may not have closed forms â€” estimate <Latex math="\hat{\beta}" /> and <Latex math="\hat{\rho}_{HC}" /> from the sample. This example shows the theory works when we can check it.</span>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                      SLIDE 75: ANTITHETIC VARIATES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide75_AntitheticVariates() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-2xl font-bold text-gray-900 mb-1">Antithetic Variates</h1>
          <p className="text-gray-600 mb-2">Induce negative correlation for cancellation</p>
    
          <div className="grid grid-cols-2 gap-3 flex-grow">
            {/* Left: Concept and Math */}
            <div className="flex flex-col gap-2">
              {/* The idea */}
              <div className="bg-gradient-to-br from-pink-50 to-purple-100 rounded-xl p-3 border border-pink-200">
                <h3 className="text-sm font-bold text-pink-800 mb-2">The Idea</h3>
                <p className="text-xs text-gray-700 mb-2">
                  For each uniform <Latex math="U" />, also use its "mirror" <Latex math="1 - U" />:
                </p>
                <div className="bg-white rounded-lg p-2 border border-pink-200 text-center">
                  <div className="flex items-center justify-center gap-4">
                    <div>
                      <div className="font-mono text-lg">U</div>
                      <div className="text-xs text-gray-500"><Latex math="Y = h(F^{-1}(U))" /></div>
                    </div>
                    <div className="text-pink-600 text-xl">
                      <Latex math="\longleftrightarrow" />
                    </div>
                    <div>
                      <div className="font-mono text-lg">1-U</div>
                      <div className="text-xs text-gray-500"><Latex math="Y' = h(F^{-1}(1-U))" /></div>
                    </div>
                  </div>
                </div>
                <p className="text-xs text-pink-700 mt-2 text-center">
                  U and 1-U perfectly negatively correlated
                </p>
              </div>
    
              {/* Variance derivation */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-3 border border-blue-200 flex-grow">
                <h3 className="text-sm font-bold text-blue-800 mb-2">Variance of Pair Average</h3>
                <p className="text-xs text-gray-700 mb-2">For <Latex math="Z = (Y + Y')/2" />:</p>
                <div className="bg-white rounded-lg p-2 border border-blue-200 text-sm space-y-1">
                  <div><Latex math="\text{Var}(Z) = \frac{1}{4}\left[\text{Var}(Y) + \text{Var}(Y') + 2\text{Cov}(Y, Y')\right]" /></div>
                  <div className="pl-6"><Latex math="= \frac{\sigma^2}{2}\left[1 + \rho(Y, Y')\right]" /></div>
                </div>
                <div className="mt-2 grid grid-cols-2 gap-2 text-xs">
                  <div className="bg-red-100 rounded p-1.5 text-center">
                    <div className="text-red-800 font-semibold"><Latex math="\rho > 0" /></div>
                    <div className="text-red-700">Worse than i.i.d.!</div>
                  </div>
                  <div className="bg-green-100 rounded p-1.5 text-center">
                    <div className="text-green-800 font-semibold"><Latex math="\rho < 0" /></div>
                    <div className="text-green-700">Variance reduced!</div>
                  </div>
                </div>
                <div className="mt-2 bg-blue-100 rounded-lg p-2 text-center">
                  <span className="text-blue-800 text-xs">Max VRF = 2 when <Latex math="\rho = -1" /></span>
                </div>
              </div>
            </div>
    
            {/* Right: Figure and conditions */}
            <div className="flex flex-col gap-2">
              {/* Figure */}
              <div className="bg-white rounded-xl border border-gray-300 overflow-hidden flex-grow">
                <img 
                  src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_6_fig05_antithetic_variates.png"
                  alt="Antithetic variates showing paired samples U and 1-U"
                  className="w-full h-full object-contain"
                />
              </div>
    
              {/* When it works */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-3 border border-green-200">
                <h3 className="text-sm font-bold text-green-800 mb-1">When It Works</h3>
                <div className="bg-white rounded p-2 border border-green-200 text-center text-sm">
                  <Latex math="h(F^{-1}(u)) \text{ monotone in } u" />
                </div>
                <p className="text-xs text-green-700 mt-1">
                  Examples: <Latex math="e^X" />, <Latex math="X^2" />, CDFs, option payoffs
                </p>
              </div>
    
              {/* When it fails */}
              <div className="bg-gradient-to-br from-red-50 to-orange-100 rounded-xl p-3 border border-red-200">
                <h3 className="text-sm font-bold text-red-800 mb-1">When It Fails</h3>
                <ul className="text-xs text-red-700 space-y-0.5">
                  <li>Non-monotonic: <Latex math="\sin(2\pi X)" />, quadratics centered away from 0</li>
                  <li>High-d: Need synchronized antithetics per dimension</li>
                  <li>Discrete distributions</li>
                </ul>
              </div>
            </div>
          </div>
    
          {/* Bottom: Practical summary */}
          <div className="bg-gray-800 text-white rounded-xl p-3 mt-2">
            <div className="grid grid-cols-4 gap-3 text-xs">
              <div className="bg-white/10 rounded p-2 text-center">
                <div className="text-gray-400">Cost</div>
                <div className="font-bold text-green-400">Cost-neutral</div>
                <div className="text-gray-500">Same # of h(x) calls</div>
              </div>
              <div className="bg-white/10 rounded p-2 text-center">
                <div className="text-gray-400">Max VRF</div>
                <div className="font-bold text-lg">2</div>
              </div>
              <div className="bg-white/10 rounded p-2 text-center">
                <div className="text-gray-400">Typical VRF</div>
                <div className="font-bold">1.2 - 1.5</div>
              </div>
              <div className="bg-white/10 rounded p-2 text-center">
                <div className="text-gray-400">Best for</div>
                <div className="font-bold">Low-d, monotone</div>
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                      SLIDE 76: STRATIFIED SAMPLING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide76_StratifiedSampling() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-2xl font-bold text-gray-900">Stratified Sampling</h1>
          <p className="text-base text-gray-600 mb-2">Law of total expectation + deterministic allocation</p>
    
          {/* Top: Figure spanning full width */}
          <div className="bg-white rounded-xl border border-gray-300 overflow-hidden p-1 mb-2 h-104">
            <img 
              src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_6_fig06_stratified_sampling.png"
              alt="Stratified sampling: (a) heterogeneous integrand with high/low variance regions, (b) random vs stratified sample placement, (c) ANOVA decomposition showing 34% between-strata variance eliminated"
              className="w-full h-full object-contain"
            />
          </div>
    
          {/* Middle: Three content boxes */}
          <div className="grid grid-cols-3 gap-2 flex-grow">
            {/* The estimator */}
            <div className="bg-gradient-to-br from-amber-50 to-yellow-100 rounded-xl p-2 border border-amber-200">
              <h3 className="text-sm font-bold text-amber-800 mb-1">Law of Total Expectation</h3>
              <div className="bg-white rounded-lg p-1.5 border border-amber-200 text-center text-sm">
                <Latex math="I = \sum_{k=1}^K p_k \mu_k" display={true} />
              </div>
              <div className="mt-1.5 bg-amber-100 rounded p-1.5 text-center text-sm">
                <Latex math="\hat{I}_{\text{strat}} = \sum_{k=1}^K p_k \hat{I}_k" display={true} />
              </div>
            </div>
    
            {/* Variance decomposition */}
            <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-2 border border-blue-200">
              <h3 className="text-sm font-bold text-blue-800 mb-1">Law of Total Variance</h3>
              <div className="bg-white rounded-lg p-1.5 border border-blue-200 text-sm">
                <Latex math="\sigma^2 = \underbrace{\sum_k p_k \sigma_k^2}_{\text{within}} + \underbrace{\sum_k p_k (\mu_k - I)^2}_{\text{between}}" display={true} />
              </div>
              <div className="mt-1.5 bg-green-100 rounded p-1.5 text-xs text-green-800 text-center">
                Fixing <Latex math="n_k" /> eliminates "between"!
              </div>
            </div>
    
            {/* Neyman allocation */}
            <div className="bg-gradient-to-br from-purple-50 to-indigo-100 rounded-xl p-2 border border-purple-200">
              <h3 className="text-sm font-bold text-purple-800 mb-1">Neyman Allocation</h3>
              <div className="bg-white rounded-lg p-1.5 border border-purple-300 text-center">
                <Latex math="n_k^* \propto p_k \sigma_k" display={true} />
              </div>
              <p className="text-xs text-purple-700 mt-1.5">
                Shift samples toward high-<Latex math="\sigma_k" /> strata
              </p>
            </div>
          </div>
    
          {/* Bottom bar */}
          <div className="bg-gray-800 text-white rounded-xl p-2 mt-2">
            <div className="grid grid-cols-4 gap-3 text-sm">
              <div className="text-center">
                <span className="text-gray-400"><Latex math="p_k" />:</span> <Latex math="P(X \in S_k)" />
              </div>
              <div className="text-center">
                <span className="text-gray-400"><Latex math="\mu_k" />:</span> <Latex math="\mathbb{E}[h(X) \mid X \in S_k]" />
              </div>
              <div className="text-center">
                <span className="text-gray-400">Neyman:</span> <Latex math="n_k^* \propto p_k \sigma_k" />
              </div>
              <div className="text-center">
                <span className="text-amber-400">Limit:</span> <Latex math="K^d" /> strata in d-dim
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                        SLIDE 77: LATIN HYPERCUBE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide77_LatinHypercube() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-2xl font-bold text-gray-900">Latin Hypercube Sampling</h1>
          <p className="text-base text-gray-600 mb-2">Stratified margins for high-dimensional problems</p>
    
          <div className="grid grid-cols-5 gap-3 flex-grow">
            {/* Left: Concept - 2 columns */}
            <div className="col-span-2 flex flex-col gap-2">
              {/* The problem */}
              <div className="bg-gradient-to-br from-red-50 to-orange-100 rounded-xl p-2 border border-red-200">
                <h3 className="text-base font-bold text-red-800 mb-1">The High-d Problem</h3>
                <div className="bg-white rounded p-2 border border-red-200 text-sm text-center">
                  Full stratification: <Latex math="K^d" /> strata<br/>
                  <span className="text-red-700">K=10, d=10:</span> <Latex math="10^{10}" /> samples needed!
                </div>
              </div>
    
              {/* LHS algorithm */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-3 border border-green-200 flex-grow">
                <h3 className="text-base font-bold text-green-800 mb-2">LHS Construction (K intervals/dim)</h3>
                <div className="space-y-2 text-sm">
                  <div className="flex items-start gap-2">
                    <span className="bg-green-200 text-green-800 rounded-full w-5 h-5 flex items-center justify-center font-bold flex-shrink-0 text-xs">1</span>
                    <p className="text-gray-700">Divide each dim into K intervals; sample once per interval</p>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="bg-green-200 text-green-800 rounded-full w-5 h-5 flex items-center justify-center font-bold flex-shrink-0 text-xs">2</span>
                    <p className="text-gray-700">Generate d random permutations <Latex math="\pi_1, \ldots, \pi_d" /> of <Latex math="\{1,\ldots,K\}" /></p>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="bg-green-200 text-green-800 rounded-full w-5 h-5 flex items-center justify-center font-bold flex-shrink-0 text-xs">3</span>
                    <p className="text-gray-700">Sample i: <Latex math="(x_1^{(\pi_1(i))}, x_2^{(\pi_2(i))}, \ldots, x_d^{(\pi_d(i))})" /></p>
                  </div>
                </div>
                <div className="mt-2 bg-white rounded-lg p-2 border border-green-200">
                  <p className="text-sm text-green-800 text-center">
                    <strong>Result:</strong> K samples with perfect marginal stratification
                  </p>
                </div>
              </div>
    
              {/* Properties - now clearer */}
              <div className="bg-gradient-to-br from-purple-50 to-indigo-100 rounded-xl p-2 border border-purple-200">
                <h3 className="text-base font-bold text-purple-800 mb-1">Variance Reduction</h3>
                <ul className="text-sm text-purple-700 space-y-1">
                  <li><strong>Additive</strong> <Latex math="h = \sum_j g_j(x_j)" />: eliminates all between-interval variance</li>
                  <li><strong>Monotone</strong>: <Latex math="\text{Var}_{\text{LHS}} \leq \text{Var}_{\text{MC}}" /> (never hurts)</li>
                  <li><strong>General</strong>: no guarantee; can hurt if strong interactions</li>
                </ul>
              </div>
            </div>
    
            {/* Right: Figure - 3 columns */}
            <div className="col-span-3 flex flex-col">
              <div className="bg-white rounded-xl border border-gray-300 overflow-hidden flex-grow p-1">
                <img 
                  src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_6_fig07_lhs_construction.png"
                  alt="LHS construction: (a) stratify each margin, (b) random pairing via permutation, (c) Latin square result"
                  className="w-full h-full object-contain"
                />
              </div>
            </div>
          </div>
    
          {/* Bottom: Key insight */}
          <div className="bg-gray-800 text-white rounded-xl p-2 mt-2">
            <div className="grid grid-cols-4 gap-3 text-sm">
              <div className="text-center">
                <span className="text-gray-400">Samples:</span> <span className="text-green-400 font-bold">K</span> <span className="text-gray-400">not</span> <span className="text-red-400"><Latex math="K^d" /></span>
              </div>
              <div className="text-center">
                <span className="text-gray-400">Cost:</span> <Latex math="O(Kd)" /> â€” linear in d
              </div>
              <div className="text-center">
                <span className="text-gray-400">Best for:</span> <span className="text-green-400">d {">"} 3</span>
              </div>
              <div className="text-center font-mono text-xs">
                scipy.stats.qmc.LatinHypercube
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                         SLIDE 78: CRN COMBINING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide78_CRNCombining() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-2xl font-bold text-gray-900">Common Random Numbers & Combining Methods</h1>
          <p className="text-base text-gray-600 mb-2">Synchronized comparisons and multiplicative gains</p>
    
          <div className="grid grid-cols-2 gap-3 flex-grow">
            {/* Left: CRN */}
            <div className="flex flex-col gap-2">
              {/* Problem setup */}
              <div className="bg-gradient-to-br from-red-50 to-orange-100 rounded-xl p-2 border border-red-200">
                <h3 className="text-sm font-bold text-red-800 mb-1">The Comparison Problem</h3>
                <p className="text-sm text-gray-700">
                  Want <Latex math="\Delta = \mathbb{E}[h_A] - \mathbb{E}[h_B]" />. Independent runs:
                </p>
                <div className="bg-white rounded p-1.5 border border-red-200 text-center text-sm mt-1">
                  <Latex math="\text{Var}(\hat{I}_A - \hat{I}_B) = \text{Var}(\hat{I}_A) + \text{Var}(\hat{I}_B)" />
                </div>
              </div>
    
              {/* CRN solution */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-2 border border-green-200">
                <h3 className="text-sm font-bold text-green-800 mb-1">CRN Solution: Same Random Inputs</h3>
                <div className="bg-white rounded-lg p-1.5 border border-green-200 text-center text-sm">
                  <Latex math="\text{Var}(\hat{I}_A - \hat{I}_B) = \text{Var}(\hat{I}_A) + \text{Var}(\hat{I}_B) - 2\text{Cov}(\hat{I}_A, \hat{I}_B)" />
                </div>
                <p className="text-sm text-green-700 mt-1">
                  Same U <Latex math="\Rightarrow" /> Cov large, positive <Latex math="\Rightarrow" /> <strong>difference variance small!</strong>
                </p>
              </div>
    
              {/* CRN figure */}
              <div className="bg-white rounded-xl border border-gray-300 overflow-hidden flex-grow p-1">
                <img 
                  src="https://pqyjaywwccbnqpwgeiuv.supabase.co/storage/v1/object/public/STAT%20418%20Images/assets/PartII/Chapter2/ch2_6_fig08_common_random_numbers.png"
                  alt="Common Random Numbers showing paired comparison with shared randomness"
                  className="w-full h-full object-contain"
                />
              </div>
    
              {/* CRN warning */}
              <div className="bg-gradient-to-br from-amber-50 to-yellow-100 rounded-xl p-2 border border-amber-200">
                <p className="text-sm text-amber-800">
                  <strong>Critical:</strong> Use <strong>paired-t</strong> on <Latex math="D_i = h_A(X_i) - h_B(X_i)" />, not two-sample t!
                </p>
              </div>
            </div>
    
            {/* Right: Combining */}
            <div className="flex flex-col gap-2">
              {/* Multiplicative gains */}
              <div className="bg-gradient-to-br from-purple-50 to-indigo-100 rounded-xl p-2 border border-purple-200">
                <h3 className="text-sm font-bold text-purple-800 mb-1">Combining: Often Multiplicative</h3>
                <p className="text-sm text-gray-700 mb-1">
                  Methods attack different variance sources:
                </p>
                <div className="bg-white rounded-lg p-1.5 border border-purple-200 text-center text-sm">
                  <Latex math="\text{VRF}_{\text{total}} \approx \text{VRF}_1 \times \text{VRF}_2" />
                </div>
                <p className="text-xs text-purple-600 mt-1 italic">
                  IS(5x) + CV(4x) might give 15-20x combined
                </p>
              </div>
    
              {/* Combination matrix */}
              <div className="bg-white rounded-xl border-2 border-gray-300 p-2 flex-grow">
                <h3 className="text-sm font-bold text-gray-800 mb-1">What Combines Well?</h3>
                <table className="w-full text-sm">
                  <thead>
                    <tr className="border-b border-gray-300">
                      <th className="text-left py-0.5">Combination</th>
                      <th className="text-center py-0.5">?</th>
                      <th className="text-left py-0.5">Why</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr className="border-b border-gray-200">
                      <td className="py-0.5">IS + CV</td>
                      <td className="text-center text-green-600 font-bold">Yes</td>
                      <td className="text-gray-600 text-xs">Different mechanisms</td>
                    </tr>
                    <tr className="border-b border-gray-200">
                      <td className="py-0.5">Strat + CV</td>
                      <td className="text-center text-green-600 font-bold">Yes</td>
                      <td className="text-gray-600 text-xs">Orthogonal sources</td>
                    </tr>
                    <tr className="border-b border-gray-200">
                      <td className="py-0.5">Strat + Antith</td>
                      <td className="text-center text-green-600 font-bold">Yes</td>
                      <td className="text-gray-600 text-xs">Complementary</td>
                    </tr>
                    <tr className="border-b border-gray-200">
                      <td className="py-0.5">IS + Antith</td>
                      <td className="text-center text-yellow-600 font-bold">~</td>
                      <td className="text-gray-600 text-xs">Can interfere</td>
                    </tr>
                    <tr>
                      <td className="py-0.5">CRN + Any</td>
                      <td className="text-center text-green-600 font-bold">Yes</td>
                      <td className="text-gray-600 text-xs">For comparisons</td>
                    </tr>
                  </tbody>
                </table>
              </div>
    
              {/* Decision framework */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-2 border border-blue-200">
                <h3 className="text-sm font-bold text-blue-800 mb-1">Method Selection</h3>
                <div className="text-sm text-blue-700 space-y-0.5">
                  <p><strong>Comparing A vs B?</strong> CRN (always)</p>
                  <p><strong>Rare event?</strong> IS first</p>
                  <p><strong>Auxiliaries available?</strong> Add CV</p>
                  <p><strong>Symmetric/monotone?</strong> Antithetics (free!)</p>
                </div>
              </div>
            </div>
          </div>
    
          {/* Bottom: Key insight */}
          <div className="bg-gray-800 text-white rounded-xl p-2 mt-2">
            <div className="flex items-center justify-between text-sm">
              <div>
                <span className="text-amber-400 font-bold">Always:</span>
                <span className="ml-2">Pilot run (n=100-1000) to estimate actual VRF before committing</span>
              </div>
              <div className="text-gray-400">
                Verify multiplicativity empirically
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                          SLIDE 79: VR SUMMARY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide79_VRSummary() {
  return (
    <div className="p-4 flex flex-col h-full">
          <h1 className="text-2xl font-bold text-gray-900">Section 2.6 Summary</h1>
          <p className="text-base text-gray-600 mb-2">Variance reduction: matching method to problem structure</p>
    
          {/* Decision flowchart */}
          <div className="bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-3 border border-blue-200 mb-2">
            <h3 className="text-sm font-bold text-blue-800 mb-2">Decision Guide: Which Method?</h3>
            
            <svg viewBox="0 -25 800 125" className="w-full h-60">
              {/* Arrow markers */}
              <defs>
                <marker id="arrowG" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
                  <polygon points="0 0, 8 4, 0 8" fill="#16a34a"/>
                </marker>
                <marker id="arrowR" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
                  <polygon points="0 0, 8 4, 0 8" fill="#dc2626"/>
                </marker>
              </defs>
              
              {/* Start */}
              <ellipse cx="45" cy="50" rx="40" ry="18" fill="#3b82f6"/>
              <text x="45" y="54" textAnchor="middle" fill="white" fontSize="10" fontWeight="bold">Problem?</text>
              
              {/* Decision boxes */}
              <rect x="110" y="32" width="90" height="36" rx="5" fill="#fef3c7" stroke="#f59e0b" strokeWidth="2"/>
              <text x="155" y="47" textAnchor="middle" fill="#92400e" fontSize="9" fontWeight="600">Rare event /</text>
              <text x="155" y="59" textAnchor="middle" fill="#92400e" fontSize="9" fontWeight="600">tail prob?</text>
              
              <rect x="230" y="32" width="90" height="36" rx="5" fill="#fef3c7" stroke="#f59e0b" strokeWidth="2"/>
              <text x="275" y="47" textAnchor="middle" fill="#92400e" fontSize="9" fontWeight="600">Correlated</text>
              <text x="275" y="59" textAnchor="middle" fill="#92400e" fontSize="9" fontWeight="600">auxiliary?</text>
              
              <rect x="350" y="32" width="90" height="36" rx="5" fill="#fef3c7" stroke="#f59e0b" strokeWidth="2"/>
              <text x="395" y="47" textAnchor="middle" fill="#92400e" fontSize="9" fontWeight="600">Monotone</text>
              <text x="395" y="59" textAnchor="middle" fill="#92400e" fontSize="9" fontWeight="600">integrand?</text>
              
              <rect x="470" y="32" width="90" height="36" rx="5" fill="#fef3c7" stroke="#f59e0b" strokeWidth="2"/>
              <text x="515" y="47" textAnchor="middle" fill="#92400e" fontSize="9" fontWeight="600">Heterogeneous</text>
              <text x="515" y="59" textAnchor="middle" fill="#92400e" fontSize="9" fontWeight="600">regions?</text>
              
              <rect x="590" y="32" width="90" height="36" rx="5" fill="#fef3c7" stroke="#f59e0b" strokeWidth="2"/>
              <text x="635" y="47" textAnchor="middle" fill="#92400e" fontSize="9" fontWeight="600">Comparing</text>
              <text x="635" y="59" textAnchor="middle" fill="#92400e" fontSize="9" fontWeight="600">systems?</text>
              
              {/* Results (at top) */}
              <rect x="110" y="-15" width="90" height="22" rx="4" fill="#3b82f6"/>
              <text x="155" y="0" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">IS</text>
              
              <rect x="230" y="-15" width="90" height="22" rx="4" fill="#8b5cf6"/>
              <text x="275" y="0" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">CV</text>
              
              <rect x="350" y="-15" width="90" height="22" rx="4" fill="#ec4899"/>
              <text x="395" y="0" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Antithetic</text>
              
              <rect x="470" y="-15" width="90" height="22" rx="4" fill="#f59e0b"/>
              <text x="515" y="0" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Strat / LHS</text>
              
              <rect x="590" y="-15" width="90" height="22" rx="4" fill="#10b981"/>
              <text x="635" y="0" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">CRN</text>
              
              {/* Arrows */}
              <line x1="85" y1="50" x2="105" y2="50" stroke="#6b7280" strokeWidth="2" markerEnd="url(#arrowG)"/>
              
              {/* Yes arrows up */}
              <line x1="155" y1="32" x2="155" y2="8" stroke="#16a34a" strokeWidth="2" markerEnd="url(#arrowG)"/>
              <line x1="275" y1="32" x2="275" y2="8" stroke="#16a34a" strokeWidth="2" markerEnd="url(#arrowG)"/>
              <line x1="395" y1="32" x2="395" y2="8" stroke="#16a34a" strokeWidth="2" markerEnd="url(#arrowG)"/>
              <line x1="515" y1="32" x2="515" y2="8" stroke="#16a34a" strokeWidth="2" markerEnd="url(#arrowG)"/>
              <line x1="635" y1="32" x2="635" y2="8" stroke="#16a34a" strokeWidth="2" markerEnd="url(#arrowG)"/>
              
              {/* No arrows right */}
              <line x1="200" y1="50" x2="225" y2="50" stroke="#dc2626" strokeWidth="2" markerEnd="url(#arrowR)"/>
              <line x1="320" y1="50" x2="345" y2="50" stroke="#dc2626" strokeWidth="2" markerEnd="url(#arrowR)"/>
              <line x1="440" y1="50" x2="465" y2="50" stroke="#dc2626" strokeWidth="2" markerEnd="url(#arrowR)"/>
              <line x1="560" y1="50" x2="585" y2="50" stroke="#dc2626" strokeWidth="2" markerEnd="url(#arrowR)"/>
              
              {/* Final: Naive MC */}
              <line x1="680" y1="50" x2="720" y2="50" stroke="#dc2626" strokeWidth="2" markerEnd="url(#arrowR)"/>
              <rect x="725" y="40" width="65" height="22" rx="4" fill="#6b7280"/>
              <text x="757" y="54" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Naive MC</text>
              
              {/* Bottom note */}
              <text x="400" y="90" textAnchor="middle" fill="#6b7280" fontSize="9" fontStyle="italic">
                Methods combine! IS+CV, Strat+Antithetic, always CRN for comparisons
              </text>
            </svg>
          </div>
    
          {/* Quick reference table - FIXED to show what drives VRF */}
          <div className="bg-white rounded-xl border-2 border-gray-300 overflow-hidden flex-grow">
            <table className="w-full text-lg h-full">
              <caption className="sr-only">Variance reduction methods comparison showing key formulas, VRF dependencies, and failure modes</caption>
              <thead>
                <tr className="bg-gray-800 text-white">
                  <th className="px-2 py-1 text-left">Method</th>
                  <th className="px-2 py-1 text-left">Key Formula</th>
                  <th className="px-2 py-1 text-center">VRF Depends On</th>
                  <th className="px-2 py-1 text-left">Failure Mode</th>
                </tr>
              </thead>
              <tbody className="text-lg">
                <tr className="border-b border-gray-200 bg-blue-50">
                  <td className="px-2 py-1 font-semibold text-blue-800">Importance Sampling</td>
                  <td className="px-2 py-1"><Latex math="w(x) = f(x)/g(x)" /></td>
                  <td className="px-2 py-1 text-center text-blue-700">How well g matches hÂ·f</td>
                  <td className="px-2 py-1 text-red-700">g lighter-tailed than f</td>
                </tr>
                <tr className="border-b border-gray-200 bg-purple-50">
                  <td className="px-2 py-1 font-semibold text-purple-800">Control Variates</td>
                  <td className="px-2 py-1"><Latex math="\text{VRF} = \frac{1}{1-\rho^2}" /></td>
                  <td className="px-2 py-1 text-center text-purple-700"><Latex math="\rho" />: 0.9â†’5Ã—, 0.99â†’50Ã—</td>
                  <td className="px-2 py-1 text-red-700">Low correlation, small n</td>
                </tr>
                <tr className="border-b border-gray-200 bg-pink-50">
                  <td className="px-2 py-1 font-semibold text-pink-800">Antithetic</td>
                  <td className="px-2 py-1"><Latex math="\text{VRF} = \frac{2}{1+\rho}" /></td>
                  <td className="px-2 py-1 text-center text-pink-700">Monotonicity (FREE!)</td>
                  <td className="px-2 py-1 text-red-700">Non-monotone: <Latex math="\rho > 0" /></td>
                </tr>
                <tr className="border-b border-gray-200 bg-amber-50">
                  <td className="px-2 py-1 font-semibold text-amber-800">Stratified / LHS</td>
                  <td className="px-2 py-1"><Latex math="n_k^* \propto p_k \sigma_k" /></td>
                  <td className="px-2 py-1 text-center text-amber-700">Between-strata variance</td>
                  <td className="px-2 py-1 text-red-700">High-d: use LHS not full</td>
                </tr>
                <tr className="bg-emerald-50">
                  <td className="px-2 py-1 font-semibold text-emerald-800">CRN</td>
                  <td className="px-2 py-1"><Latex math="-2\text{Cov}(A,B)" /> term</td>
                  <td className="px-2 py-1 text-center text-emerald-700">Scenario variance (10-100Ã—!)</td>
                  <td className="px-2 py-1 text-red-700">Two-sample (not paired) t</td>
                </tr>
              </tbody>
            </table>
          </div>
    
          {/* Bottom: Key takeaway */}
          <div className="bg-gray-800 text-white rounded-xl p-2 mt-2">
            <div className="flex items-center justify-between text-sm">
              <div>
                <span className="font-bold text-green-400">Philosophy:</span>
                <span className="ml-2">Exploit problem structure to reduce randomness</span>
              </div>
              <div className="text-amber-400 font-semibold">
                Pilot test (n=100-1000) to verify VRF!
              </div>
            </div>
          </div>
        </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                        SLIDE 80: CHAPTER SUMMARY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Slide80_ChapterSummary() {
  return (
    <div className="p-4 flex flex-col h-full bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 text-white">
          {/* Header */}
          <div className="text-center mb-4">
            <div className="text-blue-300 text-lg font-semibold mb-1">Chapter 2 Complete</div>
            <h1 className="text-3xl font-bold mb-2">Monte Carlo Methods</h1>
            <p className="text-blue-200">A complete toolkit for computational statistics</p>
          </div>
    
          {/* Key Takeaways */}
          <div className="grid grid-cols-5 gap-2 mb-4">
            <div className="bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20">
              <div className="text-blue-400 text-xs font-semibold mb-1">01</div>
              <div className="font-bold text-sm mb-1">The Pipeline</div>
              <div className="text-gray-300 text-xs">PRNG to VR, iterative</div>
            </div>
            <div className="bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20">
              <div className="text-purple-400 text-xs font-semibold mb-1">02</div>
              <div className="font-bold text-sm mb-1">Core Insight</div>
              <div className="text-gray-300 text-xs">Integrals = sample averages</div>
            </div>
            <div className="bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20">
              <div className="text-green-400 text-xs font-semibold mb-1">03</div>
              <div className="font-bold text-sm mb-1">The Rate</div>
              <div className="text-gray-300 text-xs"><Latex math="O(n^{-1/2})" /> immutable</div>
            </div>
            <div className="bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20">
              <div className="text-amber-400 text-xs font-semibold mb-1">04</div>
              <div className="font-bold text-sm mb-1">VR Effect</div>
              <div className="text-gray-300 text-xs">Reduces constant, not rate</div>
            </div>
            <div className="bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20">
              <div className="text-pink-400 text-xs font-semibold mb-1">05</div>
              <div className="font-bold text-sm mb-1">Diagnostics</div>
              <div className="text-gray-300 text-xs">SE, CI, ESS â€” always!</div>
            </div>
          </div>
    
          {/* Methods summary */}
          <div className="grid grid-cols-4 gap-2 mb-4 flex-grow">
            <div className="bg-blue-500/20 rounded-xl p-3 border border-blue-400/30">
              <h3 className="font-bold text-sm text-blue-300 mb-2">Variate Generation</h3>
              <ul className="text-xs text-gray-300 space-y-1">
                <li>Inverse CDF</li>
                <li>Box-Muller</li>
                <li>Rejection Sampling</li>
                <li>Alias Method</li>
              </ul>
            </div>
            <div className="bg-purple-500/20 rounded-xl p-3 border border-purple-400/30">
              <h3 className="font-bold text-sm text-purple-300 mb-2">MC Estimation</h3>
              <ul className="text-xs text-gray-300 space-y-1">
                <li>LLN convergence</li>
                <li>CLT uncertainty</li>
                <li>Confidence intervals</li>
                <li>Dimension independence</li>
              </ul>
            </div>
            <div className="bg-green-500/20 rounded-xl p-3 border border-green-400/30">
              <h3 className="font-bold text-sm text-green-300 mb-2">Variance Reduction</h3>
              <ul className="text-xs text-gray-300 space-y-1">
                <li>Importance Sampling</li>
                <li>Control Variates</li>
                <li>Antithetic Variates</li>
                <li>Stratified / LHS</li>
              </ul>
            </div>
            <div className="bg-amber-500/20 rounded-xl p-3 border border-amber-400/30">
              <h3 className="font-bold text-sm text-amber-300 mb-2">Best Practices</h3>
              <ul className="text-xs text-gray-300 space-y-1">
                <li>Explicit seeds</li>
                <li>Numerical stability</li>
                <li>ESS monitoring</li>
                <li>Report SE/CI</li>
              </ul>
            </div>
          </div>
    
          {/* The Canonical Triad */}
          <div className="bg-green-500/20 rounded-xl p-3 border-2 border-green-400/50 mb-3">
            <h3 className="text-sm font-bold text-green-400 mb-2 text-center">The Canonical Triad â€” Always Do All Three</h3>
            <div className="grid grid-cols-3 gap-3 text-xs">
              <div className="text-center">
                <div className="text-green-300 font-bold mb-1">1. Estimator</div>
                <div className="text-white"><Latex math="\hat{I}_n = \frac{1}{n}\sum h(X_i)" /></div>
              </div>
              <div className="text-center">
                <div className="text-green-300 font-bold mb-1">2. MCSE / CI</div>
                <div className="text-white"><Latex math="\hat{I}_n \pm 1.96 \cdot \text{SE}" /></div>
              </div>
              <div className="text-center">
                <div className="text-green-300 font-bold mb-1">3. Diagnostics</div>
                <div className="text-white">ESS, traces, validation</div>
              </div>
            </div>
          </div>
    
          {/* Learning outcomes */}
          <div className="bg-white/5 rounded-xl p-2 border border-white/10 mb-2">
            <div className="flex items-center justify-between text-xs">
              <div className="flex items-start gap-2">
                <span className="text-green-400 font-bold">LO 1</span>
                <span className="text-gray-300">Apply simulation techniques (MC, transformations, rejection)</span>
              </div>
              <div className="flex items-start gap-2">
                <span className="text-green-400 font-bold">LO 4</span>
                <span className="text-gray-300">Construct and analyze models using computational methods</span>
              </div>
            </div>
          </div>
    
          {/* Final quote */}
          <div className="text-center">
            <p className="text-lg italic text-blue-200">
              "Randomness, properly harnessed, becomes a precision instrument."
            </p>
            <div className="mt-2 text-gray-400 text-sm">
              Next: Chapter 3 â€” Parametric Inference
            </div>
          </div>
        </div>
  );
}

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // HELPER FUNCTIONS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const getSectionForSlide = (slideIndex) => {
      const slideId = slideIndex + 1;
      const sortedSections = [...sections].sort((a, b) => b.startSlide - a.startSlide);
      return sortedSections.find(s => slideId >= s.startSlide);
    };

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ACCESSIBLE HELP MODAL
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function HelpModal({ onClose }) {
      const modalRef = useRef(null);
      useFocusTrap(true, modalRef);
      
      useEffect(() => {
        const handleEscape = (e) => {
          if (e.key === 'Escape') onClose();
        };
        window.addEventListener('keydown', handleEscape);
        return () => window.removeEventListener('keydown', handleEscape);
      }, [onClose]);
      
      return (
        <div 
          className="help-overlay" 
          onClick={onClose}
          role="dialog"
          aria-modal="true"
          aria-labelledby="help-title"
        >
          <div 
            ref={modalRef}
            className="help-content" 
            onClick={e => e.stopPropagation()}
            role="document"
          >
            <h2 id="help-title" className="text-2xl font-bold">Keyboard Shortcuts</h2>
            <div className="help-grid" role="list">
              <div role="listitem" className="contents">
                <kbd className="help-key">â†’ / Space / N</kbd>
                <span>Next slide</span>
              </div>
              <div role="listitem" className="contents">
                <kbd className="help-key">â† / Backspace / P</kbd>
                <span>Previous slide</span>
              </div>
              <div role="listitem" className="contents">
                <kbd className="help-key">Home</kbd>
                <span>First slide</span>
              </div>
              <div role="listitem" className="contents">
                <kbd className="help-key">End</kbd>
                <span>Last slide</span>
              </div>
              <div role="listitem" className="contents">
                <kbd className="help-key">O</kbd>
                <span>Overview mode</span>
              </div>
              <div role="listitem" className="contents">
                <kbd className="help-key">F</kbd>
                <span>Fullscreen</span>
              </div>
              <div role="listitem" className="contents">
                <kbd className="help-key">?</kbd>
                <span>Show help</span>
              </div>
              <div role="listitem" className="contents">
                <kbd className="help-key">Esc</kbd>
                <span>Close overlay</span>
              </div>
            </div>
            <button 
              onClick={onClose} 
              className="help-close-btn"
              autoFocus
            >
              Close (Escape)
            </button>
          </div>
        </div>
      );
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ACCESSIBLE OVERVIEW MODE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function OverviewMode({ slides, currentSlide, onSelectSlide, onClose }) {
      const containerRef = useRef(null);
      const currentCardRef = useRef(null);
      
      useEffect(() => {
        currentCardRef.current?.focus();
      }, []);
      
      const handleKeyDown = useCallback((e, index) => {
        const cols = Math.floor(containerRef.current?.clientWidth / 316) || 3;
        let newIndex = index;
        
        switch (e.key) {
          case 'ArrowRight': newIndex = Math.min(index + 1, slides.length - 1); break;
          case 'ArrowLeft': newIndex = Math.max(index - 1, 0); break;
          case 'ArrowDown': newIndex = Math.min(index + cols, slides.length - 1); break;
          case 'ArrowUp': newIndex = Math.max(index - cols, 0); break;
          case 'Enter':
          case ' ':
            e.preventDefault();
            onSelectSlide(index);
            return;
          case 'Escape':
            onClose();
            return;
          default: return;
        }
        
        if (newIndex !== index) {
          e.preventDefault();
          const cards = containerRef.current?.querySelectorAll('[role="gridcell"] button');
          cards?.[newIndex]?.focus();
        }
      }, [slides.length, onSelectSlide, onClose]);
      
      return (
        <div 
          ref={containerRef}
          className="overview-grid"
          role="grid"
          aria-label="Slide overview"
        >
          <div className="overview-header" role="row">
            <h2 id="overview-title" className="text-2xl font-bold">Slide Overview</h2>
            <button 
              onClick={onClose} 
              className="overview-close-btn"
              aria-label="Close overview (Escape)"
            >
              Close (Esc)
            </button>
          </div>
          <div role="row" style={{display: 'contents'}}>
            {slides.map((slide, index) => {
              const SlideComponent = slide.component;
              const isCurrent = index === currentSlide;
              
              return (
                <div key={slide.id} role="gridcell">
                  <button
                    ref={isCurrent ? currentCardRef : null}
                    onClick={() => onSelectSlide(index)}
                    onKeyDown={(e) => handleKeyDown(e, index)}
                    className={`overview-card ${isCurrent ? 'current' : ''}`}
                    aria-label={`Slide ${index + 1}: ${slide.title}${isCurrent ? ' (current)' : ''}`}
                    aria-current={isCurrent ? 'true' : undefined}
                  >
                    <div className="overview-card-content" aria-hidden="true">
                      <SlideComponent />
                    </div>
                    <div className="overview-label">
                      <span className="num" aria-hidden="true">{index + 1}</span>
                      <span>{slide.title}</span>
                    </div>
                  </button>
                </div>
              );
            })}
          </div>
        </div>
      );
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ACCESSIBLE PROGRESS BAR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function ProgressBar({ currentSlide, slides, sections, currentSection, goToSlide, goToSection }) {
      return (
        <nav className="progress-container" aria-label="Slide progress">
          <div className="section-labels" role="tablist" aria-label="Presentation sections">
            {sections.map((section) => {
              const sectionIndex = sections.indexOf(section);
              const nextSection = sections[sectionIndex + 1];
              const sectionEnd = nextSection ? nextSection.startSlide - 1 : slides.length;
              const width = ((sectionEnd - section.startSlide + 1) / slides.length) * 100;
              const isActive = currentSection?.id === section.id;
              const isCompleted = (currentSlide + 1) > sectionEnd;
              
              return (
                <button 
                  key={section.id}
                  role="tab"
                  aria-selected={isActive}
                  className={`section-label ${isActive ? 'active' : isCompleted ? 'completed' : 'future'}`}
                  style={{width: `${width}%`}}
                  onClick={() => goToSection(section.id)}
                  title={`Go to ${section.name}`}
                  aria-label={`${section.name} section${isActive ? ' (current)' : isCompleted ? ' (completed)' : ''}`}
                >
                  <span aria-hidden="true">{section.icon}</span> {section.shortName}
                </button>
              );
            })}
          </div>
          
          <div 
            className="progress-sections" 
            role="progressbar" 
            aria-valuenow={currentSlide + 1}
            aria-valuemin={1}
            aria-valuemax={slides.length}
            aria-label={`Slide ${currentSlide + 1} of ${slides.length}`}
          >
            {sections.map((section) => {
              const sectionIndex = sections.indexOf(section);
              const nextSection = sections[sectionIndex + 1];
              const sectionStart = section.startSlide;
              const sectionEnd = nextSection ? nextSection.startSlide - 1 : slides.length;
              const slidesInSection = sectionEnd - sectionStart + 1;
              const isActiveSection = currentSection?.id === section.id;
              const isPastSection = (currentSlide + 1) > sectionEnd;
              
              const currentSlideId = currentSlide + 1;
              const slidesCompletedInSection = isActiveSection 
                ? Math.max(0, currentSlideId - sectionStart + 1)
                : isPastSection ? slidesInSection : 0;
              const sectionProgress = Math.round((slidesCompletedInSection / slidesInSection) * 100);
              
              return (
                <div 
                  key={section.id}
                  className={`section-group ${isActiveSection ? 'active' : ''}`}
                  style={{flex: slidesInSection}}
                  role="group"
                  aria-label={`${section.name}: ${slidesCompletedInSection} of ${slidesInSection} slides`}
                >
                  {isActiveSection && (
                    <div className="section-progress-text" aria-hidden="true">
                      {slidesCompletedInSection}/{slidesInSection} ({sectionProgress}%)
                    </div>
                  )}
                  
                  {Array.from({length: slidesInSection}, (_, i) => {
                    const slideNum = sectionStart + i;
                    const slideIdx = slideNum - 1;
                    const isCurrentSlide = slideNum === currentSlideId;
                    const isPastSlide = slideNum < currentSlideId;
                    
                    let barClass = 'slide-bar';
                    let status = '';
                    if (isCurrentSlide) {
                      barClass += ' current';
                      status = 'current';
                    } else if (isActiveSection) {
                      barClass += isPastSlide ? ' active-past' : ' active-future';
                      status = isPastSlide ? 'viewed' : 'upcoming in section';
                    } else if (isPastSection) {
                      barClass += ' completed';
                      status = 'completed';
                    } else {
                      barClass += ' future';
                      status = 'upcoming';
                    }
                    
                    const slideTitle = slides[slideIdx]?.title || `Slide ${slideNum}`;
                    
                    return (
                      <button
                        key={slideNum}
                        className={barClass}
                        data-tooltip={`${slideNum}: ${slideTitle}`}
                        onClick={() => goToSlide(slideIdx)}
                        aria-label={`Go to slide ${slideNum}: ${slideTitle} (${status})`}
                        aria-current={isCurrentSlide ? 'step' : undefined}
                        tabIndex={isCurrentSlide ? 0 : -1}
                      >
                        {isCurrentSlide && <div className="current-indicator" aria-hidden="true"></div>}
                      </button>
                    );
                  })}
                </div>
              );
            })}
          </div>
          
          <div className="progress-info">
            <div className="progress-counter" aria-hidden="true">
              Slide {currentSlide + 1} / {slides.length}
            </div>
            <div className="progress-legend" aria-hidden="true">
              <div className="legend-item"><div className="legend-bar completed"></div><span>Done</span></div>
              <div className="legend-item"><div className="legend-bar active"></div><span>Section</span></div>
              <div className="legend-item"><div className="legend-bar current"></div><span>Current</span></div>
              <div className="legend-item"><div className="legend-bar future"></div><span>Upcoming</span></div>
            </div>
          </div>
        </nav>
      );
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // MAIN APP
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function App() {
      const [currentSlide, setCurrentSlide] = useState(0);
      const [overviewMode, setOverviewMode] = useState(false);
      const [showHelp, setShowHelp] = useState(false);
      const [announcement, setAnnouncement] = useState('');
      const mainContentRef = useRef(null);

      const CurrentSlideComponent = slides[currentSlide]?.component;
      const currentSection = getSectionForSlide(currentSlide);

      const announceSlide = useCallback((slideIndex) => {
        const slide = slides[slideIndex];
        const section = getSectionForSlide(slideIndex);
        setAnnouncement(`Slide ${slideIndex + 1} of ${slides.length}: ${slide.title}. Section: ${section?.name || 'Unknown'}`);
      }, []);

      const nextSlide = useCallback(() => {
        if (currentSlide < slides.length - 1) {
          const newSlide = currentSlide + 1;
          setCurrentSlide(newSlide);
          announceSlide(newSlide);
        }
      }, [currentSlide, announceSlide]);

      const prevSlide = useCallback(() => {
        if (currentSlide > 0) {
          const newSlide = currentSlide - 1;
          setCurrentSlide(newSlide);
          announceSlide(newSlide);
        }
      }, [currentSlide, announceSlide]);

      const goToSlide = useCallback((index) => {
        if (index >= 0 && index < slides.length) {
          setCurrentSlide(index);
          setOverviewMode(false);
          announceSlide(index);
          setTimeout(() => mainContentRef.current?.focus(), 100);
        }
      }, [announceSlide]);

      const goToSection = useCallback((sectionId) => {
        const section = sections.find(s => s.id === sectionId);
        if (section) {
          const newSlide = section.startSlide - 1;
          setCurrentSlide(newSlide);
          announceSlide(newSlide);
        }
      }, [announceSlide]);

      useEffect(() => {
        const handleKeyDown = (e) => {
          if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
          
          switch (e.key) {
            case 'ArrowRight': case ' ': case 'n': case 'N':
              if (!overviewMode && !showHelp) { e.preventDefault(); nextSlide(); }
              break;
            case 'ArrowLeft': case 'Backspace': case 'p': case 'P':
              if (!overviewMode && !showHelp) { e.preventDefault(); prevSlide(); }
              break;
            case 'Home': 
              if (!overviewMode && !showHelp) { e.preventDefault(); goToSlide(0); }
              break;
            case 'End': 
              if (!overviewMode && !showHelp) { e.preventDefault(); goToSlide(slides.length - 1); }
              break;
            case 'o': case 'O': 
              if (!showHelp) { e.preventDefault(); setOverviewMode(prev => !prev); }
              break;
            case 'f': case 'F':
              e.preventDefault();
              document.fullscreenElement ? document.exitFullscreen() : document.documentElement.requestFullscreen();
              break;
            case '?': e.preventDefault(); setShowHelp(prev => !prev); break;
            case 'Escape': e.preventDefault(); setOverviewMode(false); setShowHelp(false); break;
          }
        };
        window.addEventListener('keydown', handleKeyDown);
        return () => window.removeEventListener('keydown', handleKeyDown);
      }, [nextSlide, prevSlide, goToSlide, overviewMode, showHelp]);

      if (showHelp) {
        return (
          <>
            <LiveAnnouncer message="Help dialog opened" priority="assertive" />
            <HelpModal onClose={() => setShowHelp(false)} />
          </>
        );
      }

      if (overviewMode) {
        return (
          <>
            <LiveAnnouncer message="Overview mode. Use arrow keys to navigate, Enter to select." priority="assertive" />
            <OverviewMode 
              slides={slides}
              currentSlide={currentSlide}
              onSelectSlide={goToSlide}
              onClose={() => setOverviewMode(false)}
            />
          </>
        );
      }

      return (
        <>
          <a href="#slide-content" className="skip-link">
            Skip to slide content
          </a>
          
          <LiveAnnouncer message={announcement} />
          
          <div className="slide-container">
            <header className="slide-header" role="banner">
              <div className="header-top">
                <div className="header-title">
                  <span className="purdue">PURDUE</span>
                  <span className="course">STAT 418 - Computational Methods</span>
                </div>
                <div className="header-slide-info">
                  {currentSection && (
                    <div className="current-section" aria-label={`Current section: ${currentSection.name}`}>
                      <span className="icon" aria-hidden="true">{currentSection.icon}</span>
                      <span className="name">{currentSection.name}</span>
                    </div>
                  )}
                  <div className="slide-counter" aria-hidden="true">
                    {currentSlide + 1} / {slides.length}
                  </div>
                </div>
              </div>
              
              <ProgressBar 
                currentSlide={currentSlide}
                slides={slides}
                sections={sections}
                currentSection={currentSection}
                goToSlide={goToSlide}
                goToSection={goToSection}
              />
            </header>

            <main 
              id="slide-content"
              ref={mainContentRef}
              className="slide-content"
              role="main"
              aria-label={`Slide ${currentSlide + 1}: ${slides[currentSlide]?.title}`}
              tabIndex={-1}
            >
              <article className="slide-wrapper">
                {CurrentSlideComponent && <CurrentSlideComponent />}
              </article>
            </main>

            <nav className="slide-nav" aria-label="Slide navigation">
              <button 
                onClick={prevSlide} 
                disabled={currentSlide === 0} 
                aria-label="Previous slide (Left Arrow)"
                title="Previous slide"
              >
                <span aria-hidden="true">â—€</span>
              </button>
              <button 
                onClick={nextSlide} 
                disabled={currentSlide === slides.length - 1} 
                aria-label="Next slide (Right Arrow)"
                title="Next slide"
              >
                <span aria-hidden="true">â–¶</span>
              </button>
              <div className="nav-divider" role="separator"></div>
              <button 
                onClick={() => setOverviewMode(true)} 
                aria-label="Open slide overview (O)"
                title="Slide overview"
              >
                <span aria-hidden="true">âŠ</span>
              </button>
              <button 
                onClick={() => setShowHelp(true)} 
                aria-label="Show keyboard shortcuts (?)"
                title="Keyboard shortcuts"
              >
                <span aria-hidden="true">?</span>
              </button>
            </nav>
          </div>
        </>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
