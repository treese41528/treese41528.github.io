/* =======================================================================
   WCAG AA COMPLIANT THEME FOR SPHINX RTD
   Simplified color scheme with guaranteed contrast ratios
   ======================================================================= */

/* -----------------------------------------------------------------------
   1. CSS Variables for consistent theming
   -------------------------------------------------------------------- */
:root {
    /* Light theme colors */
    --text-primary: #1a1a1a;      /* Main text (16.5:1 on white) */
    --text-secondary: #404040;      /* Secondary text (10.3:1 on white) */
    --bg-primary: #ffffff;          /* Main background */
    --bg-secondary: #f8f9fa;        /* Secondary background */
    
    /* Link colors */
    --link-color: #0046a0;          /* Dark blue (8.6:1 on white) */
    --link-hover: #003070;          /* Darker blue (11.7:1 on white) */
    --link-visited: #5a2e91;        /* Purple (7.1:1 on white) */
    
    /* UI colors */
    --border-color: #707070;        /* Borders (4.5:1 on white) */
    --code-bg: #f0f0f0;             /* Code background */
    --code-color: #c7254e;          /* Inline code (4.8:1 on #f0f0f0) */
    
    /* Syntax highlighting */
    --syntax-keyword: #6f42c1;      /* Purple (5.9:1 on white) */
    --syntax-string: #22863a;       /* Green (5.8:1 on white) */
    --syntax-function: #005cc5;     /* Blue (7.5:1 on white) */
    --syntax-comment: #586069;      /* Gray (4.6:1 on white) */
    --syntax-number: #d73a49;       /* Red (4.5:1 on white) */
}

/* -----------------------------------------------------------------------
   2. Base styles and typography
   -------------------------------------------------------------------- */
html {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                 "Helvetica Neue", Arial, sans-serif;
    line-height: 1.6;
    color: var(--text-primary);
    background: var(--bg-primary);
}

body,
.wy-body-for-nav {
    background: var(--bg-primary);
    color: var(--text-primary);
}

/* All headings with strong contrast */
h1, h2, h3, h4, h5, h6,
.rst-content h1,
.rst-content h2,
.rst-content h3,
.rst-content h4,
.rst-content h5,
.rst-content h6 {
    color: var(--text-primary) !important;
    font-weight: 700;
}

/* Paragraphs and lists */
p, li, dd, dt {
    color: var(--text-primary) !important;
}

/* -----------------------------------------------------------------------
   3. Links - Always underlined for accessibility
   -------------------------------------------------------------------- */
a,
a:visited,
.rst-content a,
.rst-content a:visited {
    color: var(--link-color) !important;
    text-decoration: underline !important;
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
}

a:hover,
a:focus,
.rst-content a:hover,
.rst-content a:focus {
    color: var(--link-hover) !important;
    text-decoration-thickness: 2px;
    background-color: rgba(0, 70, 160, 0.1);
    outline: 2px solid var(--link-color);
    outline-offset: 2px;
}

/* Visited links */
a:visited {
    color: var(--link-visited) !important;
}

/* -----------------------------------------------------------------------
   4. Navigation sidebar - Fixed contrast
   -------------------------------------------------------------------- */
.wy-nav-side,
.wy-side-scroll,
.wy-side-nav-search {
    background: #1a1a1a !important;  /* Very dark for high contrast */
}

/* Sidebar links */
.wy-menu-vertical a,
.wy-menu-vertical a:visited,
.wy-menu-vertical li a,
.wy-menu-vertical li a:visited {
    color: #ffffff !important;  /* White text on dark (21:1) */
    text-decoration: none !important;
}

.wy-menu-vertical a:hover,
.wy-menu-vertical a:focus,
.wy-menu-vertical li a:hover,
.wy-menu-vertical li a:focus {
    background: #0046a0 !important;
    color: #ffffff !important;
}

/* Current/active page in sidebar */
.wy-menu-vertical li.current > a,
.wy-menu-vertical li.current > a:hover,
.wy-menu-vertical li.on a,
.wy-menu-vertical li.toctree-l1.current > a,
.wy-menu-vertical li.toctree-l2.current > a {
    background: #ffffff !important;
    color: #1a1a1a !important;  /* Dark text on white background */
    border-left: 4px solid #0046a0;
    font-weight: 600;
}

/* Nested current items */
.wy-menu-vertical li.current li a {
    background: #2a2a2a !important;
    color: #ffffff !important;
}

.wy-menu-vertical li.current li.current > a,
.wy-menu-vertical li.current li.current > a:hover {
    background: #333333 !important;
    color: #ffffff !important;
}

/* Captions in sidebar */
.wy-menu-vertical .caption,
.wy-menu-vertical p.caption {
    color: #ffffff !important;
    text-transform: uppercase;
    font-size: 0.85em;
    font-weight: 600;
    letter-spacing: 1px;
}

/* Toctree expand buttons */
.toctree-expand {
    color: #ffffff !important;
}

/* -----------------------------------------------------------------------
   5. Code blocks and inline code
   -------------------------------------------------------------------- */
/* Inline code */
code, 
.rst-content code,
.rst-content tt,
tt {
    background: var(--code-bg) !important;
    color: var(--code-color) !important;
    padding: 0.1em 0.3em;
    border-radius: 3px;
    font-size: 0.9em;
}

/* Code blocks */
div.highlight pre,
.rst-content pre.literal-block,
.rst-content div[class^="highlight-"] pre,
pre {
    background: #f5f5f5 !important;
    color: var(--text-primary) !important;
    border-left: 4px solid var(--link-color);
    border-radius: 3px;
    padding: 1rem;
    overflow-x: auto;
}

/* Comprehensive Pygments syntax highlighting - All colors tested for WCAG AA on #f5f5f5 background */

/* Comments - Dark gray (5.7:1 contrast) */
.highlight .c,     /* Comment */
.highlight .ch,    /* Comment.Hashbang */
.highlight .cm,    /* Comment.Multiline */
.highlight .cp,    /* Comment.Preproc */
.highlight .cpf,   /* Comment.PreprocFile */
.highlight .c1,    /* Comment.Single */
.highlight .cs     /* Comment.Special */
{ color: #4a4a4a !important; font-style: italic; }

/* Keywords - Dark purple (5.1:1 contrast) */
.highlight .k,     /* Keyword */
.highlight .kc,    /* Keyword.Constant */
.highlight .kd,    /* Keyword.Declaration */
.highlight .kn,    /* Keyword.Namespace */
.highlight .kp,    /* Keyword.Pseudo */
.highlight .kr,    /* Keyword.Reserved */
.highlight .kt     /* Keyword.Type */
{ color: #6f42c1 !important; font-weight: bold; }

/* Strings - Dark green (5.8:1 contrast) */
.highlight .s,     /* String */
.highlight .sa,    /* String.Affix */
.highlight .sb,    /* String.Backtick */
.highlight .sc,    /* String.Char */
.highlight .dl,    /* String.Delimiter */
.highlight .sd,    /* String.Doc */
.highlight .s2,    /* String.Double */
.highlight .se,    /* String.Escape */
.highlight .sh,    /* String.Heredoc */
.highlight .si,    /* String.Interpol */
.highlight .sx,    /* String.Other */
.highlight .sr,    /* String.Regex */
.highlight .s1,    /* String.Single */
.highlight .ss     /* String.Symbol */
{ color: #1e6f3d !important; }

/* Numbers - Dark red (4.5:1 contrast) */
.highlight .m,     /* Number */
.highlight .mb,    /* Number.Bin */
.highlight .mf,    /* Number.Float */
.highlight .mh,    /* Number.Hex */
.highlight .mi,    /* Number.Integer */
.highlight .il,    /* Number.Integer.Long */
.highlight .mo    /* Number.Oct */
{ color: #a52834 !important; }

/* Functions/Names - Dark blue (7.5:1 contrast) */
.highlight .n,     /* Name */
.highlight .na,    /* Name.Attribute */
.highlight .nb,    /* Name.Builtin */
.highlight .nc,    /* Name.Class */
.highlight .no,    /* Name.Constant */
.highlight .nd,    /* Name.Decorator */
.highlight .ni,    /* Name.Entity */
.highlight .ne,    /* Name.Exception */
.highlight .nf,    /* Name.Function */
.highlight .fm,    /* Name.Function.Magic */
.highlight .nl,    /* Name.Label */
.highlight .nn,    /* Name.Namespace */
.highlight .nx,    /* Name.Other */
.highlight .py,    /* Name.Property */
.highlight .nt,    /* Name.Tag */
.highlight .nv,    /* Name.Variable */
.highlight .vc,    /* Name.Variable.Class */
.highlight .vg,    /* Name.Variable.Global */
.highlight .vi,    /* Name.Variable.Instance */
.highlight .vm     /* Name.Variable.Magic */
{ color: #005cc5 !important; }

/* Operators - Dark teal (4.8:1 contrast) */
.highlight .o,     /* Operator */
.highlight .ow     /* Operator.Word */
{ color: #00796b !important; }

/* Other elements */
.highlight .bp     /* Name.Builtin.Pseudo */
{ color: #005cc5 !important; }

.highlight .gd     /* Generic.Deleted */
{ color: #d73a49 !important; background-color: #ffeef0; }

.highlight .gi     /* Generic.Inserted */
{ color: #22863a !important; background-color: #f0fff4; }

.highlight .gr     /* Generic.Error */
{ color: #d73a49 !important; }

.highlight .gu     /* Generic.Subheading */
{ color: #6f42c1 !important; font-weight: bold; }

.highlight .err    /* Error */
{ color: #d73a49 !important; background-color: #ffeef0; }


/* Special handling for line numbers if present */
.highlight .linenos {
    color: #666666 !important;  /* 5.8:1 on #f5f5f5 */
    background: #e8e8e8 !important;
    padding: 0 0.5em;
    margin-right: 0.5em;
}

/* -----------------------------------------------------------------------
   6. Tables - Clear borders and zebra stripes
   -------------------------------------------------------------------- */
table.docutils {
    border: 1px solid var(--border-color) !important;
}

table.docutils th {
    background: #e8e8e8 !important;
    color: var(--text-primary) !important;
    font-weight: 600;
    border: 1px solid var(--border-color) !important;
}

table.docutils td {
    color: var(--text-primary) !important;
    border: 1px solid var(--border-color) !important;
}

table.docutils tbody tr:nth-child(odd) {
    background: rgba(0, 0, 0, 0.05) !important;
}

/* -----------------------------------------------------------------------
   7. Admonitions - High contrast colored boxes
   -------------------------------------------------------------------- */
div.admonition,
div.note,
div.warning,
div.danger,
div.tip,
div.hint,
div.important,
div.caution,
div.error,
div.attention {
    background: var(--bg-secondary) !important;
    border: 1px solid var(--border-color) !important;
    border-left-width: 4px;
    padding: 1rem;
    margin: 1rem 0;
}

/* Admonition titles and content */
div.admonition p.admonition-title,
div.admonition p,
div.admonition li {
    color: var(--text-primary) !important;
}

div.admonition p.admonition-title {
    font-weight: 600;
}

/* Specific admonition colors (border only) */
div.note { border-left-color: #0046a0 !important; }
div.warning, div.caution { border-left-color: #ff6b00 !important; }
div.danger, div.error { border-left-color: #d32f2f !important; }
div.tip, div.hint { border-left-color: #2e7d00 !important; }

/* -----------------------------------------------------------------------
   8. Content area
   -------------------------------------------------------------------- */
.wy-nav-content {
    background: var(--bg-primary) !important;
    max-width: 1400px !important;
    margin: 0 auto !important;
    padding: 2rem 3rem !important;
}

.wy-nav-content-wrap {
    background: var(--bg-secondary) !important;
}

/* -----------------------------------------------------------------------
   9. Forms and buttons
   -------------------------------------------------------------------- */
input,
textarea,
select {
    border: 2px solid var(--border-color) !important;
    color: var(--text-primary) !important;
    background: var(--bg-primary) !important;
}

input:focus,
textarea:focus,
select:focus {
    outline: 2px solid var(--link-color) !important;
    outline-offset: 2px;
    border-color: var(--link-color) !important;
}

.btn,
button {
    background: var(--link-color) !important;
    color: #ffffff !important;
    border: 2px solid transparent !important;
    font-weight: 600;
}

.btn:hover,
.btn:focus,
button:hover,
button:focus {
    background: var(--link-hover) !important;
    color: #ffffff !important;
    outline: 2px solid var(--link-color) !important;
    outline-offset: 2px;
}

/* -----------------------------------------------------------------------
   10. Footer
   -------------------------------------------------------------------- */
footer,
footer p,
div[role="contentinfo"],
div[role="contentinfo"] p {
    color: var(--text-secondary) !important;
}

/* -----------------------------------------------------------------------
   11. Search area fix
   -------------------------------------------------------------------- */
.wy-side-nav-search {
    background: #0046a0 !important;  /* Darker blue */
}

.wy-side-nav-search > a,
.wy-side-nav-search .wy-dropdown > a {
    color: #ffffff !important;
}

.wy-side-nav-search input[type="text"] {
    background: #ffffff !important;
    color: var(--text-primary) !important;
    border: 2px solid #ffffff !important;
}

/* -----------------------------------------------------------------------
   12. Breadcrumbs
   -------------------------------------------------------------------- */
.wy-breadcrumbs li a {
    color: var(--link-color) !important;
    text-decoration: underline !important;
}

/* -----------------------------------------------------------------------
   13. Additional fixes for specific elements
   -------------------------------------------------------------------- */
/* Fix for any remaining low contrast text */
span, div, td, th, li, p, a {
    color: inherit;
}

/* Ensure all text elements have minimum contrast */
.rst-content {
    color: var(--text-primary) !important;
}

/* Fix for highlighted text */
.highlighted {
    background: #ffeb3b !important;
    color: var(--text-primary) !important;
}

/* Page TOC */
.wy-menu-vertical li.on a,
.wy-menu-vertical li.current > a {
    border-right: none !important;
}

/* RTD version selector */
.rst-versions {
    background: #1a1a1a !important;
    color: #ffffff !important;
}

.rst-versions a {
    color: #ffffff !important;
}

/* -----------------------------------------------------------------------
   14. Video embeds - Preserve original behavior
   -------------------------------------------------------------------- */
/* Video placeholder - maintain responsive 16:9 aspect ratio */
.video-placeholder {
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
    overflow: hidden;
    max-width: 100%;
    margin: 20px 0;
}

.video-placeholder iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}

/* Don't mess with other iframes unless needed */
.rst-content iframe:not(.video-placeholder iframe) {
    max-width: 100%;
    border: 1px solid var(--border-color);
}

/* -----------------------------------------------------------------------
   15. Navigation buttons (Previous/Next) - High contrast fix
   -------------------------------------------------------------------- */
/* Previous/Next buttons at bottom */
.rst-footer-buttons {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #e0e0e0;
}

.rst-footer-buttons .btn-neutral,
.rst-footer-buttons a.btn,
a.btn-neutral {
    background: #ffffff !important;
    color: #1a1a1a !important;
    border: 2px solid #1a1a1a !important;
    padding: 12px 24px !important;
    text-decoration: none !important;
    font-weight: 600 !important;
    display: inline-flex !important;
    align-items: center !important;
    transition: all 0.2s ease !important;
}

.rst-footer-buttons .btn-neutral:hover,
.rst-footer-buttons a.btn:hover,
a.btn-neutral:hover {
    background: #1a1a1a !important;
    color: #ffffff !important;
    text-decoration: none !important;
}

/* Ensure icons are visible */
.rst-footer-buttons .fa {
    color: inherit !important;
    margin: 0 5px;
}

/* Make sure text is readable */
.rst-footer-buttons span {
    color: inherit !important;
}

/* -----------------------------------------------------------------------
   16. Print styles
   -------------------------------------------------------------------- */
@media print {
    body, .wy-nav-content {
        background: white !important;
        color: black !important;
    }
    
    a {
        color: black !important;
        text-decoration: underline !important;
    }
}

/* Simulation Demos*/
.interactive-demo {
    background: #f0f7ff;
    border: 2px solid #0066cc;
    border-radius: 8px;
    padding: 20px;
    margin: 20px 0;
    text-align: center;
}

.demo-link {
    display: inline-block;
    padding: 12px 24px;
    background: #0066cc !important;
    color: white !important;
    text-decoration: none !important;
    border-radius: 4px;
    font-weight: 600;
    transition: background 0.3s;
}

.demo-link:hover {
    background: #0052a3 !important;
}

.demo-description {
    margin-top: 10px;
    color: #555;
}