.. _4-3-conditional-probability:



.. raw:: html

   <div class="video-placeholder">
     <iframe
       src="https://www.youtube.com/embed/JMZDN70PDO0?list=PLHKEwTHXfbagA3ybKLAcEJriGT-6k89c6"
       allowfullscreen>
     </iframe>
   </div>

.. admonition:: Slides ðŸ“Š
   :class: tip
 
   `Download Chapter 4 slides (PPTX) <https://yjjpfnblgtrogqvcjaon.supabase.co/storage/v1/object/public/
   stat-350-assets/slides/Chapter%204%20Probability/L6-8-Probability%20%28Chapter%204%29_AC.pptx>`_

Conditional Probability
===================================

With the foundations of probability established, we can now extend our toolset to explore **how events 
influence each other**. In real-world scenarios, we often have partial information about an experiment's outcome, 
and need to update our probability assessments as more information is gathered. 
Conditional probability provides the mathematical 
framework for incorporating this new information and analyzing relationships between events.

.. admonition:: Road Map ðŸ§­
   :class: important

   â€¢ Define **conditional probability** and understand its interpretation.
   â€¢ Derive the conditional probability formula and the **general multiplication rule**.
   â€¢ Understand how **tree diagrams** represent conditional probabilities graphically.

Understanding Conditional Probability
---------------------------------------

**Conditional probability** addresses how the probability of one event changes when we know 
that another event occurs. It represents the revised probability assessment for an event 
based on new information.

For example, suppose an AI model is built to detect wolves in an image. If it also received
input that the image contains large carnivores, then it would 
assign a higher probability to the presence of wolves than without this prior information. 
This additional information changes, or **conditions**, the probability assessment.

Definition and Notation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The conditional probability of event :math:`A` given that event :math:`B` occurs is denoted by 
:math:`P(A|B)`, read as "the probability of :math:`A` given :math:`B`."

The conditional probability is computed as

.. math::

   P(A|B) = \frac{P(A \cap B)}{P(B)}.

This formula is valid only when :math:`P(B) > 0`; we cannot condition on impossible events,
and we cannot divided by :math:`0` to obtain a valid probability.

What is happening in the conditional probability formula?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

A probability, whether conditional or not, represents the **relative size of 
a part out of a whole**.

In non-conditional situations, the relative size of event A is assessed out of the whole sample space. 

.. figure:: https://yjjpfnblgtrogqvcjaon.supabase.co/storage/v1/object/public/stat-350-assets/images/chapter4/prob-venn.png
   :alt: Venn diagram illustration of non-conditional probability
   :align: center
   :figwidth: 70%

   Non-conditional probability

However, by knowing that event :math:`B` occurs, **our sample space becomes restricted to only the outcomes in** :math:`B`
â€”anything that does not belong to :math:`B` is not a possibility anymore. Within this reduced sample space, we're interested in the relative size of the regoin 
which still belongs to event :math:`A`.

.. _cond-prob-venn:
.. figure:: https://yjjpfnblgtrogqvcjaon.supabase.co/storage/v1/object/public/stat-350-assets/images/chapter4/cond-prob-venn.png
   :alt: Venn diagram illustration of conditional probability
   :align: center
   :figwidth: 70%

   Conditional probability

The numerator of :numref:`cond-prob-venn` is the Venn diagram representation of
:math:`P(A \cap B)` and the denominator of :math:`P(B)`. This graphical expression agrees 
precisely with the mathematical formula of conditional probability.

..
   The Set Minus Operation
   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

   In conditional probability discussions, we often use the **set minus** operation, 
   denoted by A\\B (read as "A minus B"). This represents all elements that are in set A but not in set B.

   .. math::

      A \setminus B = A \cap B'

   This operation allows us to precisely describe parts of sets that don't overlap, 
   which is useful in probability calculations.

.. admonition:: Example ðŸ’¡: Cards from a Deck
   :class: note

   Suppse we are drawing a card from a standard deck, where each of the 52 cards
   has an equal chance of being drawn. 
   Define :math:`H` as the event of drawing a heart and :math:`Q` as the event of drawing a queen.

   .. figure:: https://yjjpfnblgtrogqvcjaon.supabase.co/storage/v1/object/public/stat-350-assets/images/chapter4/standard-deck.png
      :alt: A standard 52-card deck
      :align: center
      :figwidth: 80%

      A standard 52-card deck

   1. A card has been drawn. If it is known that the card is a heart, what is the probability
      that it is a queen?

      * :math:`P(Q âˆ© H) = 1/52` (only one card is both a queen and a heart)
      * :math:`P(H) = 13/52 = 1/4` (there are thirteen hearts)

      .. math:: P(Q|H) = \frac{P(Q âˆ© H)}{P(H)} = \frac{1/52}{13/52} = \frac{1}{13}.

   2. If it is known that the card is a queen, what is the probability
      that it is a heart?

      :math:`P(Q) = 4/52 = 1/13` (there are four queens). Therefore,

      .. math:: P(H|Q) = \frac{P(Q âˆ© H)}{P(Q)} = \frac{1/52}{1/13} = \frac{1}{4}.
      
   ðŸ›‘ In this example, we computed three closely related two-event probabilitiesâ€”
   :math:`P(Q \cap H), P(Q|H),` and :math:`P(H|Q)`â€” which yielded different numerical values.
   It is an important skill to identify which probability a word problem is asking for and
   then apply the correct formula.


The General Multiplication Rule
---------------------------------------

The conditional probability formula can be rearranged to give us the **general multiplication rule**:

.. math::

   P(A \cap B) = P(A|B) P(B)

This is obtained simply by mupltiplying :math:`P(B)` on both sides of the conditional probability formula.
This rule allows us to find the probability of the intersection of two events when we know a 
conditional probability and an unconditional probability.

The formula can also be written as:

.. math::

   P(A \cap B) = P(B|A) P(A)

Both forms are valid, and which one to use depends on what information is available in a problem.

.. admonition:: Extending the General Multiplication Rule to Multiple Events
   :class: important 

   1. Begin by taking an unconditioned probability of any one event.
   2. Multiply the probability of a new event **conditional** on the event used for step 1.
   3. Multiply the probability of another new event **conditional** on the intersection
      of all previously used events.
   4. Continue in a similar manner.

   The order of events does not influence the outcome.
   Therefore, for three events :math:`A, B,` and :math:`C`, there are six different ways to apply the 
   general multiplication rule.

   .. math::

      P(A \cap B \cap C) &= P(A) P(B|A) P(C|A \cap B) \\
      P(A \cap B \cap C) &= P(A) P(C|A) P(B|A \cap C) \\
      P(A \cap B \cap C) &= P(B) P(A|B) P(C|A \cap B) \\
      &\vdots

Tree Diagrams
--------------

**Tree diagrams** provide a visual tool for organizing and calculating probabilities 
in **multi-stage experiments**, especially when conditional probabilities are involved. 

Constructing a Tree Diagram
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. figure:: https://yjjpfnblgtrogqvcjaon.supabase.co/storage/v1/object/public/stat-350-assets/images/chapter4/tree-general.png
   :alt: A general tree diagram
   :align: center
   :figwidth: 50%

   A general tree diagram; the superscript :math:`^c` is another notation for complement.

A tree diagram is constructed using the following rules:

A. Layers
^^^^^^^^^^^^

  The different stages are organized into **vertical layers**. The first
  vertical layer describes all events that happen during the first stage.
  The second layer describe all events that happen in the second stage, and
  the process is repeated if there are more than two stages.

B. Nodes
^^^^^^^^^^

  Each node represents an event **conditional on all previous nodes**. Since
  the first layer does not have any previous node, this is the only layer
  which involves unconditional events.

C. Branches
^^^^^^^^^^^^^^^
  The set of branches stemming from a single node must cover *all* scenarios that can happen
  given the previous path of nodes.
  On each branch leading to a node, we write the *conditional* probability of that node given
  all previous nodes.  

Why is a Tree Diagram Convenient?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* It provides a comprehensive picture of an experiment with many components.
* It allows us to **view the general multiplication rule graphically**, since
  the **probability of a path** can be computed by multiplying all the
  conditional probabilities along the path.

  In a two-layer tree diagram, for example, :math:`P(A' \cap B')` can be computed by

   .. figure:: https://yjjpfnblgtrogqvcjaon.supabase.co/storage/v1/object/public/stat-350-assets/images/chapter4/intersection-prob-tree.png
      :alt: Computing a path probability using a tree diagram
      :align: center
      :figwidth: 40%

      Computing a path probability using a tree diagram

Tree diagrams will also play a crucial role in illustrating important concepts
such as the law of total probability in the following sections.

.. admonition:: ExampleðŸ’¡: Drawing a Tree Diagram

   Glen and Jia are going to Indianapolis for one day this weekend. 
   They are twice as likely to go on Sunday as they are on Friday, and three times 
   as likely to go on Saturday as they are on Friday. There is a 45% chance of rain on Friday, 
   a 25% chance of rain on Saturday, and a 30% chance of rain on Sunday.

   1. Draw a complete tree diagram to represent this situation.

      **Step 1**: Define the notation

      - :math:`Fri, Sat, Sun`: events representing which day they go to Indianapolis
      - :math:`R`: the event that it rains during their trip
      - :math:`R'`: the event that it does not rain during their trip

      **Step 2**: Find the unknown probabilities

      Given that they are twice as likely to go on Sunday as on Friday, and three times as likely 
      to go on Saturday as on Friday, we can write:

      .. math::

         P(Sun) = 2P(Fri) \hspace{0.2cm}\text{ and }\hspace{0.2cm} P(Sat) = 3P(Fri).

      Since they will go on exactly one of the three days:

      .. math::

         1 &= P(Fri) + P(Sat) + P(Sun) \\
           &= P(Fri) + 3P(Fri) + 2P(Fri) = 6P(Fri)\\

      Therefore, :math:`P(Fri) = 1/6`, and

      .. math::

         P(Sat) = 3P(Fri) = 1/2 \hspace{0.2cm}\text{ and }\hspace{0.2cm} P(Sun) = 2P(Fri) = 1/3.
         
      **Step 3**:  Organize other building blocks

      We know the conditional probabilities from the weather forecasts.

      .. math::

         P(R|Fri) &= 0.45 \\
         P(R|Sat) &= 0.25 \\
         P(R|Sun) &= 0.30

      Using the complement rule, we can also find:

      .. math::

         P(R'|Fri) = 1 - P(R|Fri)&= 0.55 \\
         P(R'|Sat) = 1 - P(R|Sat)&= 0.75 \\
         P(R'|Sun) = 1 - P(R|Sun)&= 0.70

      **Step 4**: Draw the diagram

      The set of events for which we do not have any conditional probabilities
      should go in the first layer.

      .. figure:: https://yjjpfnblgtrogqvcjaon.supabase.co/storage/v1/object/public/stat-350-assets/images/chapter4/full-tree-indy.png
         :alt: The tree diagram for the Indianapolis problem
         :align: center
         :figwidth: 70%

         The tree diagram for the Indianapolis problem

   2. Find the probability that they go to Indianapolis on Sunday **and**
      it does not rain.
   
      .. math::

         P(R' \cap Sun) = P(Sun)P(R'|Sun) = (1/3)(0.70) = 7/30.

Bringing It All Together 
-----------------------------
.. admonition:: Key Takeaways ðŸ“
   :class: important

   1. **Conditional probability** :math:`P(A|B)` represents the probability of event A occurring, 
      given that event B occurs, and is calculated as :math:`P(A âˆ© B)/P(B)`.
   
   2. When we condition on an event :math:`B`, we effectively restrict our sample space 
      to only the outcomes in :math:`B`, creating a new probability measure within this reduced space.
   
   3. The **general multiplication rule** :math:`P(A \cap B) = P(A|B) P(B)` allows us to find
      the probability of intersections using conditional probabilities.
   
   4. **Tree diagrams** provide a systematic way to organize and calculate probabilities 
      in multi-stage experiments, with the probability of each path found by multiplying 
      conditional probabilities along branches.
   
   5. When solving conditional probability problems, clearly define the events, identify what is known, 
      and determine what needs to be calculated before applying the appropriate formulas.

Exercises
---------

These exercises develop your skills in computing and interpreting conditional probabilities, using the general multiplication rule, and constructing tree diagrams.

.. admonition:: Exercise 1: Conditional Probability from a Table
   :class: note

   A semiconductor company tests chips from two production lines. The following table shows the results of testing 500 chips:

   .. flat-table:: Chip Quality by Production Line
      :header-rows: 1
      :widths: 25 25 25 25

      * - 
        - Pass
        - Fail
        - Total
      * - Line A
        - 180
        - 20
        - 200
      * - Line B
        - 270
        - 30
        - 300
      * - Total
        - 450
        - 50
        - 500

   Let :math:`A` = "chip is from Line A", :math:`B` = "chip is from Line B", :math:`P` = "chip passes", and :math:`F` = "chip fails."

   a. Calculate :math:`P(P|A)` â€” the probability a chip passes given it's from Line A.

   b. Calculate :math:`P(P|B)` â€” the probability a chip passes given it's from Line B.

   c. Calculate :math:`P(A|F)` â€” the probability a chip is from Line A given it failed.

   d. Calculate :math:`P(F|A)` and verify that :math:`P(F|A) = 1 - P(P|A)`.

   e. Are the events "Pass" and "from Line A" independent? Justify your answer.

   .. dropdown:: Solution
      :class-container: sd-border-success

      **Part (a): P(P|A)**

      Using the conditional probability formula:

      .. math::

         P(P|A) = \frac{P(P \cap A)}{P(A)} = \frac{180/500}{200/500} = \frac{180}{200} = 0.90

      **Interpretation**: 90% of chips from Line A pass inspection.

      **Part (b): P(P|B)**

      .. math::

         P(P|B) = \frac{P(P \cap B)}{P(B)} = \frac{270/500}{300/500} = \frac{270}{300} = 0.90

      **Interpretation**: 90% of chips from Line B also pass inspection.

      **Part (c): P(A|F)**

      .. math::

         P(A|F) = \frac{P(A \cap F)}{P(F)} = \frac{20/500}{50/500} = \frac{20}{50} = 0.40

      **Interpretation**: Given a chip failed, there's a 40% probability it came from Line A.

      **Part (d): P(F|A) and Verification**

      .. math::

         P(F|A) = \frac{P(F \cap A)}{P(A)} = \frac{20/500}{200/500} = \frac{20}{200} = 0.10

      Verify: :math:`P(F|A) = 1 - P(P|A) = 1 - 0.90 = 0.10` âœ“

      This works because, given Line A, the chip either passes or fails (complement rule within the conditional space).

      **Part (e): Independence Check**

      Two events are independent if :math:`P(P|A) = P(P)`.

      - :math:`P(P|A) = 0.90`
      - :math:`P(P) = \frac{450}{500} = 0.90`

      Since :math:`P(P|A) = P(P)`, **yes, "Pass" and "from Line A" are independent.**

      Knowing a chip is from Line A doesn't change the probability it passes. Both lines have the same 90% pass rate.

----

.. admonition:: Exercise 2: Distinguishing Related Probabilities
   :class: note

   A cybersecurity team analyzes network traffic. Based on historical data:

   - :math:`P(\text{Attack}) = 0.05` â€” 5% of connections are malicious attacks
   - :math:`P(\text{Flagged}) = 0.08` â€” 8% of connections trigger a security alert
   - :math:`P(\text{Flagged} \cap \text{Attack}) = 0.04` â€” 4% of connections are both attacks AND flagged

   Calculate and interpret each of the following:

   a. :math:`P(\text{Flagged} | \text{Attack})` â€” Given a connection is an attack, what's the probability it gets flagged?

   b. :math:`P(\text{Attack} | \text{Flagged})` â€” Given a connection is flagged, what's the probability it's actually an attack?

   c. :math:`P(\text{Attack} | \text{Flagged}')` â€” Given a connection is NOT flagged, what's the probability it's an attack?

   d. Which probability from parts (a)-(c) represents the system's "detection rate"? Which represents the "precision" (positive predictive value)?

   .. dropdown:: Solution
      :class-container: sd-border-success

      **Part (a): P(Flagged | Attack)**

      .. math::

         P(\text{Flagged} | \text{Attack}) = \frac{P(\text{Flagged} \cap \text{Attack})}{P(\text{Attack})} = \frac{0.04}{0.05} = 0.80

      **Interpretation**: 80% of actual attacks are detected (flagged). This is the **sensitivity** or **true positive rate**.

      **Part (b): P(Attack | Flagged)**

      .. math::

         P(\text{Attack} | \text{Flagged}) = \frac{P(\text{Flagged} \cap \text{Attack})}{P(\text{Flagged})} = \frac{0.04}{0.08} = 0.50

      **Interpretation**: When a connection is flagged, there's only a 50% chance it's an actual attack. The other 50% are false alarms.

      **Part (c): P(Attack | Flagged')**

      First, find the needed probabilities:

      - :math:`P(\text{Flagged}') = 1 - 0.08 = 0.92`
      - :math:`P(\text{Attack} \cap \text{Flagged}') = P(\text{Attack}) - P(\text{Attack} \cap \text{Flagged}) = 0.05 - 0.04 = 0.01`

      .. math::

         P(\text{Attack} | \text{Flagged}') = \frac{P(\text{Attack} \cap \text{Flagged}')}{P(\text{Flagged}')} = \frac{0.01}{0.92} \approx 0.0109

      **Interpretation**: About 1.09% of unflagged connections are actually attacks that slipped through (missed detections).

      **Part (d): Classification Terminology**

      - **Detection rate (sensitivity)**: :math:`P(\text{Flagged} | \text{Attack}) = 0.80` from part (a)
      - **Precision (positive predictive value)**: :math:`P(\text{Attack} | \text{Flagged}) = 0.50` from part (b)

      Note: The detection rate and precision can be quite different! High detection doesn't guarantee high precision if there are many false alarms.

----

.. admonition:: Exercise 3: General Multiplication Rule
   :class: note

   An aerospace engineer is analyzing a two-stage rocket system. Let:

   - :math:`S_1` = "Stage 1 succeeds"
   - :math:`S_2` = "Stage 2 succeeds"

   Historical data shows:

   - :math:`P(S_1) = 0.95`
   - :math:`P(S_2 | S_1) = 0.92` â€” Stage 2 success rate given Stage 1 succeeded
   - :math:`P(S_2 | S_1') = 0.10` â€” Stage 2 success rate given Stage 1 failed

   a. Calculate :math:`P(S_1 \cap S_2)` â€” the probability both stages succeed.

   b. Calculate :math:`P(S_1' \cap S_2)` â€” the probability Stage 1 fails but Stage 2 succeeds anyway.

   c. Calculate :math:`P(S_1' \cap S_2')` â€” the probability both stages fail.

   d. Verify that :math:`P(S_1 \cap S_2) + P(S_1 \cap S_2') + P(S_1' \cap S_2) + P(S_1' \cap S_2') = 1`.

   .. dropdown:: Solution
      :class-container: sd-border-success

      **Part (a): P(Sâ‚ âˆ© Sâ‚‚)**

      Using the general multiplication rule:

      .. math::

         P(S_1 \cap S_2) = P(S_1) \cdot P(S_2 | S_1) = 0.95 \times 0.92 = 0.874

      **Part (b): P(Sâ‚' âˆ© Sâ‚‚)**

      .. math::

         P(S_1' \cap S_2) = P(S_1') \cdot P(S_2 | S_1') = (1 - 0.95) \times 0.10 = 0.05 \times 0.10 = 0.005

      **Part (c): P(Sâ‚' âˆ© Sâ‚‚')**

      First, find :math:`P(S_2' | S_1') = 1 - P(S_2 | S_1') = 1 - 0.10 = 0.90`

      .. math::

         P(S_1' \cap S_2') = P(S_1') \cdot P(S_2' | S_1') = 0.05 \times 0.90 = 0.045

      **Part (d): Verification**

      First, find :math:`P(S_1 \cap S_2')`:

      :math:`P(S_2' | S_1) = 1 - P(S_2 | S_1) = 1 - 0.92 = 0.08`

      :math:`P(S_1 \cap S_2') = P(S_1) \cdot P(S_2' | S_1) = 0.95 \times 0.08 = 0.076`

      Now sum all four mutually exclusive outcomes:

      .. math::

         P(S_1 \cap S_2) + P(S_1 \cap S_2') + P(S_1' \cap S_2) + P(S_1' \cap S_2') 

      .. math::

         = 0.874 + 0.076 + 0.005 + 0.045 = 1.000 \checkmark

      These four outcomes form a partition of the sample space (every launch results in one of these four scenarios).

----

.. admonition:: Exercise 4: Tree Diagram Construction
   :class: note

   A tech company uses a two-stage interview process. Based on historical data:

   - 60% of candidates pass the technical screening (Stage 1)
   - Of those who pass the technical screening, 70% pass the behavioral interview (Stage 2)
   - Of those who fail the technical screening, 20% are given a second chance and pass the behavioral interview

   Let :math:`T` = "passes technical screening" and :math:`B` = "passes behavioral interview."

   a. Draw a complete tree diagram showing all possible paths with their probabilities.

   b. Calculate the probability that a candidate passes both stages.

   c. Calculate the probability that a candidate passes the behavioral interview (regardless of technical screening result).

   d. Given that a candidate passed the behavioral interview, what is the probability they also passed the technical screening?

   .. dropdown:: Solution
      :class-container: sd-border-success

      **Part (a): Tree Diagram**

      .. code-block:: text

                              [Start]
                             /       \
                     P(T)=0.6         P(T')=0.4
                         /               \
                       [T]               [T']
                      /   \             /    \
              P(B|T)=0.7  P(B'|T)=0.3  P(B|T')=0.2  P(B'|T')=0.8
                   /         \            /            \
                 [B]        [B']        [B]           [B']
                  |           |          |              |
               0.42        0.18       0.08           0.32

      Path probabilities:
      
      - P(T âˆ© B) = 0.6 Ã— 0.7 = 0.42
      - P(T âˆ© B') = 0.6 Ã— 0.3 = 0.18
      - P(T' âˆ© B) = 0.4 Ã— 0.2 = 0.08
      - P(T' âˆ© B') = 0.4 Ã— 0.8 = 0.32

      **Part (b): P(T âˆ© B)**

      From the tree diagram, multiplying along the top-left path:

      .. math::

         P(T \cap B) = P(T) \cdot P(B|T) = 0.6 \times 0.7 = 0.42

      **Part (c): P(B)**

      A candidate can pass the behavioral interview through two paths:
      
      1. Pass technical AND pass behavioral: :math:`P(T \cap B) = 0.42`
      2. Fail technical AND pass behavioral: :math:`P(T' \cap B) = 0.08`

      These paths are mutually exclusive, so:

      .. math::

         P(B) = P(T \cap B) + P(T' \cap B) = 0.42 + 0.08 = 0.50

      **Part (d): P(T | B)**

      Using the conditional probability formula:

      .. math::

         P(T|B) = \frac{P(T \cap B)}{P(B)} = \frac{0.42}{0.50} = 0.84

      **Interpretation**: Given that a candidate passed the behavioral interview, there's an 84% chance they also passed the technical screening.

----

.. admonition:: Exercise 5: Conditional Probability with Cards
   :class: note

   Two cards are drawn from a standard 52-card deck **without replacement**.

   a. What is the probability that both cards are aces?

   b. What is the probability that the second card is an ace, given that the first card is an ace?

   c. What is the probability that exactly one of the two cards is an ace?

   d. What is the probability that at least one card is an ace?

   .. dropdown:: Solution
      :class-container: sd-border-success

      **Part (a): Both Cards are Aces**

      Let :math:`A_1` = "first card is ace" and :math:`A_2` = "second card is ace"

      Using the general multiplication rule:

      .. math::

         P(A_1 \cap A_2) = P(A_1) \cdot P(A_2 | A_1)

      - :math:`P(A_1) = \frac{4}{52}` (4 aces out of 52 cards)
      - :math:`P(A_2 | A_1) = \frac{3}{51}` (after drawing one ace, 3 aces remain out of 51 cards)

      .. math::

         P(A_1 \cap A_2) = \frac{4}{52} \times \frac{3}{51} = \frac{12}{2652} = \frac{1}{221} \approx 0.0045

      **Part (b): P(Aâ‚‚ | Aâ‚)**

      This was computed above:

      .. math::

         P(A_2 | A_1) = \frac{3}{51} = \frac{1}{17} \approx 0.0588

      **Part (c): Exactly One Ace**

      "Exactly one" = (first is ace AND second is not) OR (first is not ace AND second is ace)

      **Path 1**: First ace, second not ace

      .. math::

         P(A_1 \cap A_2') = P(A_1) \cdot P(A_2' | A_1) = \frac{4}{52} \times \frac{48}{51} = \frac{192}{2652}

      **Path 2**: First not ace, second is ace

      .. math::

         P(A_1' \cap A_2) = P(A_1') \cdot P(A_2 | A_1') = \frac{48}{52} \times \frac{4}{51} = \frac{192}{2652}

      .. math::

         P(\text{exactly one ace}) = \frac{192}{2652} + \frac{192}{2652} = \frac{384}{2652} = \frac{32}{221} \approx 0.1448

      **Part (d): At Least One Ace**

      Use the complement: :math:`P(\text{at least one}) = 1 - P(\text{no aces})`

      .. math::

         P(A_1' \cap A_2') = P(A_1') \cdot P(A_2' | A_1') = \frac{48}{52} \times \frac{47}{51} = \frac{2256}{2652}

      .. math::

         P(\text{at least one ace}) = 1 - \frac{2256}{2652} = \frac{396}{2652} = \frac{33}{221} \approx 0.1493

      **Verification**: P(exactly one) + P(both aces) should equal P(at least one):

      :math:`\frac{32}{221} + \frac{1}{221} = \frac{33}{221}` âœ“

----

.. admonition:: Exercise 6: Sequential Testing
   :class: note

   A quality control process tests electronic components in sequence. Each component has a 90% probability of passing, and tests are independent.

   a. If 3 components are tested, what is the probability all three pass?

   b. What is the probability that the first failure occurs on the third component tested?

   c. What is the probability that at least one of the three components fails?

   d. A batch is accepted if at least 2 out of 3 components pass. What is the probability the batch is accepted?

   .. dropdown:: Solution
      :class-container: sd-border-success

      Let :math:`P(\text{Pass}) = 0.9` and :math:`P(\text{Fail}) = 0.1` for each component.

      **Part (a): All Three Pass**

      Since tests are independent:

      .. math::

         P(\text{all pass}) = 0.9 \times 0.9 \times 0.9 = 0.9^3 = 0.729

      **Part (b): First Failure on Third Component**

      This means: Pass, Pass, Fail

      .. math::

         P(\text{PPF}) = 0.9 \times 0.9 \times 0.1 = 0.081

      **Part (c): At Least One Fails**

      Use complement: :math:`P(\text{at least one fails}) = 1 - P(\text{all pass})`

      .. math::

         P(\text{at least one fails}) = 1 - 0.729 = 0.271

      **Part (d): Batch Accepted (At Least 2 Pass)**

      "At least 2 pass" = (exactly 2 pass) OR (all 3 pass)

      **All 3 pass**: :math:`P(\text{PPP}) = 0.729`

      **Exactly 2 pass** (one fails): The failure can occur in position 1, 2, or 3:
      
      - FPP: :math:`0.1 \times 0.9 \times 0.9 = 0.081`
      - PFP: :math:`0.9 \times 0.1 \times 0.9 = 0.081`
      - PPF: :math:`0.9 \times 0.9 \times 0.1 = 0.081`

      :math:`P(\text{exactly 2 pass}) = 3 \times 0.081 = 0.243`

      .. math::

         P(\text{batch accepted}) = 0.729 + 0.243 = 0.972

----

Additional Practice Problems
----------------------------

**True/False Questions** (1 point each)

1. :math:`P(A|B)` is always equal to :math:`P(B|A)`.

   â“‰ or â’»

2. If :math:`P(A|B) = P(A)`, then events A and B are independent.

   â“‰ or â’»

3. For any events A and B with :math:`P(B) > 0`, :math:`P(A|B) = \frac{P(A \cap B)}{P(B)}`.

   â“‰ or â’»

4. The general multiplication rule states :math:`P(A \cap B) = P(A) \cdot P(B)`.

   â“‰ or â’»

5. In a tree diagram, the probability of a complete path is found by adding the probabilities along the branches.

   â“‰ or â’»

6. :math:`P(A|B) + P(A'|B) = 1`.

   â“‰ or â’»

**Multiple Choice Questions** (2 points each)

7. If :math:`P(A) = 0.4`, :math:`P(B) = 0.5`, and :math:`P(A \cap B) = 0.2`, what is :math:`P(A|B)`?

   â’¶ 0.2
   
   â’· 0.4
   
   â’¸ 0.5
   
   â’¹ 0.8

8. If :math:`P(A) = 0.3`, :math:`P(B|A) = 0.6`, what is :math:`P(A \cap B)`?

   â’¶ 0.18
   
   â’· 0.30
   
   â’¸ 0.50
   
   â’¹ 0.90

9. A box contains 5 red and 3 blue balls. Two balls are drawn without replacement. What is the probability that the second ball is red, given that the first ball was blue?

   â’¶ 5/8
   
   â’· 5/7
   
   â’¸ 4/7
   
   â’¹ 3/8

10. If :math:`P(A|B) = 0.7` and :math:`P(B) = 0.4`, what is :math:`P(A \cap B)`?

    â’¶ 0.175
    
    â’· 0.28
    
    â’¸ 0.40
    
    â’¹ 0.70

.. dropdown:: Answers to Practice Problems
   :class-container: sd-border-success

   **True/False Answers:**

   1. **False** â€” :math:`P(A|B)` and :math:`P(B|A)` are generally different. Example: P(Heart|Red) = 1/2, but P(Red|Heart) = 1.

   2. **True** â€” This is one definition of independence. If knowing B doesn't change the probability of A, the events are independent.

   3. **True** â€” This is the definition of conditional probability.

   4. **False** â€” The general multiplication rule is :math:`P(A \cap B) = P(A|B) \cdot P(B)`. The formula :math:`P(A) \cdot P(B)` only works for **independent** events.

   5. **False** â€” The probability of a complete path is found by **multiplying** (not adding) the probabilities along the branches. This is the general multiplication rule applied sequentially.

   6. **True** â€” Within the conditional space of B, events A and A' are complements. Given B occurs, either A occurs or A' occurs (but not both).

   **Multiple Choice Answers:**

   7. **â’·** â€” :math:`P(A|B) = \frac{P(A \cap B)}{P(B)} = \frac{0.2}{0.5} = 0.4`

   8. **â’¶** â€” Using the general multiplication rule: :math:`P(A \cap B) = P(A) \cdot P(B|A) = 0.3 \times 0.6 = 0.18`

   9. **â’·** â€” After removing one blue ball, 7 balls remain (5 red, 2 blue). :math:`P(\text{Red}_2 | \text{Blue}_1) = \frac{5}{7}`

   10. **â’·** â€” Using the general multiplication rule: :math:`P(A \cap B) = P(A|B) \cdot P(B) = 0.7 \times 0.4 = 0.28`